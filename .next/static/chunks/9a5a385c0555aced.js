(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,34992,e=>{e.v({actions:"TopHeader-module__TNE3sW__actions",header:"TopHeader-module__TNE3sW__header",iconBtn:"TopHeader-module__TNE3sW__iconBtn",primaryBtn:"TopHeader-module__TNE3sW__primaryBtn",subtitle:"TopHeader-module__TNE3sW__subtitle",title:"TopHeader-module__TNE3sW__title",titleSection:"TopHeader-module__TNE3sW__titleSection"})},49474,e=>{"use strict";var t=e.i(43476),a=e.i(34992);function i({title:e="Research Lab Dashboard",subtitle:i="Welcome back, researcher. Your next breakthrough awaits."}){return(0,t.jsxs)("header",{className:a.default.header,children:[(0,t.jsxs)("div",{className:a.default.titleSection,children:[(0,t.jsx)("h1",{className:a.default.title,children:e}),(0,t.jsx)("p",{className:a.default.subtitle,children:i})]}),(0,t.jsxs)("div",{className:a.default.actions,children:[(0,t.jsx)("button",{className:a.default.iconBtn,children:"üîî"}),(0,t.jsxs)("button",{className:a.default.primaryBtn,children:[(0,t.jsx)("span",{children:"+"})," New Simulation"]})]})]})}e.s(["default",()=>i])},81472,e=>{"use strict";let t=[{id:"L1_1",topic:"chemistry",difficulty:1,level:1,text:"What is the primary purpose of titration in pharmaceutical analysis?",options:["To synthesize drugs","To determine concentration","To measure temperature","To break bonds"],correctIndex:1,explanation:"Titration is a quantitative technique used to determine the concentration of an analyte."},{id:"L1_2",topic:"chemistry",difficulty:2,level:1,text:"Which indicator is commonly used in acid-base titrations involving strong acid and strong base?",options:["Starch","Phenolphthalein","Eriochrome Black T","Ferroin"],correctIndex:1,explanation:"Phenolphthalein is standard for strong acid-base titrations, changing color around pH 8-10."},{id:"L2_1",topic:"chemistry",difficulty:2,level:2,text:"What is the product of the reaction between Salicylic acid and Acetic anhydride?",options:["Paracetamol","Ibuprofen","Aspirin","Benzoic Acid"],correctIndex:2,explanation:"Aspirin (Acetylsalicylic acid) is formed by acetylation of Salicylic acid."},{id:"L3_1",topic:"chemistry",difficulty:3,level:3,text:"Why is Benzene more stable than expected for a cyclic triene?",options:["High Reactivity","Resonance Energy","Weak Bonds","Octet Rule violation"],correctIndex:1,explanation:"Delocalization of pi-electrons (Resonance) confers extra stability to the aromatic ring."},{id:"L4_1",topic:"pharmacology",difficulty:3,level:4,text:"Which term describes the relationship between chemical structure and biological activity?",options:["SAR","NMR","HPLC","TLC"],correctIndex:0,explanation:"Structure-Activity Relationship (SAR) studies how structural changes affect potency and efficacy."},{id:"L5_1",topic:"pharmacology",difficulty:4,level:5,text:"Beta-lactam antibiotics (like Penicillin) work by inhibiting:",options:["Protein synthesis","Cell wall synthesis","DNA replication","Folic acid synthesis"],correctIndex:1,explanation:"They inhibit penicillin-binding proteins (PBPs), preventing bacterial cell wall cross-linking."},{id:"L6_1",topic:"kinetics",difficulty:3,level:6,text:"Which extraction method is best for heat-sensitive volatile oils?",options:["Soxhlet","Steam Distillation","Maceration","Cold Expression"],correctIndex:3,explanation:"Cold expression is used for citrus oils to avoid thermal degradation."},{id:"L7_1",topic:"kinetics",difficulty:4,level:7,text:"Liposomes are primarily chemically composed of:",options:["Proteins","Phospholipids","Carbohydrates","Metals"],correctIndex:1,explanation:"Liposomes are spherical vesicles formed by a lipid bilayer of phospholipids."},{id:"L8_1",topic:"regulatory",difficulty:1,level:8,text:"Which agency is responsible for drug approval in the USA?",options:["EMA","WHO","FDA","CDC"],correctIndex:2,explanation:"The FDA (Food and Drug Administration) regulates drug approval in the US."},{id:"L8_2",topic:"regulatory",difficulty:3,level:8,text:"What application is submitted to start clinical trials in humans?",options:["NDA","IND","ANDA","BLA"],correctIndex:1,explanation:"An IND (Investigational New Drug) application is required before Phase I trials."},{id:"L8_3",topic:"regulatory",difficulty:5,level:8,text:"Phase IV clinical trials are also known as:",options:["Dose ranging","Therapeutic confirmation","Post-marketing surveillance","Safety screening"],correctIndex:2,explanation:"Phase IV occurs after approval to monitor long-term safety in the general population."}];e.s(["QUESTION_BANK",0,t,"getQuestionsForLevel",0,(e,a=5)=>{let i=t.filter(t=>t.level===e);if(i.length<a){let e=i[0];e&&(i=[...i,...t.filter(t=>t.topic===e.topic&&!t.level)])}return i.sort(()=>.5-Math.random()).slice(0,a)}])},72205,e=>{"use strict";var t=e.i(59141);e.i(36180);var a=e.i(98925);e.s(["TrialService",0,{async getSubmissions(e){try{let i=(0,a.query)((0,a.collection)(t.db,"trials"),(0,a.where)("userId","==",e));return(await (0,a.getDocs)(i)).docs.map(e=>({id:e.id,...e.data()})).sort((e,t)=>(t.submittedAt||0)-(e.submittedAt||0))}catch(e){return console.error("Failed to load trial submissions:",e),[]}},async saveSubmission(e,i){let r=`trial_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,s={...i,id:r,userId:e,submittedAt:Date.now(),status:"pending"};return await (0,a.setDoc)((0,a.doc)(t.db,"trials",r),s),s},async updateSubmission(e,i){try{let r=(0,a.doc)(t.db,"trials",e);await (0,a.updateDoc)(r,i);let s=await (0,a.getDoc)(r);if(s.exists())return{id:s.id,...s.data()};return null}catch(e){return console.error("Failed to update trial:",e),null}},async getSubmission(e){try{let i=(0,a.doc)(t.db,"trials",e),r=await (0,a.getDoc)(i);if(r.exists())return{id:r.id,...r.data()};return null}catch(e){return console.error("Failed to get trial:",e),null}},async deleteSubmission(e){try{return await (0,a.deleteDoc)((0,a.doc)(t.db,"trials",e)),!0}catch(e){return console.error("Failed to delete trial:",e),!1}},async saveRoadmap(e,i){try{return await (0,a.updateDoc)((0,a.doc)(t.db,"trials",e),{roadmap:{...i,generatedAt:Date.now()}}),!0}catch(e){return console.error("Failed to save roadmap:",e),!1}},async updateSimulationState(e,i){try{return await (0,a.updateDoc)((0,a.doc)(t.db,"trials",e),{simulationState:i,status:"in_progress"}),!0}catch(e){return console.error("Failed to update simulation state:",e),!1}}}])},28783,76480,e=>{"use strict";let t=[{level:1,semester:"Sem 1",title:"Pharm. Analysis",description:"Synthesize Paracetamol and verify its structural purity.",moleculeTemplate:{name:"Paracetamol",description:"C8H9NO2 - Benzene ring + Hydroxyl + Acetamide group.",atoms:[{id:1,element:"C",position:[0,0,0]},{id:2,element:"C",position:[1.4,0,0]},{id:3,element:"C",position:[2.1,1.2,0]},{id:4,element:"C",position:[1.4,2.4,0]},{id:5,element:"C",position:[0,2.4,0]},{id:6,element:"C",position:[-.7,1.2,0]},{id:7,element:"O",position:[2.1,-1.2,0]},{id:8,element:"H",position:[3,-1.4,0]},{id:9,element:"N",position:[-2.1,1.2,0]},{id:10,element:"H",position:[-2.5,2.1,0]},{id:11,element:"C",position:[-3,0,0]},{id:12,element:"O",position:[-3.5,-1,0]},{id:13,element:"C",position:[-4.2,.8,0]},{id:14,element:"H",position:[3.1,1.2,0]},{id:15,element:"H",position:[2,3.3,0]},{id:16,element:"H",position:[-.6,3.3,0]},{id:17,element:"H",position:[-4.8,0,0]},{id:18,element:"H",position:[-4.8,1.3,0]},{id:19,element:"H",position:[-3.8,1.6,0]}],bonds:[{source:1,target:2,order:2},{source:2,target:3,order:1},{source:3,target:4,order:2},{source:4,target:5,order:1},{source:5,target:6,order:2},{source:6,target:1,order:1},{source:2,target:7,order:1},{source:7,target:8,order:1},{source:6,target:9,order:1},{source:9,target:10,order:1},{source:9,target:11,order:1},{source:11,target:12,order:2},{source:11,target:13,order:1},{source:3,target:14,order:1},{source:4,target:15,order:1},{source:5,target:16,order:1},{source:13,target:17,order:1},{source:13,target:18,order:1},{source:13,target:19,order:1}]},quizTopic:"chemistry",learningObjective:"Understand basic aromatic substitution and purity analysis."},{level:2,semester:"Sem 2",title:"Organic Chemistry I",description:"Synthesize Aspirin and modify the ester group for stability.",moleculeTemplate:{name:"Aspirin",description:"C9H8O4 - Acetylsalicylic Acid.",atoms:[{id:1,element:"C",position:[0,0,0]},{id:2,element:"C",position:[1.4,0,0]},{id:3,element:"C",position:[2.1,1.2,0]},{id:4,element:"C",position:[1.4,2.4,0]},{id:5,element:"C",position:[0,2.4,0]},{id:6,element:"C",position:[-.7,1.2,0]},{id:7,element:"C",position:[2.8,-1.2,0]},{id:8,element:"O",position:[4,-.8,0]},{id:9,element:"O",position:[2.4,-2.4,0]},{id:10,element:"H",position:[3.2,-2.8,0]},{id:11,element:"O",position:[-2,1.2,0]},{id:12,element:"C",position:[-3,.4,0]},{id:13,element:"O",position:[-3.5,-.6,0]},{id:14,element:"C",position:[-4,1.4,0]},{id:15,element:"H",position:[0,-.9,0]},{id:16,element:"H",position:[3.1,1.2,0]},{id:17,element:"H",position:[2,3.3,0]},{id:18,element:"H",position:[-.6,3.3,0]},{id:19,element:"H",position:[-4.6,.8,0]},{id:20,element:"H",position:[-4.6,2,0]},{id:21,element:"H",position:[-3.4,2.2,0]}],bonds:[{source:1,target:2,order:2},{source:2,target:3,order:1},{source:3,target:4,order:2},{source:4,target:5,order:1},{source:5,target:6,order:2},{source:6,target:1,order:1},{source:2,target:7,order:1},{source:7,target:8,order:2},{source:7,target:9,order:1},{source:9,target:10,order:1},{source:6,target:11,order:1},{source:11,target:12,order:1},{source:12,target:13,order:2},{source:12,target:14,order:1},{source:1,target:15,order:1},{source:3,target:16,order:1},{source:4,target:17,order:1},{source:5,target:18,order:1},{source:14,target:19,order:1},{source:14,target:20,order:1},{source:14,target:21,order:1}]},quizTopic:"chemistry",learningObjective:"Master esterification reactions."},{level:3,semester:"Sem 3",title:"Organic Chemistry II",description:"Analyze Benzene stability and aromatic resonance.",moleculeTemplate:{name:"Benzene",description:"C6H6 - The fundamental aromatic ring with delocalized electrons.",atoms:[{id:1,element:"C",position:[0,1.4,0]},{id:2,element:"C",position:[1.2,.7,0]},{id:3,element:"C",position:[1.2,-.7,0]},{id:4,element:"C",position:[0,-1.4,0]},{id:5,element:"C",position:[-1.2,-.7,0]},{id:6,element:"C",position:[-1.2,.7,0]},{id:7,element:"H",position:[0,2.4,0]},{id:8,element:"H",position:[2.1,1.2,0]},{id:9,element:"H",position:[2.1,-1.2,0]},{id:10,element:"H",position:[0,-2.4,0]},{id:11,element:"H",position:[-2.1,-1.2,0]},{id:12,element:"H",position:[-2.1,1.2,0]}],bonds:[{source:1,target:2,order:2},{source:2,target:3,order:1},{source:3,target:4,order:2},{source:4,target:5,order:1},{source:5,target:6,order:2},{source:6,target:1,order:1},{source:1,target:7,order:1},{source:2,target:8,order:1},{source:3,target:9,order:1},{source:4,target:10,order:1},{source:5,target:11,order:1},{source:6,target:12,order:1}]},quizTopic:"chemistry",learningObjective:"Understand aromaticity and resonance energy."},{level:4,semester:"Sem 4",title:"Med. Chem I",description:"Optimize Ibuprofen side-chains for better receptor binding.",moleculeTemplate:{name:"Ibuprofen",description:"C13H18O2 - Propionic acid derivative NSAID.",atoms:[{id:1,element:"C",position:[0,0,0]},{id:2,element:"C",position:[1.4,0,0]},{id:3,element:"C",position:[2.1,1.2,0]},{id:4,element:"C",position:[1.4,2.4,0]},{id:5,element:"C",position:[0,2.4,0]},{id:6,element:"C",position:[-.7,1.2,0]},{id:7,element:"C",position:[3.5,1.2,0]},{id:8,element:"C",position:[4.2,.2,0]},{id:9,element:"C",position:[4.2,2.4,0]},{id:10,element:"O",position:[5.4,2.2,0]},{id:11,element:"O",position:[3.8,3.6,0]},{id:12,element:"H",position:[4.5,4,0]},{id:13,element:"C",position:[-2.1,1.2,0]},{id:14,element:"C",position:[-3,0,0]},{id:15,element:"C",position:[-4.4,.2,0]},{id:16,element:"C",position:[-2.6,-1.4,0]},{id:17,element:"H",position:[0,-.9,0]},{id:18,element:"H",position:[2,-.9,0]},{id:19,element:"H",position:[2,3.3,0]},{id:20,element:"H",position:[-.6,3.3,0]}],bonds:[{source:1,target:2,order:2},{source:2,target:3,order:1},{source:3,target:4,order:2},{source:4,target:5,order:1},{source:5,target:6,order:2},{source:6,target:1,order:1},{source:3,target:7,order:1},{source:7,target:8,order:1},{source:7,target:9,order:1},{source:9,target:10,order:2},{source:9,target:11,order:1},{source:11,target:12,order:1},{source:6,target:13,order:1},{source:13,target:14,order:1},{source:14,target:15,order:1},{source:14,target:16,order:1},{source:1,target:17,order:1},{source:2,target:18,order:1},{source:4,target:19,order:1},{source:5,target:20,order:1}]},quizTopic:"pharmacology",learningObjective:"Chirality and Structure-Activity Relationship (SAR)."},{level:5,semester:"Sem 5",title:"Pharmacology",description:"Propose Penicillin modifications to fight bacterial resistance.",moleculeTemplate:{name:"Penicillin G Core",description:"Beta-lactam + Thiazolidine ring system.",atoms:[{id:1,element:"C",position:[0,0,0]},{id:2,element:"N",position:[1.2,.5,0]},{id:3,element:"C",position:[1.2,1.8,0]},{id:4,element:"C",position:[0,1.3,0]},{id:5,element:"O",position:[2.2,2.5,0]},{id:6,element:"S",position:[-1.2,.5,0]},{id:7,element:"C",position:[-1.2,2,0]},{id:8,element:"C",position:[-2.4,2.8,0]},{id:9,element:"O",position:[-3.4,2.2,0]},{id:10,element:"O",position:[-2.4,4,0]},{id:11,element:"H",position:[-3.2,4.4,0]},{id:12,element:"C",position:[-2,3,1]},{id:13,element:"C",position:[-2,3,-1]},{id:14,element:"C",position:[2.4,-.2,0]},{id:15,element:"O",position:[2.8,-1.3,0]},{id:16,element:"H",position:[2.8,.6,0]}],bonds:[{source:1,target:2,order:1},{source:2,target:3,order:1},{source:3,target:4,order:1},{source:4,target:1,order:1},{source:3,target:5,order:2},{source:4,target:6,order:1},{source:6,target:7,order:1},{source:7,target:4,order:1},{source:7,target:8,order:1},{source:8,target:9,order:2},{source:8,target:10,order:1},{source:10,target:11,order:1},{source:7,target:12,order:1},{source:7,target:13,order:1},{source:2,target:14,order:1},{source:14,target:15,order:2},{source:14,target:16,order:1}]},quizTopic:"pharmacology",learningObjective:"Antibiotic mechanisms and resistance."},{level:6,semester:"Sem 6",title:"Herbal Tech",description:"Perform extraction analysis on Morphine alkaloids.",moleculeTemplate:{name:"Morphine Core",description:"C17H19NO3 - Phenanthrene backbone with key functional groups.",atoms:[{id:1,element:"C",position:[0,0,0]},{id:2,element:"C",position:[1.4,0,0]},{id:3,element:"C",position:[2.1,1.2,0]},{id:4,element:"C",position:[1.4,2.4,0]},{id:5,element:"C",position:[0,2.4,0]},{id:6,element:"C",position:[-.7,1.2,0]},{id:7,element:"O",position:[-2,1.2,0]},{id:8,element:"H",position:[-2.5,.5,0]},{id:9,element:"O",position:[3.4,1.2,0]},{id:10,element:"C",position:[3.8,2.4,0]},{id:11,element:"N",position:[0,3.8,1]},{id:12,element:"C",position:[-1.2,4.4,1.2]},{id:13,element:"C",position:[2.8,3.4,.5]},{id:14,element:"O",position:[3.2,4.6,.8]},{id:15,element:"H",position:[4,4.8,.5]}],bonds:[{source:1,target:2,order:2},{source:2,target:3,order:1},{source:3,target:4,order:2},{source:4,target:5,order:1},{source:5,target:6,order:2},{source:6,target:1,order:1},{source:6,target:7,order:1},{source:7,target:8,order:1},{source:3,target:9,order:1},{source:9,target:10,order:1},{source:5,target:11,order:1},{source:11,target:12,order:1},{source:4,target:13,order:1},{source:13,target:14,order:1},{source:14,target:15,order:1}]},quizTopic:"kinetics",learningObjective:"Extraction techniques and alkaloid chemistry."},{level:7,semester:"Sem 7",title:"NDDS",description:"Design a Liposomal delivery system for targeted therapy.",moleculeTemplate:{name:"Phospholipid",description:"Phosphatidylcholine - key component of liposomal delivery.",atoms:[{id:1,element:"P",position:[0,3,0]},{id:2,element:"O",position:[.8,3.8,0]},{id:3,element:"O",position:[-.8,3.8,0]},{id:4,element:"O",position:[0,2,0]},{id:5,element:"C",position:[0,1,0]},{id:6,element:"C",position:[1.2,.5,0]},{id:7,element:"C",position:[-1.2,.5,0]},{id:8,element:"O",position:[2,1.2,0]},{id:9,element:"C",position:[3,.8,0]},{id:10,element:"O",position:[3.5,1.6,0]},{id:11,element:"C",position:[3.5,-.4,0]},{id:12,element:"C",position:[4,-1.6,0]},{id:13,element:"C",position:[4.5,-2.8,0]},{id:14,element:"O",position:[-2,1.2,0]},{id:15,element:"C",position:[-3,.8,0]},{id:16,element:"O",position:[-3.5,1.6,0]},{id:17,element:"C",position:[-3.5,-.4,0]},{id:18,element:"C",position:[-4,-1.6,0]},{id:19,element:"C",position:[-4.5,-2.8,0]},{id:20,element:"N",position:[0,5,0]}],bonds:[{source:1,target:2,order:2},{source:1,target:3,order:1},{source:1,target:4,order:1},{source:4,target:5,order:1},{source:5,target:6,order:1},{source:5,target:7,order:1},{source:6,target:8,order:1},{source:8,target:9,order:1},{source:9,target:10,order:2},{source:9,target:11,order:1},{source:11,target:12,order:1},{source:12,target:13,order:1},{source:7,target:14,order:1},{source:14,target:15,order:1},{source:15,target:16,order:2},{source:15,target:17,order:1},{source:17,target:18,order:1},{source:18,target:19,order:1},{source:3,target:20,order:1}]},quizTopic:"kinetics",learningObjective:"Novel Drug Delivery Systems."},{level:8,semester:"Sem 8",title:"Clinical Research",description:"Guide Candidate-X through a complete Phase I-III Clinical Trial.",moleculeTemplate:{name:"Candidate-X",description:"Novel Fluorinated Oncology Drug for Clinical Trial.",atoms:[{id:1,element:"C",position:[0,0,0]},{id:2,element:"C",position:[1.4,0,0]},{id:3,element:"N",position:[2.1,1,0]},{id:4,element:"C",position:[3.4,1.2,0]},{id:5,element:"O",position:[4,2.2,0]},{id:6,element:"F",position:[-1,.8,0]},{id:7,element:"F",position:[-1,-.8,0]},{id:8,element:"C",position:[4,0,0]},{id:9,element:"C",position:[5.2,.5,0]},{id:10,element:"N",position:[5.8,-.5,0]},{id:11,element:"H",position:[0,-.9,0]},{id:12,element:"H",position:[1.8,-.9,0]},{id:13,element:"H",position:[1.8,1.8,0]},{id:14,element:"H",position:[3.8,-.9,0]},{id:15,element:"H",position:[6.8,-.5,0]}],bonds:[{source:1,target:2,order:2},{source:2,target:3,order:1},{source:3,target:4,order:1},{source:4,target:5,order:2},{source:1,target:6,order:1},{source:1,target:7,order:1},{source:4,target:8,order:1},{source:8,target:9,order:2},{source:9,target:10,order:1},{source:2,target:11,order:1},{source:2,target:12,order:1},{source:3,target:13,order:1},{source:8,target:14,order:1},{source:10,target:15,order:1}]},quizTopic:"regulatory",learningObjective:"Complete IND/NDA process."}];async function a(e,t){let a=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),i=await a.text(),r=null;try{r=i?JSON.parse(i):null}catch{r=null}if(!a.ok){let e=Error(r?.message||r?.error||i||a.statusText);throw e.status=a.status,e.errorType=r?.errorType,e}return r??{}}function i(e,t){return 429===t||e.includes("429")||e.includes("quota")||e.includes("RESOURCE_EXHAUSTED")||e.includes("rate limit")||e.includes("Rate Limit")||404===t||e.includes("404")||e.includes("not found")}function r(e){return{message:e?.message||String(e)||"Unknown error",status:e?.status||e?.response?.status}}e.s(["SYLLABUS_DATA",0,t],28783),e.s(["AiService",0,{async analyzeMolecule(e,t,s){try{let i=await a("/api/ai/analyze-molecule",{moleculeName:e,atomCount:t,userModifications:s});return{analysis:i.analysis,efficacy:i.efficacy,safety:i.safety,feedback:i.feedback,visualPrompt:i.visualPrompt||"A generic 3D molecule structure, clean scientific style"}}catch(o){let{message:a,status:s}=r(o);if(503===s)return{analysis:"AI Service Unavailable (Missing Key)",safety:50,efficacy:50,feedback:"Please configure your API key in .env.local",visualPrompt:"A generic molecule structure in blue style"};if(i(a,s))return console.warn("AI Service: Rate limit reached. Using simulated analysis."),{analysis:`[Simulated] Your ${e} modification shows promise. The ${t} atom structure maintains core stability.`,efficacy:65+Math.floor(20*Math.random()),safety:70+Math.floor(15*Math.random()),feedback:"API quota exceeded - using simulated analysis.",visualPrompt:"A standard pharmaceutical molecule rendering"};return console.warn("AI Service Error:",a),{analysis:"Analysis failed due to connection error.",efficacy:40,safety:40,feedback:"Could not connect to AI lab expert. Please check your connection.",visualPrompt:"Error state molecule visualization"}}},async generateQuestion(e,t){try{return(await a("/api/ai/generate-question",{topic:e,level:t})).question}catch(a){let{message:e,status:t}=r(a);return i(e,t)?console.warn("AI Service: Rate limit - using local question bank."):console.error("AI Question Gen Failed:",e),null}},async generateTrialRoadmap(e,t,s){try{let i=await a("/api/ai/trial-roadmap",{moleculeName:e,efficacy:t,safety:s});return{summary:i.summary,phases:i.phases,successProbability:i.successProbability}}catch(l){let{message:a,status:o}=r(l);return i(a,o)?console.warn("AI Service: Rate limit - using fallback roadmap."):console.warn("AI Roadmap Generation Failed:",a),this.getFallbackRoadmap(e,t,s)}},getFallbackRoadmap(e,t,a){let i=Math.round((.6*t+.4*a)*.8);return{summary:`${e} is a promising drug candidate currently under development. Based on preliminary analysis, it shows potential for therapeutic application.`,phases:[{name:"Preclinical",duration:"6-12 months",description:"Laboratory and animal testing to evaluate basic safety and biological activity. This phase determines if the compound is safe enough for human trials.",keyActivities:["In vitro cell studies","Animal toxicology tests","Pharmacokinetic analysis"],risks:a<60?"Safety concerns may require additional testing":"Standard preclinical risks apply"},{name:"Phase I Clinical Trial",duration:"1-2 years",description:"First-in-human studies with 20-100 healthy volunteers. Focus is on safety, dosage, and side effects.",keyActivities:["Healthy volunteer recruitment","Dose escalation studies","Safety monitoring"],risks:"Unexpected adverse reactions in humans"},{name:"Phase II Clinical Trial",duration:"2-3 years",description:"Testing in 100-500 patients with the target condition. Evaluates efficacy and optimal dosing.",keyActivities:["Patient recruitment","Efficacy measurements","Side effect profiling"],risks:t<70?"Efficacy may not meet primary endpoints":"Competition from similar drugs in development"},{name:"Phase III & FDA Review",duration:"3-5 years",description:"Large-scale trials with 1000-5000+ patients. Confirms effectiveness and monitors long-term safety before FDA submission.",keyActivities:["Multi-center trials","NDA preparation","FDA review process"],risks:"Regulatory delays or additional data requirements"}],successProbability:i}},generateMoleculeImageUrl(e,t="#3b82f6"){let a=encodeURIComponent(e.slice(0,20)),i=t.replace("#","");return`https://via.placeholder.com/400x300/${i}/ffffff?text=${a}`},async generateTrialEvent(e,t,s,o,l,n){try{let i=await a("/api/ai/trial-event",{moleculeName:e,phaseName:t,phaseDescription:s,currentStats:o,previousEvents:l,chemicalFeatures:n});return{title:i.title,description:i.description,choices:i.choices,isPhaseComplete:i.isPhaseComplete}}catch(s){let{message:e,status:a}=r(s);return i(e,a)?console.warn("AI Service: Rate limit - using fallback event."):console.warn("AI Trial Event Failed:",e),this.getFallbackTrialEvent(t,o)}},async generatePhaseScenarios(e,t,i,r){try{let s=await a("/api/ai/scenario",{moleculeName:e,phaseName:t,phaseDescription:i,chemicalFeatures:r});if(!s.success||!s.data)throw Error("Failed to generate scenarios");return s.data}catch(e){return console.error("Scenario Gen Error:",e),[]}},getFallbackTrialEvent(e,t){let a={Preclinical:{title:"Animal Study Results",description:"Initial animal studies are showing promising results, but there are some concerning liver enzyme readings in a subset of test subjects.",choices:[{text:"Conduct additional testing",budgetEffect:-15e5,efficacyEffect:5,safetyEffect:10,outcomeText:"Extended testing revealed the issue was dose-related. Protocol adjusted successfully."},{text:"Proceed with current protocol",budgetEffect:0,efficacyEffect:0,safetyEffect:-10,outcomeText:"Trial continues with documented risks. Safety team is monitoring closely."}],isPhaseComplete:t.efficacy>=40&&t.safety>=60},"Phase I Clinical Trial":{title:"Volunteer Recruitment Challenge",description:"Healthy volunteer enrollment is slower than expected. The trial timeline may be affected.",choices:[{text:"Increase incentives ($2M)",budgetEffect:-2e6,efficacyEffect:0,safetyEffect:5,outcomeText:"Enrollment targets met ahead of schedule with high-quality participants."},{text:"Expand recruitment sites",budgetEffect:-8e5,efficacyEffect:-5,safetyEffect:0,outcomeText:"More sites added but data consistency slightly reduced."}],isPhaseComplete:t.efficacy>=50&&t.safety>=65},"Phase II Clinical Trial":{title:"Efficacy Data Review",description:"Mid-trial analysis shows the drug is effective in most patients, but a specific demographic shows reduced response.",choices:[{text:"Focus on responsive group",budgetEffect:-5e5,efficacyEffect:15,safetyEffect:5,outcomeText:"Refined targeting significantly improved overall efficacy metrics."},{text:"Broaden study population",budgetEffect:-3e6,efficacyEffect:-5,safetyEffect:0,outcomeText:"Inclusive approach yielded average results but broader applicability data."}],isPhaseComplete:t.efficacy>=70&&t.safety>=75},"Phase III & FDA Review":{title:"FDA Pre-Submission Meeting",description:"The FDA has reviewed your pre-submission package and has questions about long-term safety data.",choices:[{text:"Conduct extended follow-up",budgetEffect:-4e6,efficacyEffect:5,safetyEffect:15,outcomeText:"Extended data collection satisfied FDA concerns. Approval pathway cleared."},{text:"Submit current data with justification",budgetEffect:-5e5,efficacyEffect:0,safetyEffect:-5,outcomeText:"FDA accepted with conditions. Post-market surveillance required."}],isPhaseComplete:t.efficacy>=80&&t.safety>=80}};return a[e]||a.Preclinical}}],76480)},38286,e=>{e.v({achieveIcon:"Trials-module__6vxRjW__achieveIcon",achieveInfo:"Trials-module__6vxRjW__achieveInfo",achieveLabel:"Trials-module__6vxRjW__achieveLabel",achieveSlide:"Trials-module__6vxRjW__achieveSlide",achieveTitle:"Trials-module__6vxRjW__achieveTitle",achievementUnlock:"Trials-module__6vxRjW__achievementUnlock",backBtn:"Trials-module__6vxRjW__backBtn",badge:"Trials-module__6vxRjW__badge",btnGhost:"Trials-module__6vxRjW__btnGhost",btnPrimary:"Trials-module__6vxRjW__btnPrimary",btnRetry:"Trials-module__6vxRjW__btnRetry",btnSecondary:"Trials-module__6vxRjW__btnSecondary",btnVictory:"Trials-module__6vxRjW__btnVictory",card:"Trials-module__6vxRjW__card",choiceBtn:"Trials-module__6vxRjW__choiceBtn",choiceEffect:"Trials-module__6vxRjW__choiceEffect",choiceText:"Trials-module__6vxRjW__choiceText",choices:"Trials-module__6vxRjW__choices",completed:"Trials-module__6vxRjW__completed",container:"Trials-module__6vxRjW__container",dashboardArea:"Trials-module__6vxRjW__dashboardArea",dashboardHeader:"Trials-module__6vxRjW__dashboardHeader",emptyActions:"Trials-module__6vxRjW__emptyActions",emptyIcon:"Trials-module__6vxRjW__emptyIcon",emptyState:"Trials-module__6vxRjW__emptyState",eventDesc:"Trials-module__6vxRjW__eventDesc",fadeIn:"Trials-module__6vxRjW__fadeIn",failed:"Trials-module__6vxRjW__failed",gameArea:"Trials-module__6vxRjW__gameArea",gameoverActions:"Trials-module__6vxRjW__gameoverActions",gameoverCard:"Trials-module__6vxRjW__gameoverCard",gameoverFadeIn:"Trials-module__6vxRjW__gameoverFadeIn",gameoverIcon:"Trials-module__6vxRjW__gameoverIcon",gameoverOverlay:"Trials-module__6vxRjW__gameoverOverlay",gameoverReason:"Trials-module__6vxRjW__gameoverReason",gameoverShake:"Trials-module__6vxRjW__gameoverShake",gameoverStat:"Trials-module__6vxRjW__gameoverStat",gameoverStatLabel:"Trials-module__6vxRjW__gameoverStatLabel",gameoverStatValue:"Trials-module__6vxRjW__gameoverStatValue",gameoverStats:"Trials-module__6vxRjW__gameoverStats",gameoverTip:"Trials-module__6vxRjW__gameoverTip",gameoverTitle:"Trials-module__6vxRjW__gameoverTitle",in_progress:"Trials-module__6vxRjW__in_progress",loadingState:"Trials-module__6vxRjW__loadingState",logConsole:"Trials-module__6vxRjW__logConsole",logItem:"Trials-module__6vxRjW__logItem",logList:"Trials-module__6vxRjW__logList",logTitle:"Trials-module__6vxRjW__logTitle",lossCard:"Trials-module__6vxRjW__lossCard",mainStage:"Trials-module__6vxRjW__mainStage",moleculeIcon:"Trials-module__6vxRjW__moleculeIcon",particleFall:"Trials-module__6vxRjW__particleFall",pending:"Trials-module__6vxRjW__pending",phaseActivities:"Trials-module__6vxRjW__phaseActivities",phaseBadge:"Trials-module__6vxRjW__phaseBadge",phaseContent:"Trials-module__6vxRjW__phaseContent",phaseDuration:"Trials-module__6vxRjW__phaseDuration",phaseItem:"Trials-module__6vxRjW__phaseItem",phaseNumber:"Trials-module__6vxRjW__phaseNumber",phaseRisk:"Trials-module__6vxRjW__phaseRisk",phasesTimeline:"Trials-module__6vxRjW__phasesTimeline",probBar:"Trials-module__6vxRjW__probBar",probFill:"Trials-module__6vxRjW__probFill",probValue:"Trials-module__6vxRjW__probValue",proceedBtn:"Trials-module__6vxRjW__proceedBtn",reason:"Trials-module__6vxRjW__reason",roadmapArea:"Trials-module__6vxRjW__roadmapArea",roadmapHeader:"Trials-module__6vxRjW__roadmapHeader",roadmapSummary:"Trials-module__6vxRjW__roadmapSummary",slideUp:"Trials-module__6vxRjW__slideUp",spin:"Trials-module__6vxRjW__spin",spinner:"Trials-module__6vxRjW__spinner",statBarContainer:"Trials-module__6vxRjW__statBarContainer",statBarFill:"Trials-module__6vxRjW__statBarFill",statItem:"Trials-module__6vxRjW__statItem",statLabel:"Trials-module__6vxRjW__statLabel",statValue:"Trials-module__6vxRjW__statValue",statValueSm:"Trials-module__6vxRjW__statValueSm",statsBar:"Trials-module__6vxRjW__statsBar",successProb:"Trials-module__6vxRjW__successProb",trialCard:"Trials-module__6vxRjW__trialCard",trialImage:"Trials-module__6vxRjW__trialImage",trialInfo:"Trials-module__6vxRjW__trialInfo",trialMission:"Trials-module__6vxRjW__trialMission",trialStats:"Trials-module__6vxRjW__trialStats",trialStatus:"Trials-module__6vxRjW__trialStatus",trialsGrid:"Trials-module__6vxRjW__trialsGrid",victoryActions:"Trials-module__6vxRjW__victoryActions",victoryBounce:"Trials-module__6vxRjW__victoryBounce",victoryCard:"Trials-module__6vxRjW__victoryCard",victoryCardPop:"Trials-module__6vxRjW__victoryCardPop",victoryFadeIn:"Trials-module__6vxRjW__victoryFadeIn",victoryIcon:"Trials-module__6vxRjW__victoryIcon",victoryOverlay:"Trials-module__6vxRjW__victoryOverlay",victoryParticle:"Trials-module__6vxRjW__victoryParticle",victoryParticles:"Trials-module__6vxRjW__victoryParticles",victoryStat:"Trials-module__6vxRjW__victoryStat",victoryStatLabel:"Trials-module__6vxRjW__victoryStatLabel",victoryStatValue:"Trials-module__6vxRjW__victoryStatValue",victoryStats:"Trials-module__6vxRjW__victoryStats",victorySubtitle:"Trials-module__6vxRjW__victorySubtitle",victoryTitle:"Trials-module__6vxRjW__victoryTitle",winCard:"Trials-module__6vxRjW__winCard",xpBadge:"Trials-module__6vxRjW__xpBadge",xpPulse:"Trials-module__6vxRjW__xpPulse",xpReward:"Trials-module__6vxRjW__xpReward"})},44031,e=>{"use strict";var t=e.i(43476),a=e.i(71645),i=e.i(38286),r=e.i(49474),s=e.i(32341),o=e.i(10272),l=e.i(28783),n=e.i(81472),c=e.i(18566),d=e.i(72205),u=e.i(76480);function m(){let{user:e,profile:m,refreshProfile:p}=(0,s.useAuth)(),f=(0,c.useRouter)(),[h,g]=(0,a.useState)("dashboard"),[v,_]=(0,a.useState)([]),[y,x]=(0,a.useState)(null),[b,j]=(0,a.useState)(!1),[S,T]=(0,a.useState)(!0),[N,R]=(0,a.useState)(l.SYLLABUS_DATA[0]),[C,I]=(0,a.useState)(0),[W,A]=(0,a.useState)(null),[w,E]=(0,a.useState)(!1),[P,k]=(0,a.useState)({budget:1e7,efficacy:0,safety:100}),[D,B]=(0,a.useState)([]),[F,H]=(0,a.useState)([]),[L,O]=(0,a.useState)("intro"),[M,$]=(0,a.useState)(""),[z,U]=(0,a.useState)([]),[V,q]=(0,a.useState)(0),[G,Y]=(0,a.useState)([]),[X,K]=(0,a.useState)(!1),[Q,J]=(0,a.useState)([]),[Z,ee]=(0,a.useState)(0),[et,ea]=(0,a.useState)(0),[ei,er]=(0,a.useState)(!1),[es,eo]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{e&&(T(!0),_(await d.TrialService.getSubmissions(e.uid)),T(!1))})()},[e]);let el=(0,a.useCallback)(async e=>{if(x(e),g("roadmap"),R(l.SYLLABUS_DATA.find(t=>t.level===e.missionId)||l.SYLLABUS_DATA[0]),e.roadmap)return void k({budget:e.simulationState?.budget||1e7,efficacy:e.simulationState?.efficacy||e.stats.efficacy,safety:e.simulationState?.safety||e.stats.safety});j(!0);let t=await u.AiService.generateTrialRoadmap(e.moleculeName,e.stats.efficacy,e.stats.safety);await d.TrialService.saveRoadmap(e.id,t);let a={...t,generatedAt:Date.now()};x({...e,roadmap:a}),k({budget:1e7,efficacy:e.stats.efficacy,safety:e.stats.safety}),j(!1)},[]);(0,a.useEffect)(()=>{if(S||!e||0===v.length||y)return;let t=localStorage.getItem("active_trial_id");if(!t)return;let a=v.find(e=>e.id===t);a&&(localStorage.removeItem("active_trial_id"),el(a))},[S,e,v,y,el]);let en=async()=>{if(!y?.roadmap)return;g("simulation");let e=y.simulationState;if(e&&e.cachedEvents&&e.cachedEvents.length>0){O("playing"),I(e.currentPhaseIndex||0),q(e.eventIndex||0),k({budget:e.budget,efficacy:e.efficacy,safety:e.safety}),B(e.logs||[]),H(e.previousEvents||[]),U(e.cachedEvents);let t=e.eventIndex||0;t<e.cachedEvents.length&&A(e.cachedEvents[t])}else O("intro"),I(0),q(0),H([]),U([]),B([`Trial initialized for ${y.moleculeName}.`,"Starting budget: $10.0M"])},ec=async()=>{if(y?.roadmap)if(O("playing"),0===G.length){K(!0),E(!0);try{let e="";if(y.chemicalStats){let t=y.chemicalStats,a=t.functionalGroups?.join(", ")||"None",i=t.warnings?.join("; ")||"None",r=(t.bonds?.aromatic||0)>0?"Contains Aromatic System":"Non-aromatic";e=`
                        Formula: ${t.formula}
                        Molecular Weight: ${t.molecularWeight}
                        Key Functional Groups: ${a}
                        Structure Type: ${r}
                        Chemical Warnings: ${i}
                    `.trim()}let t=y.roadmap.phases.map((t,a)=>u.AiService.generatePhaseScenarios(y.moleculeName,t.name,t.description,e).then(e=>e.map(e=>({...e,phaseIndex:a})))),a=(await Promise.all(t)).flat();if(0===a.length&&console.error("AI failed to generate any events. Using fallback."),Y(a),a.length>0){let e=a[0];A(e);let t=[...z,e];U(t),await d.TrialService.updateSimulationState(y.id,{currentPhaseIndex:0,eventIndex:0,budget:P.budget,efficacy:P.efficacy,safety:P.safety,previousEvents:[],logs:D,cachedEvents:t})}}catch(e){console.error("Failed to generate simulation scenario:",e)}finally{K(!1),E(!1)}}else await ed()},ed=async()=>{if(!y?.roadmap)return;let e=V+1;if(e<G.length){let t=G[e];A(t),q(e),t.phaseIndex!==C&&I(t.phaseIndex||C);let a=[...z,t];U(a),await d.TrialService.updateSimulationState(y.id,{currentPhaseIndex:t.phaseIndex||C,eventIndex:e,budget:P.budget,efficacy:P.efficacy,safety:P.safety,logs:D,previousEvents:F,cachedEvents:a})}else ep()},eu=async e=>{if(!W||!y)return;let t=W.choices[e],a={budget:P.budget+t.budgetEffect,efficacy:Math.min(100,Math.max(0,P.efficacy+t.efficacyEffect)),safety:Math.min(100,Math.max(0,P.safety+t.safetyEffect))};k(a);let i=[`${y.roadmap?.phases[C].name}: ${t.outcomeText}`,...D];B(i);let r=[...F,W.title];H(r);let s=V+1;(q(s),await d.TrialService.updateSimulationState(y.id,{currentPhaseIndex:C,eventIndex:s,budget:a.budget,efficacy:a.efficacy,safety:a.safety,logs:i,previousEvents:r,cachedEvents:z}),a.budget<=0)?ef("Bankrupt! The lab ran out of funds."):a.safety<=20?ef("Trial Halted! Safety concerns became critical."):W.isPhaseComplete?em():await ed()},em=async()=>{if(y?.roadmap)if(C<y.roadmap.phases.length-1){let e=C+1;I(e),B(t=>[`--- Entered ${y.roadmap.phases[e].name} ---`,...t]),await ed()}else ep()},ep=async()=>{O("victory"),e&&y&&(await d.TrialService.updateSubmission(y.id,{status:"completed"}),await o.UserService.addXP(e.uid,200),await o.UserService.unlockAchievement(e.uid,{id:"trial_master",title:"Trial Master",description:"Successfully guided a drug to market.",icon:"üíä"}),p())},ef=async t=>{$(t),O("gameover"),e&&y&&(await d.TrialService.updateSubmission(y.id,{status:"failed"}),await o.UserService.addXP(e.uid,50),p())},eh=async t=>{let a=t===Q[Z].correctIndex;if(a&&ea(e=>e+1),Z<Q.length-1)ee(e=>e+1);else{let t=et+ +!!a;er(!0),t>=3&&e?(await o.UserService.addXP(e.uid,1e3),await p(),eo({passed:!0,msg:`Congratulations! You have mastered Semester ${N.level}.`})):eo({passed:!1,msg:"You failed the Semester Exam. Review the notes and try again."})}},eg=async()=>{g("dashboard"),x(null),O("intro"),I(0),A(null),e&&_(await d.TrialService.getSubmissions(e.uid))};if("dashboard"===h)return(0,t.jsxs)("div",{className:i.default.container,children:[(0,t.jsx)(r.default,{title:"Clinical Trials",subtitle:"Your Drug Development Pipeline"}),(0,t.jsx)("div",{className:i.default.dashboardArea,children:S?(0,t.jsxs)("div",{className:i.default.loadingState,children:[(0,t.jsx)("div",{className:i.default.spinner}),(0,t.jsx)("p",{children:"Loading your trials..."})]}):0===v.length?(0,t.jsxs)("div",{className:i.default.emptyState,children:[(0,t.jsx)("div",{className:i.default.emptyIcon,children:"üß™"}),(0,t.jsx)("h2",{children:"No Trials Yet"}),(0,t.jsx)("p",{children:"First create a new simulation or build your own molecule in the lab, then submit it for clinical trials."}),(0,t.jsxs)("div",{className:i.default.emptyActions,children:[(0,t.jsx)("button",{className:i.default.btnPrimary,onClick:()=>f.push("/dashboard/builder"),children:"üî¨ Build My Own"}),(0,t.jsx)("button",{className:i.default.btnSecondary,children:"üé≤ New Simulation"})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:i.default.dashboardHeader,children:[(0,t.jsxs)("h2",{children:["Your Trials (",v.length,")"]}),(0,t.jsx)("button",{className:i.default.btnPrimary,onClick:()=>f.push("/dashboard/builder"),children:"+ New Molecule"})]}),(0,t.jsx)("div",{className:i.default.trialsGrid,children:v.map(e=>(0,t.jsxs)("div",{className:i.default.trialCard,onClick:()=>el(e),children:[(0,t.jsx)("div",{className:i.default.trialImage,style:{background:e.generatedImageUrl?`url(${e.generatedImageUrl}) center/cover`:"linear-gradient(135deg, #1e3a5f 0%, #0d1b2a 100%)"},children:!e.generatedImageUrl&&(0,t.jsx)("div",{className:i.default.moleculeIcon,children:"üß¨"})}),(0,t.jsxs)("div",{className:i.default.trialInfo,children:[(0,t.jsx)("h3",{children:e.moleculeName}),(0,t.jsx)("p",{className:i.default.trialMission,children:e.missionTitle}),(0,t.jsxs)("div",{className:i.default.trialStats,children:[(0,t.jsxs)("span",{children:["Eff: ",e.stats.efficacy,"%"]}),(0,t.jsxs)("span",{children:["Safe: ",e.stats.safety,"%"]})]}),(0,t.jsxs)("div",{className:`${i.default.trialStatus} ${i.default[e.status]}`,children:["pending"===e.status&&"‚è≥ Pending","in_progress"===e.status&&"üîÑ In Progress","completed"===e.status&&"‚úÖ Completed","failed"===e.status&&"‚ùå Failed"]})]})]},e.id))})]})})]});if("roadmap"===h){let e=y?.roadmap;return(0,t.jsxs)("div",{className:i.default.container,children:[(0,t.jsx)(r.default,{title:y?.moleculeName||"Trial Roadmap",subtitle:"Clinical Development Pathway"}),(0,t.jsxs)("div",{className:i.default.roadmapArea,children:[(0,t.jsx)("button",{className:i.default.backBtn,onClick:eg,children:"‚Üê Back to Dashboard"}),b?(0,t.jsxs)("div",{className:i.default.loadingState,children:[(0,t.jsx)("div",{className:i.default.spinner}),(0,t.jsx)("p",{children:"Generating trial roadmap with AI..."})]}):e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:i.default.roadmapHeader,children:[(0,t.jsxs)("div",{className:i.default.roadmapSummary,children:[(0,t.jsx)("h2",{children:"Trial Overview"}),(0,t.jsx)("p",{children:e.summary}),(0,t.jsxs)("div",{className:i.default.successProb,children:[(0,t.jsx)("span",{children:"Success Probability:"}),(0,t.jsx)("div",{className:i.default.probBar,children:(0,t.jsx)("div",{className:i.default.probFill,style:{width:`${e.successProbability}%`}})}),(0,t.jsxs)("span",{className:i.default.probValue,children:[e.successProbability,"%"]})]})]}),(0,t.jsx)("button",{className:i.default.proceedBtn,onClick:en,children:"‚ñ∂ Proceed to Trial Simulation"})]}),(0,t.jsx)("div",{className:i.default.phasesTimeline,children:e.phases.map((e,a)=>(0,t.jsxs)("div",{className:i.default.phaseItem,children:[(0,t.jsx)("div",{className:i.default.phaseNumber,children:a+1}),(0,t.jsxs)("div",{className:i.default.phaseContent,children:[(0,t.jsx)("h3",{children:e.name}),(0,t.jsx)("span",{className:i.default.phaseDuration,children:e.duration}),(0,t.jsx)("p",{children:e.description}),(0,t.jsxs)("div",{className:i.default.phaseActivities,children:[(0,t.jsx)("strong",{children:"Key Activities:"}),(0,t.jsx)("ul",{children:e.keyActivities.map((e,a)=>(0,t.jsx)("li",{children:e},a))})]}),(0,t.jsxs)("div",{className:i.default.phaseRisk,children:["‚ö†Ô∏è ",(0,t.jsx)("strong",{children:"Risk:"})," ",e.risks]})]})]},a))})]}):(0,t.jsx)("p",{children:"Failed to load roadmap data."})]})]})}return"quiz"===h?(0,t.jsxs)("div",{className:i.default.container,children:[(0,t.jsx)(r.default,{title:"Semester Exam",subtitle:`${N.semester}: ${N.title}`}),(0,t.jsx)("div",{className:i.default.gameArea,children:(0,t.jsx)("div",{className:i.default.mainStage,children:ei?(0,t.jsxs)("div",{className:i.default.card,children:[(0,t.jsx)("h1",{children:es?.passed?"üéì SEMESTER PASSED!":"‚ùå EXAM FAILED"}),(0,t.jsx)("p",{style:{fontSize:"1.1rem"},children:es?.msg}),(0,t.jsxs)("div",{style:{margin:"20px 0",fontSize:"2rem"},children:["Score: ",et," / ",Q.length]}),es?.passed&&(0,t.jsxs)("div",{style:{background:"#064e3b",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:[(0,t.jsx)("strong",{children:"‚≠ê REWARDS:"}),(0,t.jsx)("br",{}),"+1000 XP (Level Up!)",(0,t.jsx)("br",{}),"Next Semester Unlocked"]}),(0,t.jsx)("button",{className:i.default.btnSecondary,onClick:eg,children:"Return to Trials"})]}):(0,t.jsxs)("div",{className:i.default.card,children:[(0,t.jsxs)("div",{className:i.default.phaseBadge,style:{background:"#f59e0b"},children:["Semester ",N.level," Exam"]}),(0,t.jsxs)("h3",{children:["Question ",Z+1," / ",Q.length]}),(0,t.jsx)("p",{style:{fontSize:"1.2rem",fontWeight:500,margin:"20px 0"},children:Q[Z]?.text}),(0,t.jsx)("div",{className:i.default.choices,children:Q[Z]?.options.map((e,a)=>(0,t.jsx)("button",{className:i.default.choiceBtn,onClick:()=>eh(a),children:e},a))})]})})})]}):(0,t.jsxs)("div",{className:i.default.container,children:[(0,t.jsx)(r.default,{title:"Clinical Trial Simulator",subtitle:y?.roadmap?.phases[C]?.name||"Loading..."}),(0,t.jsxs)("div",{className:i.default.gameArea,children:[(0,t.jsxs)("div",{className:i.default.statsBar,children:[(0,t.jsxs)("div",{className:i.default.statItem,children:[(0,t.jsx)("div",{className:i.default.statLabel,children:"Budget"}),(0,t.jsxs)("div",{className:i.default.statValue,style:{color:P.budget<2e6?"#ef4444":"#10b981"},children:["$",(P.budget/1e6).toFixed(1),"M"]})]}),(0,t.jsxs)("div",{className:i.default.statItem,children:[(0,t.jsx)("div",{className:i.default.statLabel,children:"Efficacy"}),(0,t.jsx)("div",{className:i.default.statBarContainer,children:(0,t.jsx)("div",{className:i.default.statBarFill,style:{width:`${P.efficacy}%`,background:"#3b82f6"}})}),(0,t.jsxs)("div",{className:i.default.statValueSm,children:[P.efficacy,"%"]})]}),(0,t.jsxs)("div",{className:i.default.statItem,children:[(0,t.jsx)("div",{className:i.default.statLabel,children:"Safety"}),(0,t.jsx)("div",{className:i.default.statBarContainer,children:(0,t.jsx)("div",{className:i.default.statBarFill,style:{width:`${P.safety}%`,background:P.safety<50?"#ef4444":"#10b981"}})}),(0,t.jsxs)("div",{className:i.default.statValueSm,children:[P.safety,"%"]})]})]}),y?.chemicalStats&&(0,t.jsx)("div",{style:{margin:"0 20px 20px 20px",padding:"12px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)",fontSize:"0.9rem"},children:(0,t.jsxs)("div",{style:{display:"flex",gap:"15px",flexWrap:"wrap",alignItems:"center"},children:[(0,t.jsx)("strong",{style:{color:"#9ca3af",fontSize:"0.8rem",letterSpacing:"1px"},children:"MICRO-STRUCTURE:"}),(0,t.jsx)("span",{style:{color:"#e5e7eb",fontFamily:"monospace"},children:y.chemicalStats.formula}),(0,t.jsx)("span",{style:{color:"#6b7280"},children:"|"}),(0,t.jsxs)("span",{style:{color:"#e5e7eb"},children:[y.chemicalStats.molecularWeight," Da"]}),y.chemicalStats.functionalGroups?.map((e,a)=>(0,t.jsx)("span",{style:{background:"rgba(59, 130, 246, 0.2)",color:"#93c5fd",padding:"2px 8px",borderRadius:"4px",fontSize:"0.8rem"},children:e},a)),(y.chemicalStats.warnings?.length??0)>0&&(0,t.jsxs)("span",{style:{background:"rgba(239, 68, 68, 0.2)",color:"#fca5a5",padding:"2px 8px",borderRadius:"4px",fontSize:"0.8rem",marginLeft:"auto",display:"flex",alignItems:"center",gap:"4px"},children:["‚ö†Ô∏è ",y.chemicalStats.warnings?.length," Structural Warnings"]})]})}),(0,t.jsxs)("div",{className:i.default.mainStage,children:["intro"===L&&(0,t.jsxs)("div",{className:i.default.card,children:[(0,t.jsxs)("h1",{children:["üß™ ",y?.moleculeName]}),(0,t.jsx)("div",{className:i.default.badge,style:{background:"#8b5cf6",width:"fit-content"},children:"AI-Powered Clinical Trial"}),(0,t.jsxs)("p",{style:{margin:"20px 0"},children:[(0,t.jsx)("strong",{children:"Objective:"})," Navigate through ",y?.roadmap?.phases.length||4," clinical trial phases.",(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),"Each decision will be generated by AI based on your molecule's characteristics and current progress."]}),(0,t.jsx)("button",{className:i.default.btnPrimary,onClick:ec,children:"Begin Trial üöÄ"})]}),"playing"===L&&(0,t.jsx)(t.Fragment,{children:X||w?(0,t.jsxs)("div",{className:i.default.loadingState,children:[(0,t.jsx)("div",{className:i.default.spinner}),(0,t.jsx)("p",{children:X?"Generating Full Trial Scenarios...":"Loading..."}),X&&(0,t.jsx)("p",{style:{fontSize:"0.8rem",color:"#9ca3af",marginTop:"10px"},children:"Creating events for all 4 phases..."})]}):W?(0,t.jsxs)("div",{className:i.default.card,style:{borderColor:"#3b82f6"},children:[(0,t.jsx)("div",{className:i.default.phaseBadge,children:y?.roadmap?.phases[C]?.name}),(0,t.jsx)("h2",{children:W.title}),(0,t.jsx)("p",{className:i.default.eventDesc,children:W.description}),(0,t.jsx)("div",{className:i.default.choices,children:W.choices.map((e,a)=>(0,t.jsxs)("button",{className:i.default.choiceBtn,onClick:()=>eu(a),children:[(0,t.jsx)("div",{className:i.default.choiceText,children:e.text}),(0,t.jsxs)("div",{className:i.default.choiceEffect,children:[e.budgetEffect<0?`-$${Math.abs(e.budgetEffect/1e6).toFixed(1)}M`:"",0!==e.efficacyEffect?` Eff ${e.efficacyEffect>0?"+":""}${e.efficacyEffect}`:"",0!==e.safetyEffect?` Safe ${e.safetyEffect>0?"+":""}${e.safetyEffect}`:""]})]},a))})]}):(0,t.jsx)("div",{className:i.default.card,children:(0,t.jsx)("p",{children:"Loading event..."})})}),"victory"===L&&(0,t.jsxs)("div",{className:i.default.victoryOverlay,children:[(0,t.jsx)("div",{className:i.default.victoryParticles,children:Array.from({length:30}).map((e,a)=>(0,t.jsx)("div",{className:i.default.victoryParticle,style:{left:`${100*Math.random()}%`,background:["#10b981","#34d399","#6ee7b7","#fbbf24","#a78bfa","#60a5fa"][a%6],width:`${4+8*Math.random()}px`,height:`${4+8*Math.random()}px`,animationDuration:`${2+4*Math.random()}s`,animationDelay:`${3*Math.random()}s`}},a))}),(0,t.jsxs)("div",{className:i.default.victoryCard,children:[(0,t.jsx)("span",{className:i.default.victoryIcon,children:"üéâ"}),(0,t.jsx)("h1",{className:i.default.victoryTitle,children:"FDA APPROVED!"}),(0,t.jsxs)("p",{className:i.default.victorySubtitle,children:["Excellent work, Doctor! Your drug ",(0,t.jsx)("strong",{children:y?.moleculeName})," has passed all clinical trial phases and is cleared for market distribution."]}),(0,t.jsxs)("div",{className:i.default.victoryStats,children:[(0,t.jsxs)("div",{className:i.default.victoryStat,children:[(0,t.jsxs)("span",{className:i.default.victoryStatValue,style:{color:"#10b981"},children:["$",(P.budget/1e6).toFixed(1),"M"]}),(0,t.jsx)("span",{className:i.default.victoryStatLabel,children:"Budget Left"})]}),(0,t.jsxs)("div",{className:i.default.victoryStat,children:[(0,t.jsxs)("span",{className:i.default.victoryStatValue,style:{color:"#60a5fa"},children:[P.efficacy,"%"]}),(0,t.jsx)("span",{className:i.default.victoryStatLabel,children:"Efficacy"})]}),(0,t.jsxs)("div",{className:i.default.victoryStat,children:[(0,t.jsxs)("span",{className:i.default.victoryStatValue,style:{color:"#a78bfa"},children:[P.safety,"%"]}),(0,t.jsx)("span",{className:i.default.victoryStatLabel,children:"Safety"})]})]}),(0,t.jsx)("div",{className:i.default.xpBadge,children:"‚≠ê +200 XP Earned"}),(0,t.jsxs)("div",{className:i.default.achievementUnlock,children:[(0,t.jsx)("span",{className:i.default.achieveIcon,children:"üíä"}),(0,t.jsxs)("div",{className:i.default.achieveInfo,children:[(0,t.jsx)("div",{className:i.default.achieveLabel,children:"Achievement Unlocked"}),(0,t.jsx)("div",{className:i.default.achieveTitle,children:"Trial Master"})]})]}),(0,t.jsxs)("p",{style:{color:"#9ca3af",marginBottom:"24px",fontSize:"0.95rem"},children:["To complete ",(0,t.jsxs)("strong",{style:{color:"#fff"},children:["Semester ",N.level]}),", pass the final exam."]}),(0,t.jsx)("div",{className:i.default.victoryActions,children:(0,t.jsx)("button",{className:i.default.btnVictory,onClick:()=>{J((0,n.getQuestionsForLevel)(N.level,5)),g("quiz"),er(!1),ea(0),ee(0)},children:"Take Semester Exam üìù"})})]})]}),"gameover"===L&&(0,t.jsx)("div",{className:i.default.gameoverOverlay,children:(0,t.jsxs)("div",{className:i.default.gameoverCard,children:[(0,t.jsx)("span",{className:i.default.gameoverIcon,children:"üö´"}),(0,t.jsx)("h1",{className:i.default.gameoverTitle,children:"Trial Terminated"}),(0,t.jsx)("div",{className:i.default.gameoverReason,children:M}),(0,t.jsxs)("div",{className:i.default.gameoverStats,children:[(0,t.jsxs)("div",{className:i.default.gameoverStat,children:[(0,t.jsxs)("span",{className:i.default.gameoverStatValue,style:{color:P.budget<=0?"#ef4444":"#10b981"},children:["$",(P.budget/1e6).toFixed(1),"M"]}),(0,t.jsx)("span",{className:i.default.gameoverStatLabel,children:"Budget"})]}),(0,t.jsxs)("div",{className:i.default.gameoverStat,children:[(0,t.jsxs)("span",{className:i.default.gameoverStatValue,style:{color:"#60a5fa"},children:[P.efficacy,"%"]}),(0,t.jsx)("span",{className:i.default.gameoverStatLabel,children:"Efficacy"})]}),(0,t.jsxs)("div",{className:i.default.gameoverStat,children:[(0,t.jsxs)("span",{className:i.default.gameoverStatValue,style:{color:P.safety<=20?"#ef4444":"#a78bfa"},children:[P.safety,"%"]}),(0,t.jsx)("span",{className:i.default.gameoverStatLabel,children:"Safety"})]})]}),(0,t.jsx)("p",{className:i.default.gameoverTip,children:"üí° Tip: Balance cost-cutting with safety. Cutting too many corners leads to trial termination."}),(0,t.jsxs)("div",{className:i.default.gameoverActions,children:[(0,t.jsx)("button",{className:i.default.btnRetry,onClick:()=>{Y([]),q(-1),U([]),O("intro"),ec()},children:"üîÅ Retry Trial"}),(0,t.jsx)("button",{className:i.default.btnGhost,onClick:eg,children:"Return to Dashboard"})]})]})})]}),(0,t.jsxs)("div",{className:i.default.logConsole,children:[(0,t.jsx)("div",{className:i.default.logTitle,children:"Activity Log"}),(0,t.jsx)("div",{className:i.default.logList,children:D.map((e,a)=>(0,t.jsxs)("div",{className:i.default.logItem,children:["> ",e]},a))})]})]})]})}e.s(["default",()=>m])}]);