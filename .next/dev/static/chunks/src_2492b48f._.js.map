{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/layout/TopHeader.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"actions\": \"TopHeader-module__TNE3sW__actions\",\n  \"header\": \"TopHeader-module__TNE3sW__header\",\n  \"iconBtn\": \"TopHeader-module__TNE3sW__iconBtn\",\n  \"primaryBtn\": \"TopHeader-module__TNE3sW__primaryBtn\",\n  \"subtitle\": \"TopHeader-module__TNE3sW__subtitle\",\n  \"title\": \"TopHeader-module__TNE3sW__title\",\n  \"titleSection\": \"TopHeader-module__TNE3sW__titleSection\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khana/OneDrive/Desktop/PharmaSim/src/components/layout/TopHeader.tsx"],"sourcesContent":["\n'use client';\n\nimport styles from './TopHeader.module.css';\n\ninterface TopHeaderProps {\n    title?: string;\n    subtitle?: string;\n}\n\nexport default function TopHeader({ title = \"Research Lab Dashboard\", subtitle = \"Welcome back, researcher. Your next breakthrough awaits.\" }: TopHeaderProps) {\n    return (\n        <header className={styles.header}>\n            <div className={styles.titleSection}>\n                <h1 className={styles.title}>{title}</h1>\n                <p className={styles.subtitle}>{subtitle}</p>\n            </div>\n\n            <div className={styles.actions}>\n                <button className={styles.iconBtn}>\n                    ðŸ””\n                </button>\n                <button className={styles.primaryBtn}>\n                    <span>+</span> New Simulation\n                </button>\n            </div>\n        </header>\n    );\n}\n"],"names":[],"mappings":";;;;;AAGA;AAFA;;;AASe,SAAS,UAAU,EAAE,QAAQ,wBAAwB,EAAE,WAAW,0DAA0D,EAAkB;IACzJ,qBACI,6LAAC;QAAO,WAAW,kKAAM,CAAC,MAAM;;0BAC5B,6LAAC;gBAAI,WAAW,kKAAM,CAAC,YAAY;;kCAC/B,6LAAC;wBAAG,WAAW,kKAAM,CAAC,KAAK;kCAAG;;;;;;kCAC9B,6LAAC;wBAAE,WAAW,kKAAM,CAAC,QAAQ;kCAAG;;;;;;;;;;;;0BAGpC,6LAAC;gBAAI,WAAW,kKAAM,CAAC,OAAO;;kCAC1B,6LAAC;wBAAO,WAAW,kKAAM,CAAC,OAAO;kCAAE;;;;;;kCAGnC,6LAAC;wBAAO,WAAW,kKAAM,CAAC,UAAU;;0CAChC,6LAAC;0CAAK;;;;;;4BAAQ;;;;;;;;;;;;;;;;;;;AAKlC;KAlBwB"}},
    {"offset": {"line": 104, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/app/dashboard/archive/Archive.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"actions\": \"Archive-module__BMuGwq__actions\",\n  \"badge\": \"Archive-module__BMuGwq__badge\",\n  \"badges\": \"Archive-module__BMuGwq__badges\",\n  \"btnDanger\": \"Archive-module__BMuGwq__btnDanger\",\n  \"btnPrimary\": \"Archive-module__BMuGwq__btnPrimary\",\n  \"btnSecondary\": \"Archive-module__BMuGwq__btnSecondary\",\n  \"card\": \"Archive-module__BMuGwq__card\",\n  \"container\": \"Archive-module__BMuGwq__container\",\n  \"empty\": \"Archive-module__BMuGwq__empty\",\n  \"grid\": \"Archive-module__BMuGwq__grid\",\n  \"meta\": \"Archive-module__BMuGwq__meta\",\n  \"scrollArea\": \"Archive-module__BMuGwq__scrollArea\",\n  \"title\": \"Archive-module__BMuGwq__title\",\n  \"titleRow\": \"Archive-module__BMuGwq__titleRow\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 124, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khana/OneDrive/Desktop/PharmaSim/src/lib/trialService.ts"],"sourcesContent":["/**\n * Trial Service - Manages clinical trial submissions in Firebase\n * Stores trial data including AI-generated roadmaps persistently\n */\n\nimport { db } from './firebase';\nimport { doc, getDoc, setDoc, updateDoc, collection, query, where, getDocs, deleteDoc } from 'firebase/firestore';\n\nexport interface TrialPhaseData {\n    name: string;\n    duration: string;\n    description: string;\n    keyActivities: string[];\n    risks: string;\n}\n\nexport interface RoadmapData {\n    summary: string;\n    phases: TrialPhaseData[];\n    successProbability: number;\n    generatedAt: number;\n}\n\n// Exported types for shared usage across components\nexport interface CachedTrialEvent {\n    phaseIndex?: number;\n    title: string;\n    description: string;\n    choices: Array<{\n        text: string;\n        budgetEffect: number;\n        efficacyEffect: number;\n        safetyEffect: number;\n        outcomeText: string;\n    }>;\n    isPhaseComplete?: boolean;\n}\n\nexport interface SimulationState {\n    currentPhaseIndex: number;\n    eventIndex: number;\n    budget: number;\n    efficacy: number;\n    safety: number;\n    logs: string[];\n    previousEvents: string[];\n    cachedEvents?: CachedTrialEvent[];\n}\n\nexport interface TrialSubmission {\n    id: string;\n    userId: string;\n    moleculeName: string;\n    missionId: number;\n    missionTitle: string;\n    atomCount: number;\n    stats: {\n        efficacy: number;\n        safety: number;\n        stability: number;\n    };\n    chemicalStats?: {\n        formula: string;\n        molecularWeight: number;\n        functionalGroups: string[];\n        bonds?: { single: number; double: number; triple: number; aromatic: number };\n        warnings: string[];\n    };\n    aiAnalysis?: string;\n    imageUrl?: string;\n    generatedImageUrl?: string;\n    roadmap?: RoadmapData;\n    submittedAt: number;\n    status: 'pending' | 'in_progress' | 'completed' | 'failed';\n    simulationState?: SimulationState;\n}\n\nexport const TrialService = {\n    /**\n     * Get all trial submissions for a user from Firebase\n     */\n    async getSubmissions(userId: string): Promise<TrialSubmission[]> {\n        try {\n            const q = query(\n                collection(db, 'trials'),\n                where('userId', '==', userId)\n            );\n            const querySnapshot = await getDocs(q);\n            const submissions = querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() } as TrialSubmission));\n            return submissions.sort((a, b) => (b.submittedAt || 0) - (a.submittedAt || 0));\n        } catch (e) {\n            console.error('Failed to load trial submissions:', e);\n            return [];\n        }\n    },\n\n    /**\n     * Save a new trial submission to Firebase\n     */\n    async saveSubmission(\n        userId: string,\n        submission: Omit<TrialSubmission, 'id' | 'userId' | 'submittedAt' | 'status'>\n    ): Promise<TrialSubmission> {\n        const id = `trial_${Date.now()}_${Math.random().toString(36).slice(2, 8)}`;\n\n        const newSubmission: TrialSubmission = {\n            ...submission,\n            id,\n            userId: userId,\n            submittedAt: Date.now(),\n            status: 'pending'\n        };\n\n        await setDoc(doc(db, 'trials', id), newSubmission);\n        return newSubmission;\n    },\n\n    /**\n     * Update an existing submission (including roadmap)\n     */\n    async updateSubmission(id: string, updates: Partial<TrialSubmission>): Promise<TrialSubmission | null> {\n        try {\n            const docRef = doc(db, 'trials', id);\n            await updateDoc(docRef, updates);\n\n            const docSnap = await getDoc(docRef);\n            if (docSnap.exists()) {\n                return { id: docSnap.id, ...docSnap.data() } as TrialSubmission;\n            }\n            return null;\n        } catch (e) {\n            console.error('Failed to update trial:', e);\n            return null;\n        }\n    },\n\n    /**\n     * Get a single submission by ID\n     */\n    async getSubmission(id: string): Promise<TrialSubmission | null> {\n        try {\n            const docRef = doc(db, 'trials', id);\n            const docSnap = await getDoc(docRef);\n            if (docSnap.exists()) {\n                return { id: docSnap.id, ...docSnap.data() } as TrialSubmission;\n            }\n            return null;\n        } catch (e) {\n            console.error('Failed to get trial:', e);\n            return null;\n        }\n    },\n\n    /**\n     * Delete a submission\n     */\n    async deleteSubmission(id: string): Promise<boolean> {\n        try {\n            await deleteDoc(doc(db, 'trials', id));\n            return true;\n        } catch (e) {\n            console.error('Failed to delete trial:', e);\n            return false;\n        }\n    },\n\n    /**\n     * Save roadmap to a trial\n     */\n    async saveRoadmap(trialId: string, roadmap: Omit<RoadmapData, 'generatedAt'>): Promise<boolean> {\n        try {\n            await updateDoc(doc(db, 'trials', trialId), {\n                roadmap: {\n                    ...roadmap,\n                    generatedAt: Date.now()\n                }\n            });\n            return true;\n        } catch (e) {\n            console.error('Failed to save roadmap:', e);\n            return false;\n        }\n    },\n\n    /**\n     * Update simulation state\n     */\n    async updateSimulationState(\n        trialId: string,\n        state: SimulationState\n    ): Promise<boolean> {\n        try {\n            await updateDoc(doc(db, 'trials', trialId), {\n                simulationState: state,\n                status: 'in_progress'\n            });\n            return true;\n        } catch (e) {\n            console.error('Failed to update simulation state:', e);\n            return false;\n        }\n    }\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 253, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khana/OneDrive/Desktop/PharmaSim/src/app/dashboard/archive/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport TopHeader from '@/components/layout/TopHeader';\nimport styles from './Archive.module.css';\nimport { useAuth } from '@/context/AuthContext';\nimport { TrialService, TrialSubmission } from '@/lib/trialService';\nimport { useRouter } from 'next/navigation';\n\nexport default function ArchivePage() {\n    const { user } = useAuth();\n    const router = useRouter();\n    const [items, setItems] = useState<TrialSubmission[]>([]);\n    const [loading, setLoading] = useState(true);\n\n    const load = async () => {\n        if (!user) return;\n        setLoading(true);\n        const data = await TrialService.getSubmissions(user.uid);\n        setItems(data);\n        setLoading(false);\n    };\n\n    useEffect(() => {\n        load();\n    }, [user]);\n\n    const openInTrials = (trialId: string) => {\n        localStorage.setItem('active_trial_id', trialId);\n        router.push('/dashboard/clinical-trials');\n    };\n\n    const deleteTrial = async (trialId: string) => {\n        const ok = window.confirm('Delete this archived trial? This cannot be undone.');\n        if (!ok) return;\n        await TrialService.deleteSubmission(trialId);\n        await load();\n    };\n\n    return (\n        <div className={styles.container}>\n            <TopHeader title=\"Archive Lab\" subtitle=\"Your saved molecule submissions and trials.\" />\n\n            <div className={styles.scrollArea}>\n                {loading ? (\n                    <div className={styles.empty}>Loading archive...</div>\n                ) : items.length === 0 ? (\n                    <div className={styles.empty}>No submissions yet. Build a molecule to create your first entry.</div>\n                ) : (\n                    <div className={styles.grid}>\n                        {items.map((t) => (\n                            <div key={t.id} className={styles.card}>\n                                <div className={styles.titleRow}>\n                                    <div>\n                                        <div className={styles.title}>{t.moleculeName}</div>\n                                        <div className={styles.meta}>\n                                            Mission: {t.missionTitle} (Lvl {t.missionId})\n                                            <br />\n                                            Atoms: {t.atomCount}\n                                            <br />\n                                            Saved: {new Date(t.submittedAt).toLocaleString()}\n                                        </div>\n                                    </div>\n                                    <div className={styles.badges}>\n                                        <div className={styles.badge}>Efficacy {Math.round(t.stats.efficacy)}%</div>\n                                        <div className={styles.badge}>Safety {Math.round(t.stats.safety)}%</div>\n                                    </div>\n                                </div>\n\n                                <div className={styles.actions}>\n                                    <button type=\"button\" className={styles.btnPrimary} onClick={() => openInTrials(t.id)}>\n                                        Open\n                                    </button>\n                                    <button type=\"button\" className={styles.btnSecondary} onClick={load}>\n                                        Refresh\n                                    </button>\n                                    <button type=\"button\" className={styles.btnDanger} onClick={() => deleteTrial(t.id)}>\n                                        Delete\n                                    </button>\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAPA;;;;;;;AASe,SAAS;;IACpB,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,4IAAO;IACxB,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAoB,EAAE;IACxD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,MAAM,OAAO;QACT,IAAI,CAAC,MAAM;QACX,WAAW;QACX,MAAM,OAAO,MAAM,6IAAY,CAAC,cAAc,CAAC,KAAK,GAAG;QACvD,SAAS;QACT,WAAW;IACf;IAEA,IAAA,0KAAS;iCAAC;YACN;QACJ;gCAAG;QAAC;KAAK;IAET,MAAM,eAAe,CAAC;QAClB,aAAa,OAAO,CAAC,mBAAmB;QACxC,OAAO,IAAI,CAAC;IAChB;IAEA,MAAM,cAAc,OAAO;QACvB,MAAM,KAAK,OAAO,OAAO,CAAC;QAC1B,IAAI,CAAC,IAAI;QACT,MAAM,6IAAY,CAAC,gBAAgB,CAAC;QACpC,MAAM;IACV;IAEA,qBACI,6LAAC;QAAI,WAAW,uKAAM,CAAC,SAAS;;0BAC5B,6LAAC,uJAAS;gBAAC,OAAM;gBAAc,UAAS;;;;;;0BAExC,6LAAC;gBAAI,WAAW,uKAAM,CAAC,UAAU;0BAC5B,wBACG,6LAAC;oBAAI,WAAW,uKAAM,CAAC,KAAK;8BAAE;;;;;2BAC9B,MAAM,MAAM,KAAK,kBACjB,6LAAC;oBAAI,WAAW,uKAAM,CAAC,KAAK;8BAAE;;;;;yCAE9B,6LAAC;oBAAI,WAAW,uKAAM,CAAC,IAAI;8BACtB,MAAM,GAAG,CAAC,CAAC,kBACR,6LAAC;4BAAe,WAAW,uKAAM,CAAC,IAAI;;8CAClC,6LAAC;oCAAI,WAAW,uKAAM,CAAC,QAAQ;;sDAC3B,6LAAC;;8DACG,6LAAC;oDAAI,WAAW,uKAAM,CAAC,KAAK;8DAAG,EAAE,YAAY;;;;;;8DAC7C,6LAAC;oDAAI,WAAW,uKAAM,CAAC,IAAI;;wDAAE;wDACf,EAAE,YAAY;wDAAC;wDAAO,EAAE,SAAS;wDAAC;sEAC5C,6LAAC;;;;;wDAAK;wDACE,EAAE,SAAS;sEACnB,6LAAC;;;;;wDAAK;wDACE,IAAI,KAAK,EAAE,WAAW,EAAE,cAAc;;;;;;;;;;;;;sDAGtD,6LAAC;4CAAI,WAAW,uKAAM,CAAC,MAAM;;8DACzB,6LAAC;oDAAI,WAAW,uKAAM,CAAC,KAAK;;wDAAE;wDAAU,KAAK,KAAK,CAAC,EAAE,KAAK,CAAC,QAAQ;wDAAE;;;;;;;8DACrE,6LAAC;oDAAI,WAAW,uKAAM,CAAC,KAAK;;wDAAE;wDAAQ,KAAK,KAAK,CAAC,EAAE,KAAK,CAAC,MAAM;wDAAE;;;;;;;;;;;;;;;;;;;8CAIzE,6LAAC;oCAAI,WAAW,uKAAM,CAAC,OAAO;;sDAC1B,6LAAC;4CAAO,MAAK;4CAAS,WAAW,uKAAM,CAAC,UAAU;4CAAE,SAAS,IAAM,aAAa,EAAE,EAAE;sDAAG;;;;;;sDAGvF,6LAAC;4CAAO,MAAK;4CAAS,WAAW,uKAAM,CAAC,YAAY;4CAAE,SAAS;sDAAM;;;;;;sDAGrE,6LAAC;4CAAO,MAAK;4CAAS,WAAW,uKAAM,CAAC,SAAS;4CAAE,SAAS,IAAM,YAAY,EAAE,EAAE;sDAAG;;;;;;;;;;;;;2BAzBnF,EAAE,EAAE;;;;;;;;;;;;;;;;;;;;;AAoC1C;GA9EwB;;QACH,4IAAO;QACT,kJAAS;;;KAFJ"}}]
}