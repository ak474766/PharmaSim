{"version":3,"sources":["turbopack:///[project]/src/components/builder/Builder.module.css [app-ssr] (css module)","../../../../node_modules/styled-jsx/dist/index/index.js","../../../../node_modules/styled-jsx/style.js","turbopack:///[project]/src/components/builder/ChemistryReference.module.css [app-ssr] (css module)","../../../../src/app/dashboard/builder/page.tsx","../../../../src/components/builder/Builder.tsx","../../../../src/lib/Molecule3D.ts","../../../../node_modules/three/examples/jsm/controls/OrbitControls.js","../../../../src/lib/chemistry.ts","../../../../src/components/builder/View3D.tsx","../../../../src/lib/validation.ts","../../../../src/lib/smilesParser.ts","../../../../src/components/builder/MissionSelector.tsx","../../../../src/components/builder/ChemistryReference.tsx","../../../../src/lib/imageService.ts"],"sourcesContent":["__turbopack_context__.v({\n  \"active\": \"Builder-module__puRpEa__active\",\n  \"aiFeedback\": \"Builder-module__puRpEa__aiFeedback\",\n  \"btn\": \"Builder-module__puRpEa__btn\",\n  \"btnPrimary\": \"Builder-module__puRpEa__btnPrimary\",\n  \"btnSuccess\": \"Builder-module__puRpEa__btnSuccess\",\n  \"builderContainer\": \"Builder-module__puRpEa__builderContainer\",\n  \"canvasArea\": \"Builder-module__puRpEa__canvasArea\",\n  \"canvasContainer\": \"Builder-module__puRpEa__canvasContainer\",\n  \"canvasHeader\": \"Builder-module__puRpEa__canvasHeader\",\n  \"container\": \"Builder-module__puRpEa__container\",\n  \"controls\": \"Builder-module__puRpEa__controls\",\n  \"elementCard\": \"Builder-module__puRpEa__elementCard\",\n  \"elementList\": \"Builder-module__puRpEa__elementList\",\n  \"elementsGrid\": \"Builder-module__puRpEa__elementsGrid\",\n  \"feedbackStats\": \"Builder-module__puRpEa__feedbackStats\",\n  \"header\": \"Builder-module__puRpEa__header\",\n  \"hintCard\": \"Builder-module__puRpEa__hintCard\",\n  \"hintText\": \"Builder-module__puRpEa__hintText\",\n  \"hintTitle\": \"Builder-module__puRpEa__hintTitle\",\n  \"iconPurple\": \"Builder-module__puRpEa__iconPurple\",\n  \"palette\": \"Builder-module__puRpEa__palette\",\n  \"propBar\": \"Builder-module__puRpEa__propBar\",\n  \"propFill\": \"Builder-module__puRpEa__propFill\",\n  \"propHeader\": \"Builder-module__puRpEa__propHeader\",\n  \"propLabel\": \"Builder-module__puRpEa__propLabel\",\n  \"propSection\": \"Builder-module__puRpEa__propSection\",\n  \"propTags\": \"Builder-module__puRpEa__propTags\",\n  \"propValue\": \"Builder-module__puRpEa__propValue\",\n  \"properties\": \"Builder-module__puRpEa__properties\",\n  \"selected\": \"Builder-module__puRpEa__selected\",\n  \"sidebar\": \"Builder-module__puRpEa__sidebar\",\n  \"statusMsg\": \"Builder-module__puRpEa__statusMsg\",\n  \"tag\": \"Builder-module__puRpEa__tag\",\n});\n","require('client-only');\nvar React = require('react');\n\nfunction _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\nvar React__default = /*#__PURE__*/_interopDefaultLegacy(React);\n\n/*\nBased on Glamor's sheet\nhttps://github.com/threepointone/glamor/blob/667b480d31b3721a905021b26e1290ce92ca2879/src/sheet.js\n*/ function _defineProperties(target, props) {\n    for(var i = 0; i < props.length; i++){\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n    }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n}\nvar isProd = typeof process !== \"undefined\" && process.env && process.env.NODE_ENV === \"production\";\nvar isString = function(o) {\n    return Object.prototype.toString.call(o) === \"[object String]\";\n};\nvar StyleSheet = /*#__PURE__*/ function() {\n    function StyleSheet(param) {\n        var ref = param === void 0 ? {} : param, _name = ref.name, name = _name === void 0 ? \"stylesheet\" : _name, _optimizeForSpeed = ref.optimizeForSpeed, optimizeForSpeed = _optimizeForSpeed === void 0 ? isProd : _optimizeForSpeed;\n        invariant$1(isString(name), \"`name` must be a string\");\n        this._name = name;\n        this._deletedRulePlaceholder = \"#\" + name + \"-deleted-rule____{}\";\n        invariant$1(typeof optimizeForSpeed === \"boolean\", \"`optimizeForSpeed` must be a boolean\");\n        this._optimizeForSpeed = optimizeForSpeed;\n        this._serverSheet = undefined;\n        this._tags = [];\n        this._injected = false;\n        this._rulesCount = 0;\n        var node = typeof window !== \"undefined\" && document.querySelector('meta[property=\"csp-nonce\"]');\n        this._nonce = node ? node.getAttribute(\"content\") : null;\n    }\n    var _proto = StyleSheet.prototype;\n    _proto.setOptimizeForSpeed = function setOptimizeForSpeed(bool) {\n        invariant$1(typeof bool === \"boolean\", \"`setOptimizeForSpeed` accepts a boolean\");\n        invariant$1(this._rulesCount === 0, \"optimizeForSpeed cannot be when rules have already been inserted\");\n        this.flush();\n        this._optimizeForSpeed = bool;\n        this.inject();\n    };\n    _proto.isOptimizeForSpeed = function isOptimizeForSpeed() {\n        return this._optimizeForSpeed;\n    };\n    _proto.inject = function inject() {\n        var _this = this;\n        invariant$1(!this._injected, \"sheet already injected\");\n        this._injected = true;\n        if (typeof window !== \"undefined\" && this._optimizeForSpeed) {\n            this._tags[0] = this.makeStyleTag(this._name);\n            this._optimizeForSpeed = \"insertRule\" in this.getSheet();\n            if (!this._optimizeForSpeed) {\n                if (!isProd) {\n                    console.warn(\"StyleSheet: optimizeForSpeed mode not supported falling back to standard mode.\");\n                }\n                this.flush();\n                this._injected = true;\n            }\n            return;\n        }\n        this._serverSheet = {\n            cssRules: [],\n            insertRule: function(rule, index) {\n                if (typeof index === \"number\") {\n                    _this._serverSheet.cssRules[index] = {\n                        cssText: rule\n                    };\n                } else {\n                    _this._serverSheet.cssRules.push({\n                        cssText: rule\n                    });\n                }\n                return index;\n            },\n            deleteRule: function(index) {\n                _this._serverSheet.cssRules[index] = null;\n            }\n        };\n    };\n    _proto.getSheetForTag = function getSheetForTag(tag) {\n        if (tag.sheet) {\n            return tag.sheet;\n        }\n        // this weirdness brought to you by firefox\n        for(var i = 0; i < document.styleSheets.length; i++){\n            if (document.styleSheets[i].ownerNode === tag) {\n                return document.styleSheets[i];\n            }\n        }\n    };\n    _proto.getSheet = function getSheet() {\n        return this.getSheetForTag(this._tags[this._tags.length - 1]);\n    };\n    _proto.insertRule = function insertRule(rule, index) {\n        invariant$1(isString(rule), \"`insertRule` accepts only strings\");\n        if (typeof window === \"undefined\") {\n            if (typeof index !== \"number\") {\n                index = this._serverSheet.cssRules.length;\n            }\n            this._serverSheet.insertRule(rule, index);\n            return this._rulesCount++;\n        }\n        if (this._optimizeForSpeed) {\n            var sheet = this.getSheet();\n            if (typeof index !== \"number\") {\n                index = sheet.cssRules.length;\n            }\n            // this weirdness for perf, and chrome's weird bug\n            // https://stackoverflow.com/questions/20007992/chrome-suddenly-stopped-accepting-insertrule\n            try {\n                sheet.insertRule(rule, index);\n            } catch (error) {\n                if (!isProd) {\n                    console.warn(\"StyleSheet: illegal rule: \\n\\n\" + rule + \"\\n\\nSee https://stackoverflow.com/q/20007992 for more info\");\n                }\n                return -1;\n            }\n        } else {\n            var insertionPoint = this._tags[index];\n            this._tags.push(this.makeStyleTag(this._name, rule, insertionPoint));\n        }\n        return this._rulesCount++;\n    };\n    _proto.replaceRule = function replaceRule(index, rule) {\n        if (this._optimizeForSpeed || typeof window === \"undefined\") {\n            var sheet = typeof window !== \"undefined\" ? this.getSheet() : this._serverSheet;\n            if (!rule.trim()) {\n                rule = this._deletedRulePlaceholder;\n            }\n            if (!sheet.cssRules[index]) {\n                // @TBD Should we throw an error?\n                return index;\n            }\n            sheet.deleteRule(index);\n            try {\n                sheet.insertRule(rule, index);\n            } catch (error) {\n                if (!isProd) {\n                    console.warn(\"StyleSheet: illegal rule: \\n\\n\" + rule + \"\\n\\nSee https://stackoverflow.com/q/20007992 for more info\");\n                }\n                // In order to preserve the indices we insert a deleteRulePlaceholder\n                sheet.insertRule(this._deletedRulePlaceholder, index);\n            }\n        } else {\n            var tag = this._tags[index];\n            invariant$1(tag, \"old rule at index `\" + index + \"` not found\");\n            tag.textContent = rule;\n        }\n        return index;\n    };\n    _proto.deleteRule = function deleteRule(index) {\n        if (typeof window === \"undefined\") {\n            this._serverSheet.deleteRule(index);\n            return;\n        }\n        if (this._optimizeForSpeed) {\n            this.replaceRule(index, \"\");\n        } else {\n            var tag = this._tags[index];\n            invariant$1(tag, \"rule at index `\" + index + \"` not found\");\n            tag.parentNode.removeChild(tag);\n            this._tags[index] = null;\n        }\n    };\n    _proto.flush = function flush() {\n        this._injected = false;\n        this._rulesCount = 0;\n        if (typeof window !== \"undefined\") {\n            this._tags.forEach(function(tag) {\n                return tag && tag.parentNode.removeChild(tag);\n            });\n            this._tags = [];\n        } else {\n            // simpler on server\n            this._serverSheet.cssRules = [];\n        }\n    };\n    _proto.cssRules = function cssRules() {\n        var _this = this;\n        if (typeof window === \"undefined\") {\n            return this._serverSheet.cssRules;\n        }\n        return this._tags.reduce(function(rules, tag) {\n            if (tag) {\n                rules = rules.concat(Array.prototype.map.call(_this.getSheetForTag(tag).cssRules, function(rule) {\n                    return rule.cssText === _this._deletedRulePlaceholder ? null : rule;\n                }));\n            } else {\n                rules.push(null);\n            }\n            return rules;\n        }, []);\n    };\n    _proto.makeStyleTag = function makeStyleTag(name, cssString, relativeToTag) {\n        if (cssString) {\n            invariant$1(isString(cssString), \"makeStyleTag accepts only strings as second parameter\");\n        }\n        var tag = document.createElement(\"style\");\n        if (this._nonce) tag.setAttribute(\"nonce\", this._nonce);\n        tag.type = \"text/css\";\n        tag.setAttribute(\"data-\" + name, \"\");\n        if (cssString) {\n            tag.appendChild(document.createTextNode(cssString));\n        }\n        var head = document.head || document.getElementsByTagName(\"head\")[0];\n        if (relativeToTag) {\n            head.insertBefore(tag, relativeToTag);\n        } else {\n            head.appendChild(tag);\n        }\n        return tag;\n    };\n    _createClass(StyleSheet, [\n        {\n            key: \"length\",\n            get: function get() {\n                return this._rulesCount;\n            }\n        }\n    ]);\n    return StyleSheet;\n}();\nfunction invariant$1(condition, message) {\n    if (!condition) {\n        throw new Error(\"StyleSheet: \" + message + \".\");\n    }\n}\n\nfunction hash(str) {\n    var _$hash = 5381, i = str.length;\n    while(i){\n        _$hash = _$hash * 33 ^ str.charCodeAt(--i);\n    }\n    /* JavaScript does bitwise operations (like XOR, above) on 32-bit signed\n   * integers. Since we want the results to be always positive, convert the\n   * signed int to an unsigned by doing an unsigned bitshift. */ return _$hash >>> 0;\n}\nvar stringHash = hash;\n\nvar sanitize = function(rule) {\n    return rule.replace(/\\/style/gi, \"\\\\/style\");\n};\nvar cache = {};\n/**\n * computeId\n *\n * Compute and memoize a jsx id from a basedId and optionally props.\n */ function computeId(baseId, props) {\n    if (!props) {\n        return \"jsx-\" + baseId;\n    }\n    var propsToString = String(props);\n    var key = baseId + propsToString;\n    if (!cache[key]) {\n        cache[key] = \"jsx-\" + stringHash(baseId + \"-\" + propsToString);\n    }\n    return cache[key];\n}\n/**\n * computeSelector\n *\n * Compute and memoize dynamic selectors.\n */ function computeSelector(id, css) {\n    var selectoPlaceholderRegexp = /__jsx-style-dynamic-selector/g;\n    // Sanitize SSR-ed CSS.\n    // Client side code doesn't need to be sanitized since we use\n    // document.createTextNode (dev) and the CSSOM api sheet.insertRule (prod).\n    if (typeof window === \"undefined\") {\n        css = sanitize(css);\n    }\n    var idcss = id + css;\n    if (!cache[idcss]) {\n        cache[idcss] = css.replace(selectoPlaceholderRegexp, id);\n    }\n    return cache[idcss];\n}\n\nfunction mapRulesToStyle(cssRules, options) {\n    if (options === void 0) options = {};\n    return cssRules.map(function(args) {\n        var id = args[0];\n        var css = args[1];\n        return /*#__PURE__*/ React__default[\"default\"].createElement(\"style\", {\n            id: \"__\" + id,\n            // Avoid warnings upon render with a key\n            key: \"__\" + id,\n            nonce: options.nonce ? options.nonce : undefined,\n            dangerouslySetInnerHTML: {\n                __html: css\n            }\n        });\n    });\n}\nvar StyleSheetRegistry = /*#__PURE__*/ function() {\n    function StyleSheetRegistry(param) {\n        var ref = param === void 0 ? {} : param, _styleSheet = ref.styleSheet, styleSheet = _styleSheet === void 0 ? null : _styleSheet, _optimizeForSpeed = ref.optimizeForSpeed, optimizeForSpeed = _optimizeForSpeed === void 0 ? false : _optimizeForSpeed;\n        this._sheet = styleSheet || new StyleSheet({\n            name: \"styled-jsx\",\n            optimizeForSpeed: optimizeForSpeed\n        });\n        this._sheet.inject();\n        if (styleSheet && typeof optimizeForSpeed === \"boolean\") {\n            this._sheet.setOptimizeForSpeed(optimizeForSpeed);\n            this._optimizeForSpeed = this._sheet.isOptimizeForSpeed();\n        }\n        this._fromServer = undefined;\n        this._indices = {};\n        this._instancesCounts = {};\n    }\n    var _proto = StyleSheetRegistry.prototype;\n    _proto.add = function add(props) {\n        var _this = this;\n        if (undefined === this._optimizeForSpeed) {\n            this._optimizeForSpeed = Array.isArray(props.children);\n            this._sheet.setOptimizeForSpeed(this._optimizeForSpeed);\n            this._optimizeForSpeed = this._sheet.isOptimizeForSpeed();\n        }\n        if (typeof window !== \"undefined\" && !this._fromServer) {\n            this._fromServer = this.selectFromServer();\n            this._instancesCounts = Object.keys(this._fromServer).reduce(function(acc, tagName) {\n                acc[tagName] = 0;\n                return acc;\n            }, {});\n        }\n        var ref = this.getIdAndRules(props), styleId = ref.styleId, rules = ref.rules;\n        // Deduping: just increase the instances count.\n        if (styleId in this._instancesCounts) {\n            this._instancesCounts[styleId] += 1;\n            return;\n        }\n        var indices = rules.map(function(rule) {\n            return _this._sheet.insertRule(rule);\n        })// Filter out invalid rules\n        .filter(function(index) {\n            return index !== -1;\n        });\n        this._indices[styleId] = indices;\n        this._instancesCounts[styleId] = 1;\n    };\n    _proto.remove = function remove(props) {\n        var _this = this;\n        var styleId = this.getIdAndRules(props).styleId;\n        invariant(styleId in this._instancesCounts, \"styleId: `\" + styleId + \"` not found\");\n        this._instancesCounts[styleId] -= 1;\n        if (this._instancesCounts[styleId] < 1) {\n            var tagFromServer = this._fromServer && this._fromServer[styleId];\n            if (tagFromServer) {\n                tagFromServer.parentNode.removeChild(tagFromServer);\n                delete this._fromServer[styleId];\n            } else {\n                this._indices[styleId].forEach(function(index) {\n                    return _this._sheet.deleteRule(index);\n                });\n                delete this._indices[styleId];\n            }\n            delete this._instancesCounts[styleId];\n        }\n    };\n    _proto.update = function update(props, nextProps) {\n        this.add(nextProps);\n        this.remove(props);\n    };\n    _proto.flush = function flush() {\n        this._sheet.flush();\n        this._sheet.inject();\n        this._fromServer = undefined;\n        this._indices = {};\n        this._instancesCounts = {};\n    };\n    _proto.cssRules = function cssRules() {\n        var _this = this;\n        var fromServer = this._fromServer ? Object.keys(this._fromServer).map(function(styleId) {\n            return [\n                styleId,\n                _this._fromServer[styleId]\n            ];\n        }) : [];\n        var cssRules = this._sheet.cssRules();\n        return fromServer.concat(Object.keys(this._indices).map(function(styleId) {\n            return [\n                styleId,\n                _this._indices[styleId].map(function(index) {\n                    return cssRules[index].cssText;\n                }).join(_this._optimizeForSpeed ? \"\" : \"\\n\")\n            ];\n        })// filter out empty rules\n        .filter(function(rule) {\n            return Boolean(rule[1]);\n        }));\n    };\n    _proto.styles = function styles(options) {\n        return mapRulesToStyle(this.cssRules(), options);\n    };\n    _proto.getIdAndRules = function getIdAndRules(props) {\n        var css = props.children, dynamic = props.dynamic, id = props.id;\n        if (dynamic) {\n            var styleId = computeId(id, dynamic);\n            return {\n                styleId: styleId,\n                rules: Array.isArray(css) ? css.map(function(rule) {\n                    return computeSelector(styleId, rule);\n                }) : [\n                    computeSelector(styleId, css)\n                ]\n            };\n        }\n        return {\n            styleId: computeId(id),\n            rules: Array.isArray(css) ? css : [\n                css\n            ]\n        };\n    };\n    /**\n   * selectFromServer\n   *\n   * Collects style tags from the document with id __jsx-XXX\n   */ _proto.selectFromServer = function selectFromServer() {\n        var elements = Array.prototype.slice.call(document.querySelectorAll('[id^=\"__jsx-\"]'));\n        return elements.reduce(function(acc, element) {\n            var id = element.id.slice(2);\n            acc[id] = element;\n            return acc;\n        }, {});\n    };\n    return StyleSheetRegistry;\n}();\nfunction invariant(condition, message) {\n    if (!condition) {\n        throw new Error(\"StyleSheetRegistry: \" + message + \".\");\n    }\n}\nvar StyleSheetContext = /*#__PURE__*/ React.createContext(null);\nStyleSheetContext.displayName = \"StyleSheetContext\";\nfunction createStyleRegistry() {\n    return new StyleSheetRegistry();\n}\nfunction StyleRegistry(param) {\n    var configuredRegistry = param.registry, children = param.children;\n    var rootRegistry = React.useContext(StyleSheetContext);\n    var ref = React.useState(function() {\n        return rootRegistry || configuredRegistry || createStyleRegistry();\n    }), registry = ref[0];\n    return /*#__PURE__*/ React__default[\"default\"].createElement(StyleSheetContext.Provider, {\n        value: registry\n    }, children);\n}\nfunction useStyleRegistry() {\n    return React.useContext(StyleSheetContext);\n}\n\n// Opt-into the new `useInsertionEffect` API in React 18, fallback to `useLayoutEffect`.\n// https://github.com/reactwg/react-18/discussions/110\nvar useInsertionEffect = React__default[\"default\"].useInsertionEffect || React__default[\"default\"].useLayoutEffect;\nvar defaultRegistry = typeof window !== \"undefined\" ? createStyleRegistry() : undefined;\nfunction JSXStyle(props) {\n    var registry = defaultRegistry ? defaultRegistry : useStyleRegistry();\n    // If `registry` does not exist, we do nothing here.\n    if (!registry) {\n        return null;\n    }\n    if (typeof window === \"undefined\") {\n        registry.add(props);\n        return null;\n    }\n    useInsertionEffect(function() {\n        registry.add(props);\n        return function() {\n            registry.remove(props);\n        };\n    // props.children can be string[], will be striped since id is identical\n    }, [\n        props.id,\n        String(props.dynamic)\n    ]);\n    return null;\n}\nJSXStyle.dynamic = function(info) {\n    return info.map(function(tagInfo) {\n        var baseId = tagInfo[0];\n        var props = tagInfo[1];\n        return computeId(baseId, props);\n    }).join(\" \");\n};\n\nexports.StyleRegistry = StyleRegistry;\nexports.createStyleRegistry = createStyleRegistry;\nexports.style = JSXStyle;\nexports.useStyleRegistry = useStyleRegistry;\n","module.exports = require('./dist/index').style\n","__turbopack_context__.v({\n  \"activeTab\": \"ChemistryReference-module__K33AyG__activeTab\",\n  \"bondCard\": \"ChemistryReference-module__K33AyG__bondCard\",\n  \"bondDescription\": \"ChemistryReference-module__K33AyG__bondDescription\",\n  \"bondElectrons\": \"ChemistryReference-module__K33AyG__bondElectrons\",\n  \"bondExamples\": \"ChemistryReference-module__K33AyG__bondExamples\",\n  \"bondHeader\": \"ChemistryReference-module__K33AyG__bondHeader\",\n  \"bondName\": \"ChemistryReference-module__K33AyG__bondName\",\n  \"bondStrength\": \"ChemistryReference-module__K33AyG__bondStrength\",\n  \"bondSymbol\": \"ChemistryReference-module__K33AyG__bondSymbol\",\n  \"bondsList\": \"ChemistryReference-module__K33AyG__bondsList\",\n  \"closeBtn\": \"ChemistryReference-module__K33AyG__closeBtn\",\n  \"content\": \"ChemistryReference-module__K33AyG__content\",\n  \"detailGrid\": \"ChemistryReference-module__K33AyG__detailGrid\",\n  \"detailItem\": \"ChemistryReference-module__K33AyG__detailItem\",\n  \"detailLabel\": \"ChemistryReference-module__K33AyG__detailLabel\",\n  \"detailValue\": \"ChemistryReference-module__K33AyG__detailValue\",\n  \"elementCard\": \"ChemistryReference-module__K33AyG__elementCard\",\n  \"elementDetail\": \"ChemistryReference-module__K33AyG__elementDetail\",\n  \"elementName\": \"ChemistryReference-module__K33AyG__elementName\",\n  \"elementNumber\": \"ChemistryReference-module__K33AyG__elementNumber\",\n  \"elementSymbol\": \"ChemistryReference-module__K33AyG__elementSymbol\",\n  \"elementsGrid\": \"ChemistryReference-module__K33AyG__elementsGrid\",\n  \"groupCard\": \"ChemistryReference-module__K33AyG__groupCard\",\n  \"groupDescription\": \"ChemistryReference-module__K33AyG__groupDescription\",\n  \"groupExamples\": \"ChemistryReference-module__K33AyG__groupExamples\",\n  \"groupHeader\": \"ChemistryReference-module__K33AyG__groupHeader\",\n  \"groupIcon\": \"ChemistryReference-module__K33AyG__groupIcon\",\n  \"groupName\": \"ChemistryReference-module__K33AyG__groupName\",\n  \"groupRelevance\": \"ChemistryReference-module__K33AyG__groupRelevance\",\n  \"groupStructure\": \"ChemistryReference-module__K33AyG__groupStructure\",\n  \"groupsList\": \"ChemistryReference-module__K33AyG__groupsList\",\n  \"header\": \"ChemistryReference-module__K33AyG__header\",\n  \"overlay\": \"ChemistryReference-module__K33AyG__overlay\",\n  \"panel\": \"ChemistryReference-module__K33AyG__panel\",\n  \"selected\": \"ChemistryReference-module__K33AyG__selected\",\n  \"smilesExample\": \"ChemistryReference-module__K33AyG__smilesExample\",\n  \"smilesExamples\": \"ChemistryReference-module__K33AyG__smilesExamples\",\n  \"smilesGuide\": \"ChemistryReference-module__K33AyG__smilesGuide\",\n  \"smilesIntro\": \"ChemistryReference-module__K33AyG__smilesIntro\",\n  \"smilesTable\": \"ChemistryReference-module__K33AyG__smilesTable\",\n  \"smilesTitle\": \"ChemistryReference-module__K33AyG__smilesTitle\",\n  \"tab\": \"ChemistryReference-module__K33AyG__tab\",\n  \"tabs\": \"ChemistryReference-module__K33AyG__tabs\",\n  \"tipCard\": \"ChemistryReference-module__K33AyG__tipCard\",\n  \"tipContent\": \"ChemistryReference-module__K33AyG__tipContent\",\n  \"tipTitle\": \"ChemistryReference-module__K33AyG__tipTitle\",\n  \"tipsList\": \"ChemistryReference-module__K33AyG__tipsList\",\n  \"title\": \"ChemistryReference-module__K33AyG__title\",\n});\n","\n'use client';\n\nimport TopHeader from '@/components/layout/TopHeader';\nimport Builder from '@/components/builder/Builder';\n\nexport default function BuilderPage() {\n    return (\n        <div style={{ display: 'flex', flexDirection: 'column', height: '100%' }}>\n            <TopHeader title=\"Molecular Builder\" subtitle=\"Design complex molecular chains with real-time stability simulation.\" />\n            <div style={{ flex: 1, padding: '0 40px 40px' }}>\n                <Builder />\n            </div>\n        </div>\n    );\n}\n","'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\nimport View3D from './View3D';\nimport { Atom, Bond, PeriodicTable } from '@/lib/chemistry';\nimport { SYLLABUS_DATA, SyllabusLevel } from '@/lib/syllabusData';\nimport { AiService } from '@/lib/aiService';\nimport { MoleculeAnalysisResult } from '@/app/actions/ai';\nimport * as THREE from 'three';\nimport { validateMolecule, ValidationResult } from '@/lib/validation';\nimport { parseSmiles, SMILES_EXAMPLES } from '@/lib/smilesParser';\nimport styles from './Builder.module.css';\nimport { useAuth } from '@/context/AuthContext';\nimport { UserService } from '@/lib/userService';\nimport MissionSelector from './MissionSelector';\nimport ChemistryReference from './ChemistryReference';\nimport { useRouter } from 'next/navigation';\nimport { TrialService } from '@/lib/trialService';\nimport { ImageService } from '@/lib/imageService';\n\nexport default function Builder() {\n    const [atoms, setAtoms] = useState<Atom[]>([]);\n    const [bonds, setBonds] = useState<Bond[]>([]);\n    const [selectedElement, setSelectedElement] = useState<string>('C');\n    const [mode, setMode] = useState<'build' | 'delete' | 'bond'>('build');\n    const [message, setMessage] = useState<string>('Select an element and click on the canvas.');\n    const [bondingSource, setBondingSource] = useState<number | null>(null);\n\n    // Properties State\n    const [properties, setProperties] = useState({\n        stability: 0,\n        efficacy: 0,\n        toxicity: 'Low'\n    });\n\n    const { user, refreshProfile, profile } = useAuth();\n    const [submitting, setSubmitting] = useState(false);\n\n    // --- Syllabus & AI State ---\n    const [currentMission, setCurrentMission] = useState<SyllabusLevel>(SYLLABUS_DATA[0]);\n    const [aiFeedback, setAiFeedback] = useState<MoleculeAnalysisResult | null>(null);\n    const [analyzing, setAnalyzing] = useState(false);\n    const [validationResult, setValidationResult] = useState<ValidationResult | null>(null);\n    const [missionLoaded, setMissionLoaded] = useState(false);\n\n    // --- SMILES Input State ---\n    const [smilesInput, setSmilesInput] = useState('');\n    const [showSmilesInput, setShowSmilesInput] = useState(false);\n    const [smilesError, setSmilesError] = useState<string | null>(null);\n\n    // --- Chemistry Reference State ---\n    const [showReference, setShowReference] = useState(false);\n\n    // Helper: Load a mission template\n    const loadMission = useCallback((mission: SyllabusLevel) => {\n        setCurrentMission(mission);\n\n        // Load atoms from template\n        const templateAtoms = mission.moleculeTemplate.atoms.map(a => ({\n            id: a.id,\n            element: a.element,\n            x: a.position[0],\n            y: a.position[1],\n            z: a.position[2]\n        }));\n\n        // Reconstruct bonds with proper bond order\n        const templateBonds: Bond[] = [];\n        let bondIdCounter = Date.now();\n        mission.moleculeTemplate.bonds.forEach(b => {\n            const sourceAtom = templateAtoms.find(a => a.id === b.source);\n            const targetAtom = templateAtoms.find(a => a.id === b.target);\n            if (sourceAtom && targetAtom) {\n                templateBonds.push({\n                    id: bondIdCounter++,\n                    sourceId: sourceAtom.id,\n                    targetId: targetAtom.id,\n                    order: b.order || 1 // Use template bond order\n                });\n            }\n        });\n\n        setAtoms(templateAtoms);\n        setBonds(templateBonds);\n        setAiFeedback(null);\n        updateProperties(templateAtoms, templateBonds);\n        setMessage(`Loaded Mission: ${mission.title}`);\n    }, []);\n\n    // Initial Load: Check User Level and Load Highest Unlocked Template\n    useEffect(() => {\n        if (profile && !missionLoaded) {\n            const userLevel = Math.min(profile.level || 1, 8);\n            const mission = SYLLABUS_DATA.find(s => s.level === userLevel) || SYLLABUS_DATA[0];\n            loadMission(mission);\n            setMissionLoaded(true);\n        }\n    }, [profile, missionLoaded, loadMission]);\n\n    // Run validation whenever atoms/bonds change\n    useEffect(() => {\n        if (atoms.length > 0) {\n            const result = validateMolecule(atoms, bonds);\n            setValidationResult(result);\n        } else {\n            setValidationResult(null);\n        }\n    }, [atoms, bonds]);\n\n\n    const handleEmptyClick = (position: THREE.Vector3) => {\n        if (mode === 'build') {\n            const newAtom: Atom = {\n                id: Date.now(),\n                element: selectedElement,\n                x: position.x,\n                y: position.y,\n                z: position.z\n            };\n\n            const newBonds: Bond[] = [];\n            let bondIdCounter = Date.now();\n\n            atoms.forEach(atom => {\n                const dist = new THREE.Vector3(atom.x, atom.y, atom.z).distanceTo(position);\n                if (dist < 2.0) {\n                    newBonds.push({\n                        id: bondIdCounter++,\n                        sourceId: atom.id,\n                        targetId: newAtom.id,\n                        order: 1\n                    });\n                }\n            });\n\n            const updatedAtoms = [...atoms, newAtom];\n            const updatedBonds = [...bonds, ...newBonds];\n\n            setAtoms(updatedAtoms);\n            setBonds(updatedBonds);\n            updateProperties(updatedAtoms, updatedBonds);\n            setMessage(`Added ${PeriodicTable[selectedElement].name}`);\n        }\n    };\n\n    const handleAtomClick = (id: number) => {\n        if (mode === 'delete') {\n            const updatedAtoms = atoms.filter(a => a.id !== id);\n            const updatedBonds = bonds.filter(b => b.sourceId !== id && b.targetId !== id);\n            setAtoms(updatedAtoms);\n            setBonds(updatedBonds);\n            updateProperties(updatedAtoms, updatedBonds);\n            setMessage('Atom deleted');\n        } else if (mode === 'bond') {\n            // Bonding mode: click two atoms to connect them\n            if (bondingSource === null) {\n                setBondingSource(id);\n                setMessage(`Bonding: Selected first atom (ID: ${id}). Click another atom to connect.`);\n            } else if (bondingSource !== id) {\n                // Check if bond already exists\n                const exists = bonds.some(b =>\n                    (b.sourceId === bondingSource && b.targetId === id) ||\n                    (b.sourceId === id && b.targetId === bondingSource)\n                );\n                if (!exists) {\n                    const newBond: Bond = {\n                        id: Date.now(),\n                        sourceId: bondingSource,\n                        targetId: id,\n                        order: 1\n                    };\n                    const updatedBonds = [...bonds, newBond];\n                    setBonds(updatedBonds);\n                    updateProperties(atoms, updatedBonds);\n                    setMessage(`Bond created between atoms!`);\n                } else {\n                    setMessage('Bond already exists between these atoms.');\n                }\n                setBondingSource(null);\n            } else {\n                setBondingSource(null);\n                setMessage('Bonding cancelled.');\n            }\n        } else {\n            // Build mode: clicking atom does nothing (only empty space adds atoms)\n            const atom = atoms.find(a => a.id === id);\n            if (atom) {\n                const el = PeriodicTable[atom.element];\n                setMessage(`${el?.name || atom.element} atom selected`);\n            }\n        }\n    };\n\n    const updateProperties = (currentAtoms: Atom[], currentBonds: Bond[]) => {\n        const result = validateMolecule(currentAtoms, currentBonds);\n        if (result.valid) {\n            setProperties({\n                stability: Math.min(100, 50 + result.score),\n                efficacy: Math.min(100, 20 + result.score * 0.5),\n                toxicity: 'Low'\n            });\n        } else {\n            setProperties({\n                stability: Math.max(0, 30 - currentAtoms.length * 2),\n                efficacy: 0,\n                toxicity: 'High'\n            });\n        }\n    };\n\n    const handleReset = () => {\n        loadMission(currentMission);\n        setMessage('Template reset to initial state.');\n    };\n\n    const handleAIAnalysis = async () => {\n        setAnalyzing(true);\n        try {\n            const result = await AiService.analyzeMolecule(\n                currentMission.moleculeTemplate.name,\n                atoms.length,\n                \"User modified the structure.\"\n            );\n            setAiFeedback(result);\n            setMessage(\"AI analysis complete!\");\n        } catch (error) {\n            console.error(\"AI Analysis error:\", error);\n            setMessage(\"Error during AI analysis.\");\n        } finally {\n            setAnalyzing(false);\n        }\n    };\n\n    const router = useRouter();\n\n    const handleSubmit = async () => {\n        if (submitting || !user) return;\n        setSubmitting(true);\n\n        try {\n            const score = aiFeedback ? Math.floor((aiFeedback.efficacy + aiFeedback.safety) / 2) : 50;\n            const xpAwarded = score * 2;\n\n            await UserService.addXP(user.uid, xpAwarded);\n            await UserService.updateQuestProgress(user.uid, 'build_molecule', 1);\n\n            // Calculate validation result for submission details\n            const validationResult = validateMolecule(atoms, bonds);\n\n            // Save trial data for the Clinical Trials phase using TrialService (Firebase)\n            const submission = await TrialService.saveSubmission(user.uid, {\n                moleculeName: currentMission.moleculeTemplate.name + \" (Modified)\",\n                missionId: currentMission.level,\n                missionTitle: currentMission.title,\n                atomCount: atoms.length,\n                stats: {\n                    efficacy: aiFeedback?.efficacy || properties.efficacy,\n                    safety: aiFeedback?.safety || (properties.toxicity === 'Low' ? 80 : 40),\n                    stability: properties.stability\n                },\n                chemicalStats: {\n                    formula: validationResult.formula || 'Unknown',\n                    molecularWeight: validationResult.molecularWeight || 0,\n                    functionalGroups: validationResult.functionalGroups || [],\n                    bonds: {\n                        single: bonds.filter(b => b.order === 1).length,\n                        double: bonds.filter(b => b.order === 2).length,\n                        triple: bonds.filter(b => b.order === 3).length,\n                        aromatic: validationResult.rings?.filter(r => r.isAromatic).length || 0\n                    },\n                    warnings: validationResult.warnings || []\n                },\n                aiAnalysis: aiFeedback?.analysis,\n                imageUrl: AiService.generateMoleculeImageUrl(currentMission.moleculeTemplate.name)\n            });\n\n            // Generate AI molecule image and save to Firebase Storage\n            setMessage('Generating molecule visualization...');\n            const generatedImage = await ImageService.generateMoleculeImage(\n                currentMission.moleculeTemplate.name,\n                submission.id,\n                aiFeedback?.efficacy || properties.efficacy,\n                aiFeedback?.safety || 50,\n                aiFeedback?.visualPrompt\n            );\n\n            // Update trial with generated image URL\n            if (generatedImage) {\n                await TrialService.updateSubmission(submission.id, {\n                    generatedImageUrl: generatedImage.url\n                });\n            }\n\n            // Save trial ID to localStorage for quick access\n            localStorage.setItem('active_trial_id', submission.id);\n\n            if (atoms.length >= 5) {\n                await UserService.unlockAchievement(user.uid, {\n                    id: 'first_complex',\n                    title: 'Molecular Architect',\n                    description: 'Built a molecule with 5+ atoms',\n                    icon: 'üß¨'\n                });\n            }\n\n            await refreshProfile();\n            setMessage(`SUCCESS: Design Submitted! Redirecting to Clinical Trials...`);\n\n            // Short delay then redirect\n            setTimeout(() => {\n                router.push('/dashboard/clinical-trials');\n            }, 1500);\n\n        } catch (error) {\n            console.error(error);\n            setMessage('Error submitting design');\n        } finally {\n            setSubmitting(false);\n        }\n    };\n\n    // --- SMILES Parsing Handler ---\n    const handleSmilesLoad = () => {\n        if (!smilesInput.trim()) {\n            setSmilesError('Please enter a SMILES string');\n            return;\n        }\n\n        const result = parseSmiles(smilesInput.trim());\n\n        if (!result.success) {\n            setSmilesError(result.error || 'Failed to parse SMILES');\n            return;\n        }\n\n        // Successfully parsed - load into builder\n        setAtoms(result.atoms);\n        setBonds(result.bonds);\n        setSmilesError(null);\n        setShowSmilesInput(false);\n        setSmilesInput('');\n        setAiFeedback(null);\n        updateProperties(result.atoms, result.bonds);\n        setMessage(`Loaded molecule from SMILES: ${smilesInput.trim()}`);\n    };\n\n    const handleSmilesExample = (smiles: string, name: string) => {\n        const result = parseSmiles(smiles);\n\n        if (result.success) {\n            setAtoms(result.atoms);\n            setBonds(result.bonds);\n            setSmilesError(null);\n            setShowSmilesInput(false);\n            setAiFeedback(null);\n            updateProperties(result.atoms, result.bonds);\n            setMessage(`Loaded ${name} from SMILES`);\n        } else {\n            setSmilesError(result.error || 'Failed to parse example');\n        }\n    };\n\n    const elementList = ['C', 'O', 'N', 'H', 'S', 'P', 'F', 'Cl', 'Br'];\n\n    return (\n        <div className={styles.container}>\n            <div className={styles.sidebar}>\n                {/* Mission Selector Component */}\n                {profile && (\n                    <MissionSelector\n                        userLevel={profile.level || 1}\n                        currentMissionId={currentMission.level}\n                        onSelectMission={loadMission}\n                    />\n                )}\n\n                <div className={styles.header}>\n                    <h2><span style={{ color: '#60a5fa' }}>LABORATORY:</span> {currentMission.title}</h2>\n                    <p style={{ fontSize: '0.8rem', color: '#9ca3af', marginTop: '4px' }}>{currentMission.description}</p>\n                </div>\n\n                <div className={styles.elementList}>\n                    <h3>Elements</h3>\n                    <div className={styles.elementsGrid}>\n                        {elementList.map(symbol => {\n                            const el = PeriodicTable[symbol];\n                            if (!el) return null;\n                            const isSelected = selectedElement === symbol && mode === 'build';\n                            const colorHex = '#' + el.color.toString(16).padStart(6, '0');\n                            return (\n                                <div\n                                    key={symbol}\n                                    className={`${styles.elementCard} ${isSelected ? styles.selected : ''}`}\n                                    onClick={() => { setSelectedElement(symbol); setMode('build'); setBondingSource(null); }}\n                                    style={{\n                                        borderColor: isSelected ? colorHex : undefined,\n                                        boxShadow: isSelected ? `0 0 12px ${colorHex}40` : undefined\n                                    }}\n                                >\n                                    <div style={{\n                                        width: '24px',\n                                        height: '24px',\n                                        borderRadius: '50%',\n                                        background: colorHex,\n                                        marginBottom: '4px',\n                                        boxShadow: `inset 0 -3px 6px rgba(0,0,0,0.3), 0 0 8px ${colorHex}50`\n                                    }} />\n                                    <b style={{ fontSize: '0.9rem' }}>{symbol}</b>\n                                    <small>{el.name}</small>\n                                </div>\n                            );\n                        })}\n                    </div>\n                </div>\n\n                <div className={styles.controls}>\n                    <div style={{ display: 'flex', gap: '8px' }}>\n                        <button\n                            className={`${styles.btn} ${mode === 'delete' ? styles.active : ''}`}\n                            onClick={() => { setMode(mode === 'delete' ? 'build' : 'delete'); setBondingSource(null); }}\n                            style={{ flex: 1 }}\n                        >\n                            üóëÔ∏è Eraser\n                        </button>\n                        <button\n                            className={`${styles.btn} ${mode === 'bond' ? styles.active : ''}`}\n                            onClick={() => { setMode(mode === 'bond' ? 'build' : 'bond'); setBondingSource(null); }}\n                            style={{ flex: 1, background: mode === 'bond' ? '#7c3aed' : undefined }}\n                        >\n                            üîó Bond\n                        </button>\n                    </div>\n                    <button className={styles.btn} onClick={handleReset}>‚Ü∫ Reset Template</button>\n\n                    {/* SMILES Input Toggle */}\n                    <button\n                        className={`${styles.btn} ${showSmilesInput ? styles.active : ''}`}\n                        onClick={() => setShowSmilesInput(!showSmilesInput)}\n                        style={{ background: showSmilesInput ? '#0ea5e9' : undefined }}\n                    >\n                        üìù SMILES Input\n                    </button>\n\n                    {/* SMILES Input Panel */}\n                    {showSmilesInput && (\n                        <div style={{\n                            background: 'rgba(15, 23, 42, 0.9)',\n                            border: '1px solid rgba(14, 165, 233, 0.4)',\n                            borderRadius: '10px',\n                            padding: '12px',\n                            marginTop: '4px'\n                        }}>\n                            <div style={{ marginBottom: '8px', fontSize: '0.75rem', color: '#94a3b8' }}>\n                                Enter SMILES notation:\n                            </div>\n                            <input\n                                type=\"text\"\n                                value={smilesInput}\n                                onChange={(e) => { setSmilesInput(e.target.value); setSmilesError(null); }}\n                                placeholder=\"e.g., CCO (ethanol)\"\n                                style={{\n                                    width: '100%',\n                                    padding: '10px 12px',\n                                    background: 'rgba(30, 41, 59, 0.8)',\n                                    border: smilesError ? '1px solid #ef4444' : '1px solid rgba(148, 163, 184, 0.3)',\n                                    borderRadius: '8px',\n                                    color: '#e2e8f0',\n                                    fontSize: '0.9rem',\n                                    fontFamily: 'monospace',\n                                    marginBottom: '8px'\n                                }}\n                                onKeyDown={(e) => e.key === 'Enter' && handleSmilesLoad()}\n                            />\n                            {smilesError && (\n                                <div style={{ color: '#ef4444', fontSize: '0.75rem', marginBottom: '8px' }}>\n                                    ‚ö†Ô∏è {smilesError}\n                                </div>\n                            )}\n                            <button\n                                className={`${styles.btn}`}\n                                onClick={handleSmilesLoad}\n                                style={{ width: '100%', marginBottom: '8px', background: '#0ea5e9' }}\n                            >\n                                üß¨ Generate Structure\n                            </button>\n\n                            {/* Quick Examples */}\n                            <div style={{ fontSize: '0.7rem', color: '#64748b', marginBottom: '6px' }}>Quick Examples:</div>\n                            <div style={{ display: 'flex', flexWrap: 'wrap', gap: '4px' }}>\n                                {SMILES_EXAMPLES.slice(0, 8).map((ex) => (\n                                    <button\n                                        key={ex.name}\n                                        onClick={() => handleSmilesExample(ex.smiles, ex.name)}\n                                        style={{\n                                            padding: '4px 8px',\n                                            fontSize: '0.65rem',\n                                            background: 'rgba(59, 130, 246, 0.2)',\n                                            border: '1px solid rgba(59, 130, 246, 0.3)',\n                                            borderRadius: '4px',\n                                            color: '#60a5fa',\n                                            cursor: 'pointer'\n                                        }}\n                                        title={ex.smiles}\n                                    >\n                                        {ex.name}\n                                    </button>\n                                ))}\n                            </div>\n                        </div>\n                    )}\n\n                    <button className={`${styles.btn} ${styles.btnPrimary}`} onClick={handleAIAnalysis} disabled={analyzing}>\n                        {analyzing ? 'ü§ñ Analyzing...' : 'üß† AI Analysis'}\n                    </button>\n\n                    {/* Chemistry Reference Button */}\n                    <button\n                        className={styles.btn}\n                        onClick={() => setShowReference(true)}\n                        style={{ background: 'rgba(139, 92, 246, 0.3)', borderColor: '#8b5cf6' }}\n                    >\n                        üìö Chemistry Reference\n                    </button>\n                </div>\n\n                {aiFeedback && (\n                    <div className={styles.aiFeedback}>\n                        <h4>AI Analysis Report</h4>\n                        <p>{aiFeedback.analysis}</p>\n                        <div className={styles.feedbackStats}>\n                            <div>Eff: {Math.round(aiFeedback.efficacy)}%</div>\n                            <div>Saf: {Math.round(aiFeedback.safety)}%</div>\n                        </div>\n                    </div>\n                )}\n\n                <button\n                    className={`${styles.btn} ${styles.btnSuccess}`}\n                    onClick={handleSubmit}\n                    disabled={submitting || !aiFeedback}\n                    style={{ marginTop: 'auto' }}\n                >\n                    {submitting ? 'Submitting...' : 'üöÄ Submit for Trials'}\n                </button>\n            </div>\n\n            <div className={styles.canvasArea}>\n                <div className={styles.canvasHeader}>\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '12px', flexWrap: 'wrap' }}>\n                        <div className={styles.statusMsg}>{message}</div>\n                        {validationResult && (\n                            <div style={{\n                                display: 'flex',\n                                alignItems: 'center',\n                                gap: '8px',\n                                padding: '4px 10px',\n                                borderRadius: '6px',\n                                fontSize: '0.75rem',\n                                fontWeight: 600,\n                                background: validationResult.valid ? 'rgba(16, 185, 129, 0.2)' : 'rgba(239, 68, 68, 0.2)',\n                                border: `1px solid ${validationResult.valid ? '#10b981' : '#ef4444'}`,\n                                color: validationResult.valid ? '#10b981' : '#ef4444'\n                            }}>\n                                {validationResult.valid ? '‚úì Valid' : '‚úó Invalid'}\n                                {validationResult.name && (\n                                    <span style={{ color: '#60a5fa', marginLeft: '4px' }}>‚Ä¢ {validationResult.name}</span>\n                                )}\n                            </div>\n                        )}\n                        {/* Formula & MW Badge */}\n                        {validationResult?.formula && (\n                            <div style={{\n                                padding: '4px 10px',\n                                borderRadius: '6px',\n                                fontSize: '0.75rem',\n                                fontWeight: 600,\n                                background: 'rgba(96, 165, 250, 0.15)',\n                                border: '1px solid rgba(96, 165, 250, 0.4)',\n                                color: '#60a5fa'\n                            }}>\n                                {validationResult.formula} ‚Ä¢ {validationResult.molecularWeight} g/mol\n                            </div>\n                        )}\n                    </div>\n                    <div className={styles.propTags}>\n                        {validationResult?.properties?.complexity !== undefined && (\n                            <span className={styles.tag} style={{ color: '#a78bfa' }}>\n                                Complexity: {validationResult.properties.complexity}%\n                            </span>\n                        )}\n                        <span className={styles.tag}>Stab: {Math.round(properties.stability)}%</span>\n                        <span className={styles.tag}>Eff: {Math.round(properties.efficacy)}%</span>\n                        <span className={styles.tag} style={{ color: properties.toxicity === 'Low' ? '#10b981' : '#ef4444' }}>\n                            Tox: {properties.toxicity}\n                        </span>\n                    </div>\n                </div>\n\n                {/* Functional Groups Panel (Top Right) */}\n                {validationResult?.functionalGroups && validationResult.functionalGroups.length > 0 && (\n                    <div style={{\n                        position: 'absolute',\n                        top: '60px',\n                        right: '16px',\n                        background: 'rgba(30, 41, 59, 0.95)',\n                        border: '1px solid rgba(148, 163, 184, 0.2)',\n                        borderRadius: '10px',\n                        padding: '12px',\n                        zIndex: 10,\n                        maxWidth: '220px',\n                        fontSize: '0.75rem',\n                        backdropFilter: 'blur(8px)'\n                    }}>\n                        <div style={{ fontWeight: 700, marginBottom: '8px', color: '#94a3b8', textTransform: 'uppercase', letterSpacing: '0.5px' }}>\n                            Functional Groups\n                        </div>\n                        {validationResult.functionalGroups.map((fg, i) => (\n                            <div key={i} style={{ marginBottom: '4px', color: '#e2e8f0' }}>{fg}</div>\n                        ))}\n                    </div>\n                )}\n\n                {/* Validation Info Panel (Bottom Left) */}\n                {validationResult && (validationResult.errors.length > 0 || validationResult.warnings.length > 0) && (\n                    <div style={{\n                        position: 'absolute',\n                        bottom: '16px',\n                        left: '16px',\n                        background: validationResult.valid\n                            ? 'rgba(30, 58, 95, 0.95)'\n                            : 'rgba(127, 29, 29, 0.9)',\n                        border: `1px solid ${validationResult.valid ? 'rgba(96, 165, 250, 0.4)' : 'rgba(239, 68, 68, 0.4)'}`,\n                        borderRadius: '10px',\n                        padding: '12px',\n                        zIndex: 10,\n                        maxWidth: '380px',\n                        fontSize: '0.75rem',\n                        backdropFilter: 'blur(8px)'\n                    }}>\n                        {/* Errors */}\n                        {!validationResult.valid && validationResult.errors.length > 0 && (\n                            <>\n                                <div style={{ fontWeight: 700, marginBottom: '6px', color: '#ef4444' }}>‚ö†Ô∏è Valence Issues:</div>\n                                {validationResult.errors.slice(0, 3).map((err, i) => (\n                                    <div key={`err-${i}`} style={{ marginBottom: '2px', color: '#fca5a5' }}>‚Ä¢ {err}</div>\n                                ))}\n                                {validationResult.errors.length > 3 && (\n                                    <div style={{ color: '#9ca3af', marginTop: '4px' }}>...and {validationResult.errors.length - 3} more</div>\n                                )}\n                            </>\n                        )}\n\n                        {/* Warnings / Info */}\n                        {validationResult.warnings.length > 0 && (\n                            <div style={{ marginTop: validationResult.errors.length > 0 ? '10px' : '0' }}>\n                                {validationResult.warnings.slice(0, 4).map((warn, i) => (\n                                    <div key={`warn-${i}`} style={{\n                                        marginBottom: '4px',\n                                        color: warn.startsWith('‚úÖ') ? '#86efac' :\n                                            warn.startsWith('‚ö†Ô∏è') ? '#fcd34d' :\n                                                warn.startsWith('üíä') ? '#c4b5fd' :\n                                                    warn.startsWith('üîµ') ? '#93c5fd' : '#e2e8f0'\n                                    }}>\n                                        {warn}\n                                    </div>\n                                ))}\n                            </div>\n                        )}\n                    </div>\n                )}\n\n                <View3D\n                    atoms={atoms}\n                    bonds={bonds}\n                    selectedElement={mode === 'build' ? selectedElement : null}\n                    onEmptyClick={handleEmptyClick}\n                    onAtomClick={handleAtomClick}\n                />\n            </div>\n\n            {/* Chemistry Reference Panel */}\n            <ChemistryReference\n                isOpen={showReference}\n                onClose={() => setShowReference(false)}\n            />\n        </div>\n    );\n}\n","\nimport * as THREE from 'three';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\nimport { Atom, Bond, PeriodicTable } from './chemistry';\n\nexport class MoleculeScene {\n    private scene: THREE.Scene;\n    private camera: THREE.PerspectiveCamera;\n    private renderer: THREE.WebGLRenderer;\n    private controls: OrbitControls;\n    private raycaster: THREE.Raycaster;\n    private mouse: THREE.Vector2;\n    private container: HTMLElement;\n\n    // Data\n    private atoms: Atom[] = [];\n    private bonds: Bond[] = [];\n    private atomMeshes: Map<number, THREE.Mesh> = new Map();\n    private bondMeshes: Map<number, THREE.Mesh[]> = new Map();\n\n    // Interaction\n    private onAtomClick?: (atomId: number) => void;\n    private onEmptyClick?: (position: THREE.Vector3) => void;\n    private onAtomHover?: (atom: Atom | null) => void;\n\n    private ghostMesh: THREE.Mesh | null = null;\n    private hoveredAtomId: number | null = null;\n\n    constructor(\n        container: HTMLElement,\n        width: number,\n        height: number,\n        onAtomClick?: (id: number) => void,\n        onEmptyClick?: (pos: THREE.Vector3) => void,\n        onAtomHover?: (atom: Atom | null) => void\n    ) {\n        this.container = container;\n        this.onAtomClick = onAtomClick;\n        this.onEmptyClick = onEmptyClick;\n        this.onAtomHover = onAtomHover;\n\n        // Scene Setup\n        this.scene = new THREE.Scene();\n        this.scene.background = new THREE.Color(0x050508);\n        this.scene.fog = new THREE.Fog(0x050508, 15, 60);\n\n        // Camera\n        this.camera = new THREE.PerspectiveCamera(55, width / height, 0.1, 1000);\n        this.camera.position.set(0, 8, 18);\n\n        // Renderer\n        this.renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });\n        this.renderer.setSize(width, height);\n        this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));\n        container.appendChild(this.renderer.domElement);\n\n        // Controls\n        this.controls = new OrbitControls(this.camera, this.renderer.domElement);\n        this.controls.enableDamping = true;\n        this.controls.dampingFactor = 0.05;\n        this.controls.minDistance = 5;\n        this.controls.maxDistance = 50;\n\n        // Lights\n        const ambientLight = new THREE.AmbientLight(0x404050, 2);\n        this.scene.add(ambientLight);\n\n        const pointLight = new THREE.PointLight(0xffffff, 2.5);\n        pointLight.position.set(10, 15, 10);\n        this.scene.add(pointLight);\n\n        const dirLight = new THREE.DirectionalLight(0xffffff, 1.5);\n        dirLight.position.set(-5, 10, -5);\n        this.scene.add(dirLight);\n\n        // Grid\n        const gridHelper = new THREE.GridHelper(40, 40, 0x333340, 0x1a1a25);\n        this.scene.add(gridHelper);\n\n        // Interaction\n        this.raycaster = new THREE.Raycaster();\n        this.mouse = new THREE.Vector2();\n\n        // Event Listeners\n        this.renderer.domElement.addEventListener('click', this.handleClick.bind(this));\n        this.renderer.domElement.addEventListener('mousemove', this.handleMouseMove.bind(this));\n\n        // Start Loop\n        this.animate();\n    }\n\n    public updateGhost(elementSymbol: string | null) {\n        if (this.ghostMesh) {\n            this.scene.remove(this.ghostMesh);\n            this.ghostMesh = null;\n        }\n\n        if (elementSymbol && PeriodicTable[elementSymbol]) {\n            const data = PeriodicTable[elementSymbol];\n            const geometry = new THREE.SphereGeometry(1, 32, 32);\n            const material = new THREE.MeshPhongMaterial({\n                color: data.color,\n                opacity: 0.4,\n                transparent: true,\n                emissive: data.color,\n                emissiveIntensity: 0.3\n            });\n            this.ghostMesh = new THREE.Mesh(geometry, material);\n            const scale = data.radius * 0.5;\n            this.ghostMesh.scale.set(scale, scale, scale);\n            this.scene.add(this.ghostMesh);\n        }\n    }\n\n    private handleMouseMove(event: MouseEvent) {\n        const rect = this.renderer.domElement.getBoundingClientRect();\n        this.mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;\n        this.mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;\n\n        this.raycaster.setFromCamera(this.mouse, this.camera);\n\n        // Check for atom hover\n        const atomMeshArray = Array.from(this.atomMeshes.values());\n        const intersects = this.raycaster.intersectObjects(atomMeshArray);\n\n        if (intersects.length > 0) {\n            const object = intersects[0].object;\n            for (const [id, mesh] of this.atomMeshes.entries()) {\n                if (mesh === object) {\n                    if (this.hoveredAtomId !== id) {\n                        this.hoveredAtomId = id;\n                        const atom = this.atoms.find(a => a.id === id);\n                        if (this.onAtomHover) this.onAtomHover(atom || null);\n                    }\n                    break;\n                }\n            }\n        } else {\n            if (this.hoveredAtomId !== null) {\n                this.hoveredAtomId = null;\n                if (this.onAtomHover) this.onAtomHover(null);\n            }\n        }\n\n        // Ghost positioning\n        if (this.ghostMesh) {\n            const plane = new THREE.Plane(new THREE.Vector3(0, 1, 0), 0);\n            const target = new THREE.Vector3();\n            const intersection = this.raycaster.ray.intersectPlane(plane, target);\n\n            if (intersection) {\n                this.ghostMesh.position.copy(intersection);\n                this.ghostMesh.visible = true;\n            } else {\n                this.ghostMesh.visible = false;\n            }\n        }\n    }\n\n    private handleClick(event: MouseEvent) {\n        const rect = this.renderer.domElement.getBoundingClientRect();\n        this.mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;\n        this.mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;\n\n        this.raycaster.setFromCamera(this.mouse, this.camera);\n\n        // Raycast against atoms\n        const atomMeshArray = Array.from(this.atomMeshes.values());\n        const intersects = this.raycaster.intersectObjects(atomMeshArray);\n\n        if (intersects.length > 0) {\n            // Clicked an atom\n            const object = intersects[0].object;\n            for (const [id, mesh] of this.atomMeshes.entries()) {\n                if (mesh === object && this.onAtomClick) {\n                    this.onAtomClick(id);\n                    return;\n                }\n            }\n        } else {\n            // Clicked empty space\n            const plane = new THREE.Plane(new THREE.Vector3(0, 1, 0), 0);\n            const target = new THREE.Vector3();\n            const intersection = this.raycaster.ray.intersectPlane(plane, target);\n\n            if (intersection && this.onEmptyClick) {\n                this.onEmptyClick(intersection);\n            }\n        }\n    }\n\n    public updateMolecule(atoms: Atom[], bonds: Bond[]) {\n        this.atoms = atoms;\n        this.bonds = bonds;\n        this.renderMolecule();\n    }\n\n    private renderMolecule() {\n        // Clear existing meshes\n        this.atomMeshes.forEach(mesh => this.scene.remove(mesh));\n        this.atomMeshes.clear();\n\n        this.bondMeshes.forEach(meshes => meshes.forEach(m => this.scene.remove(m)));\n        this.bondMeshes.clear();\n\n        const sphereGeometry = new THREE.SphereGeometry(1, 32, 32);\n        const cylinderGeometry = new THREE.CylinderGeometry(0.15, 0.15, 1, 16);\n\n        // Render Atoms\n        this.atoms.forEach(atom => {\n            const data = PeriodicTable[atom.element];\n            if (!data) return;\n\n            const material = new THREE.MeshPhongMaterial({\n                color: data.color,\n                shininess: 80,\n                specular: 0x444444\n            });\n            const mesh = new THREE.Mesh(sphereGeometry, material);\n\n            // Scale by radius\n            const scale = data.radius * 0.5;\n            mesh.scale.set(scale, scale, scale);\n\n            mesh.position.set(atom.x, atom.y, atom.z);\n\n            this.scene.add(mesh);\n            this.atomMeshes.set(atom.id, mesh);\n        });\n\n        // Render Bonds\n        this.bonds.forEach(bond => {\n            const startAtom = this.atoms.find(a => a.id === bond.sourceId);\n            const endAtom = this.atoms.find(a => a.id === bond.targetId);\n            if (!startAtom || !endAtom) return;\n\n            const startPos = new THREE.Vector3(startAtom.x, startAtom.y, startAtom.z);\n            const endPos = new THREE.Vector3(endAtom.x, endAtom.y, endAtom.z);\n\n            const distance = startPos.distanceTo(endPos);\n            const mid = new THREE.Vector3().addVectors(startPos, endPos).multiplyScalar(0.5);\n\n            // Orientation\n            const direction = new THREE.Vector3().subVectors(endPos, startPos).normalize();\n            const quaternion = new THREE.Quaternion();\n            quaternion.setFromUnitVectors(new THREE.Vector3(0, 1, 0), direction);\n\n            const bondColor = 0x666680;\n\n            if (bond.order === 1) {\n                const material = new THREE.MeshPhongMaterial({ color: bondColor });\n                const mesh = new THREE.Mesh(cylinderGeometry, material);\n                mesh.position.copy(mid);\n                mesh.quaternion.copy(quaternion);\n                mesh.scale.set(1, distance, 1);\n                this.scene.add(mesh);\n                this.bondMeshes.set(bond.id, [mesh]);\n            } else if (bond.order >= 2) {\n                // Double/Triple bond\n                const offset = 0.2;\n                let axis = new THREE.Vector3(0, 0, 1);\n                if (Math.abs(direction.z) > 0.9) axis.set(1, 0, 0);\n                const offsetVec = new THREE.Vector3().crossVectors(direction, axis).normalize().multiplyScalar(offset);\n\n                const m1 = new THREE.Mesh(cylinderGeometry, new THREE.MeshPhongMaterial({ color: bondColor }));\n                m1.position.copy(mid).add(offsetVec);\n                m1.quaternion.copy(quaternion);\n                m1.scale.set(0.8, distance, 0.8);\n\n                const m2 = new THREE.Mesh(cylinderGeometry, new THREE.MeshPhongMaterial({ color: bondColor }));\n                m2.position.copy(mid).sub(offsetVec);\n                m2.quaternion.copy(quaternion);\n                m2.scale.set(0.8, distance, 0.8);\n\n                this.scene.add(m1);\n                this.scene.add(m2);\n                this.bondMeshes.set(bond.id, [m1, m2]);\n            }\n        });\n    }\n\n    public resize(width: number, height: number) {\n        this.camera.aspect = width / height;\n        this.camera.updateProjectionMatrix();\n        this.renderer.setSize(width, height);\n    }\n\n    public dispose() {\n        this.renderer.dispose();\n        if (this.container.contains(this.renderer.domElement)) {\n            this.container.removeChild(this.renderer.domElement);\n        }\n    }\n\n    private animate() {\n        requestAnimationFrame(this.animate.bind(this));\n        this.controls.update();\n        this.renderer.render(this.scene, this.camera);\n    }\n}\n","import {\n\tEventDispatcher,\n\tMOUSE,\n\tQuaternion,\n\tSpherical,\n\tTOUCH,\n\tVector2,\n\tVector3,\n\tPlane,\n\tRay,\n\tMathUtils\n} from 'three';\n\n// OrbitControls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nconst _changeEvent = { type: 'change' };\nconst _startEvent = { type: 'start' };\nconst _endEvent = { type: 'end' };\nconst _ray = new Ray();\nconst _plane = new Plane();\nconst TILT_LIMIT = Math.cos( 70 * MathUtils.DEG2RAD );\n\nclass OrbitControls extends EventDispatcher {\n\n\tconstructor( object, domElement ) {\n\n\t\tsuper();\n\n\t\tthis.object = object;\n\t\tthis.domElement = domElement;\n\t\tthis.domElement.style.touchAction = 'none'; // disable touch scroll\n\n\t\t// Set to false to disable this control\n\t\tthis.enabled = true;\n\n\t\t// \"target\" sets the location of focus, where the object orbits around\n\t\tthis.target = new Vector3();\n\n\t\t// Sets the 3D cursor (similar to Blender), from which the maxTargetRadius takes effect\n\t\tthis.cursor = new Vector3();\n\n\t\t// How far you can dolly in and out ( PerspectiveCamera only )\n\t\tthis.minDistance = 0;\n\t\tthis.maxDistance = Infinity;\n\n\t\t// How far you can zoom in and out ( OrthographicCamera only )\n\t\tthis.minZoom = 0;\n\t\tthis.maxZoom = Infinity;\n\n\t\t// Limit camera target within a spherical area around the cursor\n\t\tthis.minTargetRadius = 0;\n\t\tthis.maxTargetRadius = Infinity;\n\n\t\t// How far you can orbit vertically, upper and lower limits.\n\t\t// Range is 0 to Math.PI radians.\n\t\tthis.minPolarAngle = 0; // radians\n\t\tthis.maxPolarAngle = Math.PI; // radians\n\n\t\t// How far you can orbit horizontally, upper and lower limits.\n\t\t// If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\n\t\tthis.minAzimuthAngle = - Infinity; // radians\n\t\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t\t// Set to true to enable damping (inertia)\n\t\t// If damping is enabled, you must call controls.update() in your animation loop\n\t\tthis.enableDamping = false;\n\t\tthis.dampingFactor = 0.05;\n\n\t\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t\t// Set to false to disable zooming\n\t\tthis.enableZoom = true;\n\t\tthis.zoomSpeed = 1.0;\n\n\t\t// Set to false to disable rotating\n\t\tthis.enableRotate = true;\n\t\tthis.rotateSpeed = 1.0;\n\n\t\t// Set to false to disable panning\n\t\tthis.enablePan = true;\n\t\tthis.panSpeed = 1.0;\n\t\tthis.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up\n\t\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\t\tthis.zoomToCursor = false;\n\n\t\t// Set to true to automatically rotate around the target\n\t\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\t\tthis.autoRotate = false;\n\t\tthis.autoRotateSpeed = 2.0; // 30 seconds per orbit when fps is 60\n\n\t\t// The four arrow keys\n\t\tthis.keys = { LEFT: 'ArrowLeft', UP: 'ArrowUp', RIGHT: 'ArrowRight', BOTTOM: 'ArrowDown' };\n\n\t\t// Mouse buttons\n\t\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\n\n\t\t// Touch fingers\n\t\tthis.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN };\n\n\t\t// for reset\n\t\tthis.target0 = this.target.clone();\n\t\tthis.position0 = this.object.position.clone();\n\t\tthis.zoom0 = this.object.zoom;\n\n\t\t// the target DOM element for key events\n\t\tthis._domElementKeyEvents = null;\n\n\t\t//\n\t\t// public methods\n\t\t//\n\n\t\tthis.getPolarAngle = function () {\n\n\t\t\treturn spherical.phi;\n\n\t\t};\n\n\t\tthis.getAzimuthalAngle = function () {\n\n\t\t\treturn spherical.theta;\n\n\t\t};\n\n\t\tthis.getDistance = function () {\n\n\t\t\treturn this.object.position.distanceTo( this.target );\n\n\t\t};\n\n\t\tthis.listenToKeyEvents = function ( domElement ) {\n\n\t\t\tdomElement.addEventListener( 'keydown', onKeyDown );\n\t\t\tthis._domElementKeyEvents = domElement;\n\n\t\t};\n\n\t\tthis.stopListenToKeyEvents = function () {\n\n\t\t\tthis._domElementKeyEvents.removeEventListener( 'keydown', onKeyDown );\n\t\t\tthis._domElementKeyEvents = null;\n\n\t\t};\n\n\t\tthis.saveState = function () {\n\n\t\t\tscope.target0.copy( scope.target );\n\t\t\tscope.position0.copy( scope.object.position );\n\t\t\tscope.zoom0 = scope.object.zoom;\n\n\t\t};\n\n\t\tthis.reset = function () {\n\n\t\t\tscope.target.copy( scope.target0 );\n\t\t\tscope.object.position.copy( scope.position0 );\n\t\t\tscope.object.zoom = scope.zoom0;\n\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tscope.dispatchEvent( _changeEvent );\n\n\t\t\tscope.update();\n\n\t\t\tstate = STATE.NONE;\n\n\t\t};\n\n\t\t// this method is exposed, but perhaps it would be better if we can make it private...\n\t\tthis.update = function () {\n\n\t\t\tconst offset = new Vector3();\n\n\t\t\t// so camera.up is the orbit axis\n\t\t\tconst quat = new Quaternion().setFromUnitVectors( object.up, new Vector3( 0, 1, 0 ) );\n\t\t\tconst quatInverse = quat.clone().invert();\n\n\t\t\tconst lastPosition = new Vector3();\n\t\t\tconst lastQuaternion = new Quaternion();\n\t\t\tconst lastTargetPosition = new Vector3();\n\n\t\t\tconst twoPI = 2 * Math.PI;\n\n\t\t\treturn function update( deltaTime = null ) {\n\n\t\t\t\tconst position = scope.object.position;\n\n\t\t\t\toffset.copy( position ).sub( scope.target );\n\n\t\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t\t// angle from z-axis around y-axis\n\t\t\t\tspherical.setFromVector3( offset );\n\n\t\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\t\trotateLeft( getAutoRotationAngle( deltaTime ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( scope.enableDamping ) {\n\n\t\t\t\t\tspherical.theta += sphericalDelta.theta * scope.dampingFactor;\n\t\t\t\t\tspherical.phi += sphericalDelta.phi * scope.dampingFactor;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t\t}\n\n\t\t\t\t// restrict theta to be between desired limits\n\n\t\t\t\tlet min = scope.minAzimuthAngle;\n\t\t\t\tlet max = scope.maxAzimuthAngle;\n\n\t\t\t\tif ( isFinite( min ) && isFinite( max ) ) {\n\n\t\t\t\t\tif ( min < - Math.PI ) min += twoPI; else if ( min > Math.PI ) min -= twoPI;\n\n\t\t\t\t\tif ( max < - Math.PI ) max += twoPI; else if ( max > Math.PI ) max -= twoPI;\n\n\t\t\t\t\tif ( min <= max ) {\n\n\t\t\t\t\t\tspherical.theta = Math.max( min, Math.min( max, spherical.theta ) );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tspherical.theta = ( spherical.theta > ( min + max ) / 2 ) ?\n\t\t\t\t\t\t\tMath.max( min, spherical.theta ) :\n\t\t\t\t\t\t\tMath.min( max, spherical.theta );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// restrict phi to be between desired limits\n\t\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\n\t\t\t\tspherical.makeSafe();\n\n\n\t\t\t\t// move target to panned location\n\n\t\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\t\tscope.target.addScaledVector( panOffset, scope.dampingFactor );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tscope.target.add( panOffset );\n\n\t\t\t\t}\n\n\t\t\t\t// Limit the target distance from the cursor to create a sphere around the center of interest\n\t\t\t\tscope.target.sub( scope.cursor );\n\t\t\t\tscope.target.clampLength( scope.minTargetRadius, scope.maxTargetRadius );\n\t\t\t\tscope.target.add( scope.cursor );\n\n\t\t\t\t// adjust the camera position based on zoom only if we're not zooming to the cursor or if it's an ortho camera\n\t\t\t\t// we adjust zoom later in these cases\n\t\t\t\tif ( scope.zoomToCursor && performCursorZoom || scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\tspherical.radius = clampDistance( spherical.radius );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tspherical.radius = clampDistance( spherical.radius * scale );\n\n\t\t\t\t}\n\n\t\t\t\toffset.setFromSpherical( spherical );\n\n\t\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\t\tposition.copy( scope.target ).add( offset );\n\n\t\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\n\t\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n\t\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\n\t\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t\t}\n\n\t\t\t\t// adjust camera position\n\t\t\t\tlet zoomChanged = false;\n\t\t\t\tif ( scope.zoomToCursor && performCursorZoom ) {\n\n\t\t\t\t\tlet newRadius = null;\n\t\t\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t\t\t// move the camera down the pointer ray\n\t\t\t\t\t\t// this method avoids floating point error\n\t\t\t\t\t\tconst prevRadius = offset.length();\n\t\t\t\t\t\tnewRadius = clampDistance( prevRadius * scale );\n\n\t\t\t\t\t\tconst radiusDelta = prevRadius - newRadius;\n\t\t\t\t\t\tscope.object.position.addScaledVector( dollyDirection, radiusDelta );\n\t\t\t\t\t\tscope.object.updateMatrixWorld();\n\n\t\t\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\t\t// adjust the ortho camera position based on zoom changes\n\t\t\t\t\t\tconst mouseBefore = new Vector3( mouse.x, mouse.y, 0 );\n\t\t\t\t\t\tmouseBefore.unproject( scope.object );\n\n\t\t\t\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / scale ) );\n\t\t\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\t\t\tzoomChanged = true;\n\n\t\t\t\t\t\tconst mouseAfter = new Vector3( mouse.x, mouse.y, 0 );\n\t\t\t\t\t\tmouseAfter.unproject( scope.object );\n\n\t\t\t\t\t\tscope.object.position.sub( mouseAfter ).add( mouseBefore );\n\t\t\t\t\t\tscope.object.updateMatrixWorld();\n\n\t\t\t\t\t\tnewRadius = offset.length();\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled.' );\n\t\t\t\t\t\tscope.zoomToCursor = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// handle the placement of the target\n\t\t\t\t\tif ( newRadius !== null ) {\n\n\t\t\t\t\t\tif ( this.screenSpacePanning ) {\n\n\t\t\t\t\t\t\t// position the orbit target in front of the new camera position\n\t\t\t\t\t\t\tscope.target.set( 0, 0, - 1 )\n\t\t\t\t\t\t\t\t.transformDirection( scope.object.matrix )\n\t\t\t\t\t\t\t\t.multiplyScalar( newRadius )\n\t\t\t\t\t\t\t\t.add( scope.object.position );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// get the ray and translation plane to compute target\n\t\t\t\t\t\t\t_ray.origin.copy( scope.object.position );\n\t\t\t\t\t\t\t_ray.direction.set( 0, 0, - 1 ).transformDirection( scope.object.matrix );\n\n\t\t\t\t\t\t\t// if the camera is 20 degrees above the horizon then don't adjust the focus target to avoid\n\t\t\t\t\t\t\t// extremely large values\n\t\t\t\t\t\t\tif ( Math.abs( scope.object.up.dot( _ray.direction ) ) < TILT_LIMIT ) {\n\n\t\t\t\t\t\t\t\tobject.lookAt( scope.target );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t_plane.setFromNormalAndCoplanarPoint( scope.object.up, scope.target );\n\t\t\t\t\t\t\t\t_ray.intersectPlane( _plane, scope.target );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / scale ) );\n\t\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\t\tzoomChanged = true;\n\n\t\t\t\t}\n\n\t\t\t\tscale = 1;\n\t\t\t\tperformCursorZoom = false;\n\n\t\t\t\t// update condition is:\n\t\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\t\tif ( zoomChanged ||\n\t\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ||\n\t\t\t\t\tlastTargetPosition.distanceToSquared( scope.target ) > 0 ) {\n\n\t\t\t\t\tscope.dispatchEvent( _changeEvent );\n\n\t\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\t\tlastTargetPosition.copy( scope.target );\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t};\n\n\t\t}();\n\n\t\tthis.dispose = function () {\n\n\t\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu );\n\n\t\t\tscope.domElement.removeEventListener( 'pointerdown', onPointerDown );\n\t\t\tscope.domElement.removeEventListener( 'pointercancel', onPointerUp );\n\t\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel );\n\n\t\t\tscope.domElement.removeEventListener( 'pointermove', onPointerMove );\n\t\t\tscope.domElement.removeEventListener( 'pointerup', onPointerUp );\n\n\n\t\t\tif ( scope._domElementKeyEvents !== null ) {\n\n\t\t\t\tscope._domElementKeyEvents.removeEventListener( 'keydown', onKeyDown );\n\t\t\t\tscope._domElementKeyEvents = null;\n\n\t\t\t}\n\n\t\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t\t};\n\n\t\t//\n\t\t// internals\n\t\t//\n\n\t\tconst scope = this;\n\n\t\tconst STATE = {\n\t\t\tNONE: - 1,\n\t\t\tROTATE: 0,\n\t\t\tDOLLY: 1,\n\t\t\tPAN: 2,\n\t\t\tTOUCH_ROTATE: 3,\n\t\t\tTOUCH_PAN: 4,\n\t\t\tTOUCH_DOLLY_PAN: 5,\n\t\t\tTOUCH_DOLLY_ROTATE: 6\n\t\t};\n\n\t\tlet state = STATE.NONE;\n\n\t\tconst EPS = 0.000001;\n\n\t\t// current position in spherical coordinates\n\t\tconst spherical = new Spherical();\n\t\tconst sphericalDelta = new Spherical();\n\n\t\tlet scale = 1;\n\t\tconst panOffset = new Vector3();\n\n\t\tconst rotateStart = new Vector2();\n\t\tconst rotateEnd = new Vector2();\n\t\tconst rotateDelta = new Vector2();\n\n\t\tconst panStart = new Vector2();\n\t\tconst panEnd = new Vector2();\n\t\tconst panDelta = new Vector2();\n\n\t\tconst dollyStart = new Vector2();\n\t\tconst dollyEnd = new Vector2();\n\t\tconst dollyDelta = new Vector2();\n\n\t\tconst dollyDirection = new Vector3();\n\t\tconst mouse = new Vector2();\n\t\tlet performCursorZoom = false;\n\n\t\tconst pointers = [];\n\t\tconst pointerPositions = {};\n\n\t\tlet controlActive = false;\n\n\t\tfunction getAutoRotationAngle( deltaTime ) {\n\n\t\t\tif ( deltaTime !== null ) {\n\n\t\t\t\treturn ( 2 * Math.PI / 60 * scope.autoRotateSpeed ) * deltaTime;\n\n\t\t\t} else {\n\n\t\t\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction getZoomScale( delta ) {\n\n\t\t\tconst normalizedDelta = Math.abs( delta * 0.01 );\n\t\t\treturn Math.pow( 0.95, scope.zoomSpeed * normalizedDelta );\n\n\t\t}\n\n\t\tfunction rotateLeft( angle ) {\n\n\t\t\tsphericalDelta.theta -= angle;\n\n\t\t}\n\n\t\tfunction rotateUp( angle ) {\n\n\t\t\tsphericalDelta.phi -= angle;\n\n\t\t}\n\n\t\tconst panLeft = function () {\n\n\t\t\tconst v = new Vector3();\n\n\t\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t\t\tv.multiplyScalar( - distance );\n\n\t\t\t\tpanOffset.add( v );\n\n\t\t\t};\n\n\t\t}();\n\n\t\tconst panUp = function () {\n\n\t\t\tconst v = new Vector3();\n\n\t\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\t\tif ( scope.screenSpacePanning === true ) {\n\n\t\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t\t\tv.crossVectors( scope.object.up, v );\n\n\t\t\t\t}\n\n\t\t\t\tv.multiplyScalar( distance );\n\n\t\t\t\tpanOffset.add( v );\n\n\t\t\t};\n\n\t\t}();\n\n\t\t// deltaX and deltaY are in pixels; right and down are positive\n\t\tconst pan = function () {\n\n\t\t\tconst offset = new Vector3();\n\n\t\t\treturn function pan( deltaX, deltaY ) {\n\n\t\t\t\tconst element = scope.domElement;\n\n\t\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t\t// perspective\n\t\t\t\t\tconst position = scope.object.position;\n\t\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\t\tlet targetDistance = offset.length();\n\n\t\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\t// orthographic\n\t\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n\t\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\t\tscope.enablePan = false;\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}();\n\n\t\tfunction dollyOut( dollyScale ) {\n\n\t\t\tif ( scope.object.isPerspectiveCamera || scope.object.isOrthographicCamera ) {\n\n\t\t\t\tscale /= dollyScale;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\t\tscope.enableZoom = false;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction dollyIn( dollyScale ) {\n\n\t\t\tif ( scope.object.isPerspectiveCamera || scope.object.isOrthographicCamera ) {\n\n\t\t\t\tscale *= dollyScale;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\t\tscope.enableZoom = false;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction updateZoomParameters( x, y ) {\n\n\t\t\tif ( ! scope.zoomToCursor ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tperformCursorZoom = true;\n\n\t\t\tconst rect = scope.domElement.getBoundingClientRect();\n\t\t\tconst dx = x - rect.left;\n\t\t\tconst dy = y - rect.top;\n\t\t\tconst w = rect.width;\n\t\t\tconst h = rect.height;\n\n\t\t\tmouse.x = ( dx / w ) * 2 - 1;\n\t\t\tmouse.y = - ( dy / h ) * 2 + 1;\n\n\t\t\tdollyDirection.set( mouse.x, mouse.y, 1 ).unproject( scope.object ).sub( scope.object.position ).normalize();\n\n\t\t}\n\n\t\tfunction clampDistance( dist ) {\n\n\t\t\treturn Math.max( scope.minDistance, Math.min( scope.maxDistance, dist ) );\n\n\t\t}\n\n\t\t//\n\t\t// event callbacks - update the object state\n\t\t//\n\n\t\tfunction handleMouseDownRotate( event ) {\n\n\t\t\trotateStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseDownDolly( event ) {\n\n\t\t\tupdateZoomParameters( event.clientX, event.clientX );\n\t\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseDownPan( event ) {\n\n\t\t\tpanStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseMoveRotate( event ) {\n\n\t\t\trotateEnd.set( event.clientX, event.clientY );\n\n\t\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\t\tconst element = scope.domElement;\n\n\t\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\t\trotateStart.copy( rotateEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseMoveDolly( event ) {\n\n\t\t\tdollyEnd.set( event.clientX, event.clientY );\n\n\t\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\t\tdollyOut( getZoomScale( dollyDelta.y ) );\n\n\t\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\t\tdollyIn( getZoomScale( dollyDelta.y ) );\n\n\t\t\t}\n\n\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseMovePan( event ) {\n\n\t\t\tpanEnd.set( event.clientX, event.clientY );\n\n\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\tpanStart.copy( panEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseWheel( event ) {\n\n\t\t\tupdateZoomParameters( event.clientX, event.clientY );\n\n\t\t\tif ( event.deltaY < 0 ) {\n\n\t\t\t\tdollyIn( getZoomScale( event.deltaY ) );\n\n\t\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\t\tdollyOut( getZoomScale( event.deltaY ) );\n\n\t\t\t}\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleKeyDown( event ) {\n\n\t\t\tlet needsUpdate = false;\n\n\t\t\tswitch ( event.code ) {\n\n\t\t\t\tcase scope.keys.UP:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\trotateUp( 2 * Math.PI * scope.rotateSpeed / scope.domElement.clientHeight );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tpan( 0, scope.keyPanSpeed );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.BOTTOM:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\trotateUp( - 2 * Math.PI * scope.rotateSpeed / scope.domElement.clientHeight );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.LEFT:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\trotateLeft( 2 * Math.PI * scope.rotateSpeed / scope.domElement.clientHeight );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.RIGHT:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\trotateLeft( - 2 * Math.PI * scope.rotateSpeed / scope.domElement.clientHeight );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( needsUpdate ) {\n\n\t\t\t\t// prevent the browser from scrolling on cursor keys\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tscope.update();\n\n\t\t\t}\n\n\n\t\t}\n\n\t\tfunction handleTouchStartRotate( event ) {\n\n\t\t\tif ( pointers.length === 1 ) {\n\n\t\t\t\trotateStart.set( event.pageX, event.pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst position = getSecondPointerPosition( event );\n\n\t\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\t\trotateStart.set( x, y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction handleTouchStartPan( event ) {\n\n\t\t\tif ( pointers.length === 1 ) {\n\n\t\t\t\tpanStart.set( event.pageX, event.pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst position = getSecondPointerPosition( event );\n\n\t\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\t\tpanStart.set( x, y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction handleTouchStartDolly( event ) {\n\n\t\t\tconst position = getSecondPointerPosition( event );\n\n\t\t\tconst dx = event.pageX - position.x;\n\t\t\tconst dy = event.pageY - position.y;\n\n\t\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyStart.set( 0, distance );\n\n\t\t}\n\n\t\tfunction handleTouchStartDollyPan( event ) {\n\n\t\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\n\n\t\t\tif ( scope.enablePan ) handleTouchStartPan( event );\n\n\t\t}\n\n\t\tfunction handleTouchStartDollyRotate( event ) {\n\n\t\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\n\n\t\t\tif ( scope.enableRotate ) handleTouchStartRotate( event );\n\n\t\t}\n\n\t\tfunction handleTouchMoveRotate( event ) {\n\n\t\t\tif ( pointers.length == 1 ) {\n\n\t\t\t\trotateEnd.set( event.pageX, event.pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst position = getSecondPointerPosition( event );\n\n\t\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\t\trotateEnd.set( x, y );\n\n\t\t\t}\n\n\t\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\t\tconst element = scope.domElement;\n\n\t\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\t\trotateStart.copy( rotateEnd );\n\n\t\t}\n\n\t\tfunction handleTouchMovePan( event ) {\n\n\t\t\tif ( pointers.length === 1 ) {\n\n\t\t\t\tpanEnd.set( event.pageX, event.pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst position = getSecondPointerPosition( event );\n\n\t\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\t\tpanEnd.set( x, y );\n\n\t\t\t}\n\n\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\tpanStart.copy( panEnd );\n\n\t\t}\n\n\t\tfunction handleTouchMoveDolly( event ) {\n\n\t\t\tconst position = getSecondPointerPosition( event );\n\n\t\t\tconst dx = event.pageX - position.x;\n\t\t\tconst dy = event.pageY - position.y;\n\n\t\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyEnd.set( 0, distance );\n\n\t\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\n\n\t\t\tdollyOut( dollyDelta.y );\n\n\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t\tconst centerX = ( event.pageX + position.x ) * 0.5;\n\t\t\tconst centerY = ( event.pageY + position.y ) * 0.5;\n\n\t\t\tupdateZoomParameters( centerX, centerY );\n\n\t\t}\n\n\t\tfunction handleTouchMoveDollyPan( event ) {\n\n\t\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\t\tif ( scope.enablePan ) handleTouchMovePan( event );\n\n\t\t}\n\n\t\tfunction handleTouchMoveDollyRotate( event ) {\n\n\t\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\t\tif ( scope.enableRotate ) handleTouchMoveRotate( event );\n\n\t\t}\n\n\t\t//\n\t\t// event handlers - FSM: listen for events and reset state\n\t\t//\n\n\t\tfunction onPointerDown( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tif ( pointers.length === 0 ) {\n\n\t\t\t\tscope.domElement.setPointerCapture( event.pointerId );\n\n\t\t\t\tscope.domElement.addEventListener( 'pointermove', onPointerMove );\n\t\t\t\tscope.domElement.addEventListener( 'pointerup', onPointerUp );\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\taddPointer( event );\n\n\t\t\tif ( event.pointerType === 'touch' ) {\n\n\t\t\t\tonTouchStart( event );\n\n\t\t\t} else {\n\n\t\t\t\tonMouseDown( event );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onPointerMove( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tif ( event.pointerType === 'touch' ) {\n\n\t\t\t\tonTouchMove( event );\n\n\t\t\t} else {\n\n\t\t\t\tonMouseMove( event );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onPointerUp( event ) {\n\n\t\t\tremovePointer( event );\n\n\t\t\tif ( pointers.length === 0 ) {\n\n\t\t\t\tscope.domElement.releasePointerCapture( event.pointerId );\n\n\t\t\t\tscope.domElement.removeEventListener( 'pointermove', onPointerMove );\n\t\t\t\tscope.domElement.removeEventListener( 'pointerup', onPointerUp );\n\n\t\t\t}\n\n\t\t\tscope.dispatchEvent( _endEvent );\n\n\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tfunction onMouseDown( event ) {\n\n\t\t\tlet mouseAction;\n\n\t\t\tswitch ( event.button ) {\n\n\t\t\t\tcase 0:\n\n\t\t\t\t\tmouseAction = scope.mouseButtons.LEFT;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1:\n\n\t\t\t\t\tmouseAction = scope.mouseButtons.MIDDLE;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\n\n\t\t\t\t\tmouseAction = scope.mouseButtons.RIGHT;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tmouseAction = - 1;\n\n\t\t\t}\n\n\t\t\tswitch ( mouseAction ) {\n\n\t\t\t\tcase MOUSE.DOLLY:\n\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\t\thandleMouseDownDolly( event );\n\n\t\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MOUSE.ROTATE:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MOUSE.PAN:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t\tif ( state !== STATE.NONE ) {\n\n\t\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onMouseMove( event ) {\n\n\t\t\tswitch ( state ) {\n\n\t\t\t\tcase STATE.ROTATE:\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleMouseMoveRotate( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.DOLLY:\n\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\t\thandleMouseMoveDolly( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.PAN:\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleMouseMovePan( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onMouseWheel( event ) {\n\n\t\t\tif ( scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\thandleMouseWheel( customWheelEvent( event ) );\n\n\t\t\tscope.dispatchEvent( _endEvent );\n\n\t\t}\n\n\t\tfunction customWheelEvent( event ) {\n\n\t\t\tconst mode = event.deltaMode;\n\n\t\t\t// minimal wheel event altered to meet delta-zoom demand\n\t\t\tconst newEvent = {\n\t\t\t\tclientX: event.clientX,\n\t\t\t\tclientY: event.clientY,\n\t\t\t\tdeltaY: event.deltaY,\n\t\t\t}\n\n\t\t\tswitch ( mode ) {\n\n\t\t\t\tcase 1: // LINE_MODE\n\t\t\t\t\tnewEvent.deltaY *= 16;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2: // PAGE_MODE\n\t\t\t\t\tnewEvent.deltaY *= 100;\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\t// detect if event was triggered by pinching\n\t\t\tif ( event.ctrlKey && !controlActive ) {\n\n\t\t\t\tnewEvent.deltaY *= 10;\n\n\t\t\t}\n\n\t\t\treturn newEvent;\n\n\t\t}\n\n\t\tfunction interceptControlDown( event ) {\n\n\t\t\tif ( event.key === \"Control\" ) {\n\n\t\t\t\tcontrolActive = true;\n\t\t\t\t\n\t\t\t\tdocument.addEventListener('keyup', interceptControlUp, { passive: true, capture: true });\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction interceptControlUp( event ) {\n\n\t\t\tif ( event.key === \"Control\" ) {\n\n\t\t\t\tcontrolActive = false;\n\t\t\t\t\n\t\t\t\tdocument.removeEventListener('keyup', interceptControlUp, { passive: true, capture: true });\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onKeyDown( event ) {\n\n\t\t\tif ( scope.enabled === false || scope.enablePan === false ) return;\n\n\t\t\thandleKeyDown( event );\n\n\t\t}\n\n\t\tfunction onTouchStart( event ) {\n\n\t\t\ttrackPointer( event );\n\n\t\t\tswitch ( pointers.length ) {\n\n\t\t\t\tcase 1:\n\n\t\t\t\t\tswitch ( scope.touches.ONE ) {\n\n\t\t\t\t\t\tcase TOUCH.ROTATE:\n\n\t\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartRotate( event );\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase TOUCH.PAN:\n\n\t\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartPan( event );\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\n\n\t\t\t\t\tswitch ( scope.touches.TWO ) {\n\n\t\t\t\t\t\tcase TOUCH.DOLLY_PAN:\n\n\t\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartDollyPan( event );\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase TOUCH.DOLLY_ROTATE:\n\n\t\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartDollyRotate( event );\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_ROTATE;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t\tif ( state !== STATE.NONE ) {\n\n\t\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onTouchMove( event ) {\n\n\t\t\ttrackPointer( event );\n\n\t\t\tswitch ( state ) {\n\n\t\t\t\tcase STATE.TOUCH_ROTATE:\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleTouchMoveRotate( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.TOUCH_PAN:\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleTouchMovePan( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.TOUCH_DOLLY_PAN:\n\n\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\t\thandleTouchMoveDollyPan( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.TOUCH_DOLLY_ROTATE:\n\n\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleTouchMoveDollyRotate( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onContextMenu( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t}\n\n\t\tfunction addPointer( event ) {\n\n\t\t\tpointers.push( event.pointerId );\n\n\t\t}\n\n\t\tfunction removePointer( event ) {\n\n\t\t\tdelete pointerPositions[ event.pointerId ];\n\n\t\t\tfor ( let i = 0; i < pointers.length; i ++ ) {\n\n\t\t\t\tif ( pointers[ i ] == event.pointerId ) {\n\n\t\t\t\t\tpointers.splice( i, 1 );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction trackPointer( event ) {\n\n\t\t\tlet position = pointerPositions[ event.pointerId ];\n\n\t\t\tif ( position === undefined ) {\n\n\t\t\t\tposition = new Vector2();\n\t\t\t\tpointerPositions[ event.pointerId ] = position;\n\n\t\t\t}\n\n\t\t\tposition.set( event.pageX, event.pageY );\n\n\t\t}\n\n\t\tfunction getSecondPointerPosition( event ) {\n\n\t\t\tconst pointerId = ( event.pointerId === pointers[ 0 ] ) ? pointers[ 1 ] : pointers[ 0 ];\n\n\t\t\treturn pointerPositions[ pointerId ];\n\n\t\t}\n\n\t\t//\n\n\t\tscope.domElement.addEventListener( 'contextmenu', onContextMenu );\n\n\t\tscope.domElement.addEventListener( 'pointerdown', onPointerDown );\n\t\tscope.domElement.addEventListener( 'pointercancel', onPointerUp );\n\t\tscope.domElement.addEventListener( 'wheel', onMouseWheel, { passive: false } );\n\n\t\tdocument.addEventListener( 'keydown', interceptControlDown, { passive: true, capture: true } );\n\n\t\t// force an update at start\n\n\t\tthis.update();\n\n\t}\n\n}\n\nexport { OrbitControls };","\nexport interface ElementData {\n    name: string;\n    symbol: string;\n    atomicNumber: number;\n    color: number; // Hex color\n    radius: number; // Van der Waals radius (approx) mechanism\n    mass: number;\n    valence: number[]; // Common valences\n}\n\nexport const PeriodicTable: Record<string, ElementData> = {\n    H: { name: 'Hydrogen', symbol: 'H', atomicNumber: 1, color: 0xffffff, radius: 0.8, mass: 1.008, valence: [1] },\n    C: { name: 'Carbon', symbol: 'C', atomicNumber: 6, color: 0x909090, radius: 1.2, mass: 12.011, valence: [4] },\n    N: { name: 'Nitrogen', symbol: 'N', atomicNumber: 7, color: 0x3050f8, radius: 1.1, mass: 14.007, valence: [3, 4, 5] },\n    O: { name: 'Oxygen', symbol: 'O', atomicNumber: 8, color: 0xff0d0d, radius: 1.0, mass: 15.999, valence: [2] },\n    F: { name: 'Fluorine', symbol: 'F', atomicNumber: 9, color: 0x90e050, radius: 0.9, mass: 18.998, valence: [1] },\n    P: { name: 'Phosphorus', symbol: 'P', atomicNumber: 15, color: 0xff8000, radius: 1.3, mass: 30.974, valence: [3, 5] },\n    S: { name: 'Sulfur', symbol: 'S', atomicNumber: 16, color: 0xffff30, radius: 1.3, mass: 32.06, valence: [2, 4, 6] },\n    Cl: { name: 'Chlorine', symbol: 'Cl', atomicNumber: 17, color: 0x1ff01f, radius: 1.2, mass: 35.45, valence: [1] },\n    Br: { name: 'Bromine', symbol: 'Br', atomicNumber: 35, color: 0xa62929, radius: 1.4, mass: 79.904, valence: [1] },\n    I: { name: 'Iodine', symbol: 'I', atomicNumber: 53, color: 0x940094, radius: 1.6, mass: 126.90, valence: [1] },\n};\n\nexport interface Atom {\n    id: number;\n    element: string; // Symbol\n    x: number;\n    y: number;\n    z: number;\n}\n\nexport interface Bond {\n    id: number;\n    sourceId: number;\n    targetId: number;\n    order: number; // 1, 2, 3\n}\n\nexport interface MoleculeData {\n    atoms: Atom[];\n    bonds: Bond[];\n}\n","'use client';\n\nimport { useEffect, useRef, useState, forwardRef, useImperativeHandle } from 'react';\nimport { MoleculeScene } from '@/lib/Molecule3D';\nimport * as THREE from 'three';\nimport { Atom, Bond, PeriodicTable } from '@/lib/chemistry';\n\ninterface View3DProps {\n    atoms: Atom[];\n    bonds: Bond[];\n    selectedElement?: string | null;\n    onAtomClick?: (id: number) => void;\n    onEmptyClick?: (position: THREE.Vector3) => void;\n}\n\nexport interface View3DHandle {\n    resize: () => void;\n}\n\nconst View3D = forwardRef<View3DHandle, View3DProps>(({ atoms, bonds, selectedElement, onAtomClick, onEmptyClick }, ref) => {\n    const containerRef = useRef<HTMLDivElement>(null);\n    const sceneRef = useRef<MoleculeScene | null>(null);\n    const [hoveredAtom, setHoveredAtom] = useState<Atom | null>(null);\n    const [tooltipPos, setTooltipPos] = useState({ x: 0, y: 0 });\n\n    // Store callbacks in refs to avoid re-creating scene\n    const onAtomClickRef = useRef(onAtomClick);\n    const onEmptyClickRef = useRef(onEmptyClick);\n\n    useEffect(() => {\n        onAtomClickRef.current = onAtomClick;\n    }, [onAtomClick]);\n\n    useEffect(() => {\n        onEmptyClickRef.current = onEmptyClick;\n    }, [onEmptyClick]);\n\n    useImperativeHandle(ref, () => ({\n        resize: () => {\n            if (sceneRef.current && containerRef.current) {\n                const { clientWidth, clientHeight } = containerRef.current;\n                sceneRef.current.resize(clientWidth, clientHeight);\n            }\n        }\n    }));\n\n    useEffect(() => {\n        if (!containerRef.current) return;\n\n        const { clientWidth, clientHeight } = containerRef.current;\n        const scene = new MoleculeScene(\n            containerRef.current,\n            clientWidth,\n            clientHeight,\n            (id) => onAtomClickRef.current?.(id),\n            (pos) => onEmptyClickRef.current?.(pos),\n            (atom) => setHoveredAtom(atom)\n        );\n        sceneRef.current = scene;\n\n        // Resize observer\n        const resizeObserver = new ResizeObserver(() => {\n            if (containerRef.current && sceneRef.current) {\n                const { clientWidth, clientHeight } = containerRef.current;\n                sceneRef.current.resize(clientWidth, clientHeight);\n            }\n        });\n        resizeObserver.observe(containerRef.current);\n\n        return () => {\n            scene.dispose();\n            resizeObserver.disconnect();\n        };\n    }, []); // Only run once\n\n    // Update molecule when props change\n    useEffect(() => {\n        if (sceneRef.current) {\n            sceneRef.current.updateMolecule(atoms, bonds);\n            sceneRef.current.updateGhost(selectedElement || null);\n        }\n    }, [atoms, bonds, selectedElement]);\n\n    // Track mouse for tooltip positioning\n    const handleMouseMove = (e: React.MouseEvent) => {\n        if (containerRef.current) {\n            const rect = containerRef.current.getBoundingClientRect();\n            setTooltipPos({\n                x: e.clientX - rect.left + 15,\n                y: e.clientY - rect.top - 10\n            });\n        }\n    };\n\n    return (\n        <div\n            ref={containerRef}\n            onMouseMove={handleMouseMove}\n            style={{ width: '100%', height: '100%', position: 'relative', cursor: hoveredAtom ? 'pointer' : 'crosshair' }}\n        >\n            {/* Atom Tooltip */}\n            {hoveredAtom && (\n                <div style={{\n                    position: 'absolute',\n                    left: tooltipPos.x,\n                    top: tooltipPos.y,\n                    background: 'rgba(0, 0, 0, 0.9)',\n                    color: '#fff',\n                    padding: '8px 12px',\n                    borderRadius: '8px',\n                    fontSize: '0.85rem',\n                    fontWeight: 600,\n                    pointerEvents: 'none',\n                    zIndex: 100,\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: '8px',\n                    border: '1px solid rgba(255,255,255,0.15)',\n                    boxShadow: '0 4px 12px rgba(0,0,0,0.4)'\n                }}>\n                    <div style={{\n                        width: '14px',\n                        height: '14px',\n                        borderRadius: '50%',\n                        background: `#${PeriodicTable[hoveredAtom.element]?.color.toString(16).padStart(6, '0') || 'ffffff'}`\n                    }} />\n                    <span>{PeriodicTable[hoveredAtom.element]?.name || hoveredAtom.element}</span>\n                    <span style={{ color: '#6b7280', fontWeight: 400, fontSize: '0.75rem' }}>({hoveredAtom.element})</span>\n                </div>\n            )}\n        </div>\n    );\n});\n\nView3D.displayName = 'View3D';\nexport default View3D;\n","/**\n * Enhanced Molecular Validation System\n * Provides comprehensive chemistry validation for PharmaSim\n * \n * Features:\n * - Valence validation with detailed error messages\n * - Graph connectivity analysis\n * - Ring detection (aromatic and aliphatic)\n * - Functional group identification\n * - Expanded molecule recognition database\n * - Molecular weight calculation\n * - Drug-likeness scoring\n * - Educational warnings and hints\n */\n\nimport { Atom, Bond, PeriodicTable, ElementData } from './chemistry';\n\n// ============================================================================\n// Type Definitions\n// ============================================================================\n\nexport interface ValidationResult {\n    valid: boolean;\n    errors: string[];\n    warnings: string[];\n    score: number;\n    name?: string;\n    formula?: string;\n    molecularWeight?: number;\n    functionalGroups?: string[];\n    rings?: RingInfo[];\n    properties?: MoleculeProperties;\n}\n\nexport interface RingInfo {\n    size: number;\n    atomIds: number[];\n    isAromatic: boolean;\n}\n\nexport interface MoleculeProperties {\n    atomCount: number;\n    bondCount: number;\n    heavyAtomCount: number;  // Non-hydrogen atoms\n    rotableBonds: number;\n    hBondDonors: number;     // OH, NH groups\n    hBondAcceptors: number;  // O, N atoms\n    isConnected: boolean;\n    hasAromaticRing: boolean;\n    complexity: number;      // 1-100 scale\n}\n\nexport interface FunctionalGroup {\n    name: string;\n    displayName: string;\n    pattern: (atoms: Atom[], bonds: Bond[], graph: Map<number, number[]>) => number;  // Returns count\n    icon: string;\n    drugRelevance: string;\n}\n\n// ============================================================================\n// Molecule Recognition Database\n// ============================================================================\n\ninterface MoleculeEntry {\n    formula: string;\n    name: string;\n    score: number;\n    category: 'simple' | 'organic' | 'drug' | 'biomolecule';\n    description?: string;\n}\n\nconst MOLECULE_DATABASE: MoleculeEntry[] = [\n    // Simple molecules\n    { formula: 'H2', name: 'Hydrogen Gas', score: 10, category: 'simple' },\n    { formula: 'O2', name: 'Oxygen Gas', score: 10, category: 'simple' },\n    { formula: 'N2', name: 'Nitrogen Gas', score: 10, category: 'simple' },\n    { formula: 'H2O', name: 'Water', score: 30, category: 'simple', description: 'Universal solvent' },\n    { formula: 'CO2', name: 'Carbon Dioxide', score: 40, category: 'simple' },\n    { formula: 'NH3', name: 'Ammonia', score: 35, category: 'simple' },\n    { formula: 'HCl', name: 'Hydrochloric Acid', score: 25, category: 'simple' },\n    { formula: 'HF', name: 'Hydrofluoric Acid', score: 25, category: 'simple' },\n    { formula: 'H2S', name: 'Hydrogen Sulfide', score: 30, category: 'simple' },\n\n    // Basic organic\n    { formula: 'CH4', name: 'Methane', score: 50, category: 'organic', description: 'Simplest alkane' },\n    { formula: 'C2H6', name: 'Ethane', score: 60, category: 'organic' },\n    { formula: 'C3H8', name: 'Propane', score: 70, category: 'organic' },\n    { formula: 'C4H10', name: 'Butane', score: 80, category: 'organic' },\n    { formula: 'C2H4', name: 'Ethylene', score: 65, category: 'organic', description: 'Simplest alkene' },\n    { formula: 'C2H2', name: 'Acetylene', score: 70, category: 'organic', description: 'Simplest alkyne' },\n    { formula: 'C6H6', name: 'Benzene', score: 150, category: 'organic', description: 'Aromatic ring' },\n\n    // Alcohols\n    { formula: 'CH4O', name: 'Methanol', score: 80, category: 'organic' },\n    { formula: 'C2H6O', name: 'Ethanol', score: 100, category: 'organic', description: 'Drinking alcohol' },\n    { formula: 'C3H8O', name: 'Propanol', score: 110, category: 'organic' },\n    { formula: 'C3H8O3', name: 'Glycerol', score: 140, category: 'organic' },\n\n    // Aldehydes & Ketones\n    { formula: 'CH2O', name: 'Formaldehyde', score: 70, category: 'organic' },\n    { formula: 'C2H4O', name: 'Acetaldehyde', score: 85, category: 'organic' },\n    { formula: 'C3H6O', name: 'Acetone', score: 95, category: 'organic' },\n\n    // Carboxylic Acids\n    { formula: 'CH2O2', name: 'Formic Acid', score: 75, category: 'organic' },\n    { formula: 'C2H4O2', name: 'Acetic Acid', score: 90, category: 'organic', description: 'Vinegar' },\n    { formula: 'C3H6O2', name: 'Propionic Acid', score: 100, category: 'organic' },\n\n    // Amines\n    { formula: 'CH5N', name: 'Methylamine', score: 70, category: 'organic' },\n    { formula: 'C2H7N', name: 'Ethylamine', score: 80, category: 'organic' },\n    { formula: 'C6H7N', name: 'Aniline', score: 130, category: 'organic' },\n\n    // Pharmaceuticals\n    { formula: 'C8H9NO2', name: 'Paracetamol', score: 300, category: 'drug', description: 'Acetaminophen - analgesic' },\n    { formula: 'C9H8O4', name: 'Aspirin', score: 350, category: 'drug', description: 'Acetylsalicylic acid - NSAID' },\n    { formula: 'C13H18O2', name: 'Ibuprofen', score: 400, category: 'drug', description: 'NSAID anti-inflammatory' },\n    { formula: 'C8H10N4O2', name: 'Caffeine', score: 450, category: 'drug', description: 'Stimulant' },\n    { formula: 'C17H19NO3', name: 'Morphine', score: 500, category: 'drug', description: 'Opioid analgesic' },\n    { formula: 'C16H18N2O4S', name: 'Penicillin G', score: 550, category: 'drug', description: 'Beta-lactam antibiotic' },\n    { formula: 'C10H15N', name: 'Amphetamine', score: 380, category: 'drug' },\n    { formula: 'C20H25N3O', name: 'LSD', score: 600, category: 'drug' },\n    { formula: 'C21H23NO5', name: 'Codeine', score: 480, category: 'drug' },\n    { formula: 'C14H18N2O5', name: 'Aspartame', score: 350, category: 'organic' },\n\n    // Biomolecules\n    { formula: 'C6H12O6', name: 'Glucose', score: 250, category: 'biomolecule', description: 'Simple sugar' },\n    { formula: 'C5H10O5', name: 'Ribose', score: 220, category: 'biomolecule' },\n    { formula: 'C4H8N2O3', name: 'Asparagine', score: 280, category: 'biomolecule', description: 'Amino acid' },\n    { formula: 'C5H9NO4', name: 'Glutamic Acid', score: 290, category: 'biomolecule', description: 'Amino acid' },\n    { formula: 'C3H7NO2', name: 'Alanine', score: 200, category: 'biomolecule', description: 'Simple amino acid' },\n    { formula: 'C2H5NO2', name: 'Glycine', score: 180, category: 'biomolecule', description: 'Simplest amino acid' },\n\n    // Solvents & Industrial\n    { formula: 'CHCl3', name: 'Chloroform', score: 120, category: 'organic' },\n    { formula: 'CCl4', name: 'Carbon Tetrachloride', score: 110, category: 'organic' },\n    { formula: 'C4H8O2', name: 'Ethyl Acetate', score: 130, category: 'organic', description: 'Common solvent' },\n];\n\n// ============================================================================\n// Functional Group Definitions\n// ============================================================================\n\nconst FUNCTIONAL_GROUPS: FunctionalGroup[] = [\n    {\n        name: 'hydroxyl',\n        displayName: 'Hydroxyl (-OH)',\n        icon: 'üíß',\n        drugRelevance: 'Increases water solubility',\n        pattern: (atoms, bonds, graph) => {\n            let count = 0;\n            atoms.forEach(atom => {\n                if (atom.element === 'O') {\n                    const neighbors = graph.get(atom.id) || [];\n                    const bondInfo = getBondInfo(atom.id, bonds);\n                    // Single-bonded oxygen with one H neighbor\n                    if (bondInfo.totalOrder === 2) {\n                        const hasH = neighbors.some(nId => atoms.find(a => a.id === nId)?.element === 'H');\n                        const hasC = neighbors.some(nId => atoms.find(a => a.id === nId)?.element === 'C');\n                        if (hasH && hasC) count++;\n                    }\n                }\n            });\n            return count;\n        }\n    },\n    {\n        name: 'carbonyl',\n        displayName: 'Carbonyl (C=O)',\n        icon: '‚öóÔ∏è',\n        drugRelevance: 'Reactive center, H-bond acceptor',\n        pattern: (atoms, bonds) => {\n            let count = 0;\n            bonds.forEach(bond => {\n                if (bond.order === 2) {\n                    const source = atoms.find(a => a.id === bond.sourceId);\n                    const target = atoms.find(a => a.id === bond.targetId);\n                    if ((source?.element === 'C' && target?.element === 'O') ||\n                        (source?.element === 'O' && target?.element === 'C')) {\n                        count++;\n                    }\n                }\n            });\n            return count;\n        }\n    },\n    {\n        name: 'carboxyl',\n        displayName: 'Carboxyl (-COOH)',\n        icon: 'üß™',\n        drugRelevance: 'Acidic, increases solubility',\n        pattern: (atoms, bonds, graph) => {\n            let count = 0;\n            // Find C atoms double-bonded to O and single-bonded to OH\n            atoms.forEach(atom => {\n                if (atom.element === 'C') {\n                    const neighbors = graph.get(atom.id) || [];\n                    const neighborAtoms = neighbors.map(nId => atoms.find(a => a.id === nId)).filter(Boolean);\n\n                    const hasDoubleBondO = bonds.some(b => {\n                        if (b.order !== 2) return false;\n                        const otherId = b.sourceId === atom.id ? b.targetId : (b.targetId === atom.id ? b.sourceId : null);\n                        if (!otherId) return false;\n                        return atoms.find(a => a.id === otherId)?.element === 'O';\n                    });\n\n                    const hasSingleBondOH = neighborAtoms.some(neighbor => {\n                        if (neighbor?.element !== 'O') return false;\n                        const oNeighbors = graph.get(neighbor.id) || [];\n                        return oNeighbors.some(onId => atoms.find(a => a.id === onId)?.element === 'H');\n                    });\n\n                    if (hasDoubleBondO && hasSingleBondOH) count++;\n                }\n            });\n            return count;\n        }\n    },\n    {\n        name: 'amine',\n        displayName: 'Amine (-NH‚ÇÇ/-NHR)',\n        icon: 'üîµ',\n        drugRelevance: 'Basic, H-bond donor',\n        pattern: (atoms, bonds, graph) => {\n            let count = 0;\n            atoms.forEach(atom => {\n                if (atom.element === 'N') {\n                    const neighbors = graph.get(atom.id) || [];\n                    const hasH = neighbors.some(nId => atoms.find(a => a.id === nId)?.element === 'H');\n                    const bondInfo = getBondInfo(atom.id, bonds);\n                    // Primary or secondary amine (not in amide)\n                    if (hasH && bondInfo.totalOrder <= 3) {\n                        const hasDoubleBondC = bonds.some(b => {\n                            if (b.order !== 2) return false;\n                            const otherId = b.sourceId === atom.id ? b.targetId : (b.targetId === atom.id ? b.sourceId : null);\n                            return otherId && atoms.find(a => a.id === otherId)?.element === 'C';\n                        });\n                        if (!hasDoubleBondC) count++;\n                    }\n                }\n            });\n            return count;\n        }\n    },\n    {\n        name: 'amide',\n        displayName: 'Amide (-CONH‚ÇÇ)',\n        icon: 'üîó',\n        drugRelevance: 'Peptide bond mimic, stable',\n        pattern: (atoms, bonds, graph) => {\n            let count = 0;\n            atoms.forEach(atom => {\n                if (atom.element === 'C') {\n                    const neighbors = graph.get(atom.id) || [];\n                    const hasDoubleBondO = bonds.some(b => {\n                        if (b.order !== 2) return false;\n                        const otherId = b.sourceId === atom.id ? b.targetId : (b.targetId === atom.id ? b.sourceId : null);\n                        return otherId && atoms.find(a => a.id === otherId)?.element === 'O';\n                    });\n                    const hasSingleBondN = neighbors.some(nId => {\n                        const neighbor = atoms.find(a => a.id === nId);\n                        if (neighbor?.element !== 'N') return false;\n                        const bond = bonds.find(b =>\n                            (b.sourceId === atom.id && b.targetId === nId) ||\n                            (b.targetId === atom.id && b.sourceId === nId)\n                        );\n                        return bond?.order === 1;\n                    });\n                    if (hasDoubleBondO && hasSingleBondN) count++;\n                }\n            });\n            return count;\n        }\n    },\n    {\n        name: 'ether',\n        displayName: 'Ether (C-O-C)',\n        icon: '‚≠ï',\n        drugRelevance: 'Increases lipophilicity',\n        pattern: (atoms, bonds, graph) => {\n            let count = 0;\n            atoms.forEach(atom => {\n                if (atom.element === 'O') {\n                    const neighbors = graph.get(atom.id) || [];\n                    const bondInfo = getBondInfo(atom.id, bonds);\n                    // O bonded to exactly 2 carbons with single bonds\n                    if (bondInfo.totalOrder === 2 && neighbors.length === 2) {\n                        const allCarbon = neighbors.every(nId => atoms.find(a => a.id === nId)?.element === 'C');\n                        if (allCarbon) count++;\n                    }\n                }\n            });\n            return count;\n        }\n    },\n    {\n        name: 'ester',\n        displayName: 'Ester (-COO-)',\n        icon: 'üçã',\n        drugRelevance: 'Prodrug linkage, good absorption',\n        pattern: (atoms, bonds, graph) => {\n            let count = 0;\n            atoms.forEach(atom => {\n                if (atom.element === 'C') {\n                    const neighbors = graph.get(atom.id) || [];\n                    let hasDoubleBondO = false;\n                    let hasSingleBondOC = false;\n\n                    neighbors.forEach(nId => {\n                        const neighbor = atoms.find(a => a.id === nId);\n                        if (!neighbor) return;\n\n                        const bond = bonds.find(b =>\n                            (b.sourceId === atom.id && b.targetId === nId) ||\n                            (b.targetId === atom.id && b.sourceId === nId)\n                        );\n\n                        if (neighbor.element === 'O' && bond?.order === 2) {\n                            hasDoubleBondO = true;\n                        }\n                        if (neighbor.element === 'O' && bond?.order === 1) {\n                            // Check if this O is connected to C (not H)\n                            const oNeighbors = graph.get(nId) || [];\n                            const connectedToC = oNeighbors.some(onId =>\n                                onId !== atom.id && atoms.find(a => a.id === onId)?.element === 'C'\n                            );\n                            if (connectedToC) hasSingleBondOC = true;\n                        }\n                    });\n\n                    if (hasDoubleBondO && hasSingleBondOC) count++;\n                }\n            });\n            return count;\n        }\n    },\n    {\n        name: 'halogen',\n        displayName: 'Halogen (F/Cl/Br/I)',\n        icon: 'üü¢',\n        drugRelevance: 'Metabolic stability, lipophilicity',\n        pattern: (atoms) => {\n            return atoms.filter(a => ['F', 'Cl', 'Br', 'I'].includes(a.element)).length;\n        }\n    },\n    {\n        name: 'thiol',\n        displayName: 'Thiol (-SH)',\n        icon: 'üü°',\n        drugRelevance: 'Reactive, covalent drug target',\n        pattern: (atoms, bonds, graph) => {\n            let count = 0;\n            atoms.forEach(atom => {\n                if (atom.element === 'S') {\n                    const neighbors = graph.get(atom.id) || [];\n                    const hasH = neighbors.some(nId => atoms.find(a => a.id === nId)?.element === 'H');\n                    if (hasH) count++;\n                }\n            });\n            return count;\n        }\n    },\n    {\n        name: 'phosphate',\n        displayName: 'Phosphate (-PO‚ÇÑ)',\n        icon: 'üü†',\n        drugRelevance: 'Energy transfer, nucleotides',\n        pattern: (atoms, bonds, graph) => {\n            let count = 0;\n            atoms.forEach(atom => {\n                if (atom.element === 'P') {\n                    const neighbors = graph.get(atom.id) || [];\n                    const oxygenCount = neighbors.filter(nId =>\n                        atoms.find(a => a.id === nId)?.element === 'O'\n                    ).length;\n                    if (oxygenCount >= 3) count++;\n                }\n            });\n            return count;\n        }\n    }\n];\n\n// ============================================================================\n// Helper Functions\n// ============================================================================\n\nfunction getBondInfo(atomId: number, bonds: Bond[]): { count: number; totalOrder: number } {\n    const atomBonds = bonds.filter(b => b.sourceId === atomId || b.targetId === atomId);\n    return {\n        count: atomBonds.length,\n        totalOrder: atomBonds.reduce((acc, b) => acc + b.order, 0)\n    };\n}\n\nfunction buildAdjacencyGraph(atoms: Atom[], bonds: Bond[]): Map<number, number[]> {\n    const graph = new Map<number, number[]>();\n    atoms.forEach(atom => graph.set(atom.id, []));\n\n    bonds.forEach(bond => {\n        graph.get(bond.sourceId)?.push(bond.targetId);\n        graph.get(bond.targetId)?.push(bond.sourceId);\n    });\n\n    return graph;\n}\n\nfunction isConnected(atoms: Atom[], graph: Map<number, number[]>): boolean {\n    if (atoms.length === 0) return true;\n    if (atoms.length === 1) return true;\n\n    const visited = new Set<number>();\n    const queue: number[] = [atoms[0].id];\n\n    while (queue.length > 0) {\n        const current = queue.shift()!;\n        if (visited.has(current)) continue;\n        visited.add(current);\n\n        const neighbors = graph.get(current) || [];\n        neighbors.forEach(n => {\n            if (!visited.has(n)) queue.push(n);\n        });\n    }\n\n    return visited.size === atoms.length;\n}\n\nfunction findRings(atoms: Atom[], bonds: Bond[], graph: Map<number, number[]>): RingInfo[] {\n    const rings: RingInfo[] = [];\n    const visited = new Set<number>();\n\n    // Simple ring detection using DFS with parent tracking\n    function dfs(nodeId: number, parentId: number | null, path: number[]): void {\n        if (path.length > 7) return; // Limit to reasonable ring sizes\n\n        const neighbors = graph.get(nodeId) || [];\n\n        for (const neighborId of neighbors) {\n            if (neighborId === parentId) continue;\n\n            const pathIndex = path.indexOf(neighborId);\n            if (pathIndex !== -1) {\n                // Found a ring\n                const ringAtoms = path.slice(pathIndex);\n                const ringSize = ringAtoms.length;\n\n                // Only accept 3-7 membered rings\n                if (ringSize >= 3 && ringSize <= 7) {\n                    // Check if this ring is already found (by sorting atom IDs)\n                    const sortedRing = [...ringAtoms].sort((a, b) => a - b).join(',');\n                    const isNewRing = !rings.some(r =>\n                        [...r.atomIds].sort((a, b) => a - b).join(',') === sortedRing\n                    );\n\n                    if (isNewRing) {\n                        const isAromatic = checkAromaticity(ringAtoms, atoms, bonds);\n                        rings.push({ size: ringSize, atomIds: ringAtoms, isAromatic });\n                    }\n                }\n            } else if (!visited.has(neighborId)) {\n                dfs(neighborId, nodeId, [...path, neighborId]);\n            }\n        }\n    }\n\n    atoms.forEach(atom => {\n        if (!visited.has(atom.id)) {\n            dfs(atom.id, null, [atom.id]);\n            visited.add(atom.id);\n        }\n    });\n\n    return rings;\n}\n\nfunction checkAromaticity(ringAtomIds: number[], atoms: Atom[], bonds: Bond[]): boolean {\n    // Simple aromaticity check: \n    // - Ring must be planar (we assume this)\n    // - All atoms in ring should be C or N\n    // - Should have alternating single/double bonds or be all aromatic\n\n    if (ringAtomIds.length !== 6 && ringAtomIds.length !== 5) return false;\n\n    const ringAtoms = ringAtomIds.map(id => atoms.find(a => a.id === id)).filter(Boolean);\n    if (ringAtoms.length !== ringAtomIds.length) return false;\n\n    // Check if all non-H elements (C, N for simple aromatic)\n    const validElements = ['C', 'N', 'O', 'S'];\n    if (!ringAtoms.every(a => validElements.includes(a!.element))) return false;\n\n    // Count double bonds in ring\n    let doubleBondCount = 0;\n    for (let i = 0; i < ringAtomIds.length; i++) {\n        const a1 = ringAtomIds[i];\n        const a2 = ringAtomIds[(i + 1) % ringAtomIds.length];\n        const bond = bonds.find(b =>\n            (b.sourceId === a1 && b.targetId === a2) ||\n            (b.sourceId === a2 && b.targetId === a1)\n        );\n        if (bond?.order === 2) doubleBondCount++;\n    }\n\n    // For 6-membered ring: should have 3 double bonds (benzene-like)\n    // For 5-membered ring: should have 2 double bonds (furan/pyrrole-like)\n    if (ringAtomIds.length === 6 && doubleBondCount >= 2) return true;\n    if (ringAtomIds.length === 5 && doubleBondCount >= 2) return true;\n\n    return false;\n}\n\nfunction getFormula(atoms: Atom[]): string {\n    const counts: Record<string, number> = {};\n    atoms.forEach(a => {\n        counts[a.element] = (counts[a.element] || 0) + 1;\n    });\n\n    // Hill system: C first, then H, then alphabetical\n    const keys = Object.keys(counts).sort((a, b) => {\n        if (a === 'C') return -1;\n        if (b === 'C') return 1;\n        if (a === 'H') return -1;\n        if (b === 'H') return 1;\n        return a.localeCompare(b);\n    });\n\n    return keys.map(k => `${k}${counts[k] > 1 ? counts[k] : ''}`).join('');\n}\n\nfunction calculateMolecularWeight(atoms: Atom[]): number {\n    return atoms.reduce((sum, atom) => {\n        const element = PeriodicTable[atom.element];\n        return sum + (element?.mass || 0);\n    }, 0);\n}\n\nfunction countRotatableBonds(atoms: Atom[], bonds: Bond[], graph: Map<number, number[]>): number {\n    // Rotatable bonds: single bonds between non-terminal, non-ring atoms\n    let count = 0;\n\n    bonds.forEach(bond => {\n        if (bond.order !== 1) return;\n\n        const source = atoms.find(a => a.id === bond.sourceId);\n        const target = atoms.find(a => a.id === bond.targetId);\n\n        if (!source || !target) return;\n\n        // Exclude H atoms\n        if (source.element === 'H' || target.element === 'H') return;\n\n        // Exclude terminal atoms (only one neighbor)\n        const sourceNeighbors = graph.get(source.id)?.length || 0;\n        const targetNeighbors = graph.get(target.id)?.length || 0;\n\n        if (sourceNeighbors > 1 && targetNeighbors > 1) {\n            count++;\n        }\n    });\n\n    return count;\n}\n\nfunction countHBondDonors(atoms: Atom[], graph: Map<number, number[]>): number {\n    // H-bond donors: OH, NH groups\n    let count = 0;\n\n    atoms.forEach(atom => {\n        if (atom.element === 'O' || atom.element === 'N') {\n            const neighbors = graph.get(atom.id) || [];\n            const hasH = neighbors.some(nId =>\n                atoms.find(a => a.id === nId)?.element === 'H'\n            );\n            if (hasH) count++;\n        }\n    });\n\n    return count;\n}\n\nfunction countHBondAcceptors(atoms: Atom[]): number {\n    // H-bond acceptors: O and N atoms\n    return atoms.filter(a => a.element === 'O' || a.element === 'N').length;\n}\n\nfunction calculateComplexity(atoms: Atom[], bonds: Bond[], rings: RingInfo[], functionalGroupCount: number): number {\n    // Complexity score: 0-100\n    const atomScore = Math.min(atoms.length * 2, 30);\n    const bondScore = Math.min(bonds.length * 1.5, 20);\n    const ringScore = Math.min(rings.length * 10, 25);\n    const aromaticBonus = rings.filter(r => r.isAromatic).length * 5;\n    const fgScore = Math.min(functionalGroupCount * 5, 20);\n\n    return Math.min(100, Math.round(atomScore + bondScore + ringScore + aromaticBonus + fgScore));\n}\n\n// ============================================================================\n// Main Validation Function\n// ============================================================================\n\nexport function validateMolecule(atoms: Atom[], bonds: Bond[]): ValidationResult {\n    const errors: string[] = [];\n    const warnings: string[] = [];\n    let score = 0;\n\n    // Empty check\n    if (atoms.length === 0) {\n        return {\n            valid: false,\n            errors: ['Molecule is empty'],\n            warnings: [],\n            score: 0\n        };\n    }\n\n    // Build adjacency graph\n    const graph = buildAdjacencyGraph(atoms, bonds);\n\n    // ========== Connectivity Check ==========\n    const connected = isConnected(atoms, graph);\n    if (!connected) {\n        warnings.push('‚ö†Ô∏è Molecule has disconnected fragments');\n    }\n\n    // ========== Valence Validation ==========\n    let allValenceSatisfied = true;\n\n    atoms.forEach(atom => {\n        const bondInfo = getBondInfo(atom.id, bonds);\n        const elementData = PeriodicTable[atom.element];\n\n        if (!elementData) {\n            errors.push(`Unknown element: ${atom.element}`);\n            allValenceSatisfied = false;\n            return;\n        }\n\n        const satisfies = elementData.valence.includes(bondInfo.totalOrder);\n\n        if (!satisfies) {\n            allValenceSatisfied = false;\n            const atomLabel = `${elementData.name} #${atom.id.toString().slice(-4)}`;\n            const current = bondInfo.totalOrder;\n            const needed = elementData.valence.join(' or ');\n\n            if (current === 0) {\n                errors.push(`${atomLabel} has no bonds (needs ${needed})`);\n            } else if (current < Math.min(...elementData.valence)) {\n                errors.push(`${atomLabel} needs more bonds: has ${current}, needs ${needed}`);\n            } else if (current > Math.max(...elementData.valence)) {\n                errors.push(`${atomLabel} has too many bonds: has ${current}, max is ${Math.max(...elementData.valence)}`);\n            } else {\n                errors.push(`${atomLabel} has ${current} bonds (needs exactly ${needed})`);\n            }\n        }\n\n        // Warning for unusual valence states\n        if (atom.element === 'C' && bondInfo.totalOrder === 3) {\n            warnings.push(`Carbon atom may be a carbocation (unstable)`);\n        }\n    });\n\n    // ========== Ring Detection ==========\n    const rings = findRings(atoms, bonds, graph);\n\n    // Check for strained rings\n    rings.forEach(ring => {\n        if (ring.size === 3) {\n            warnings.push(`‚ö†Ô∏è 3-membered ring detected (high ring strain)`);\n        } else if (ring.size === 4) {\n            warnings.push(`‚ö†Ô∏è 4-membered ring detected (moderate ring strain)`);\n        }\n    });\n\n    // ========== Functional Group Detection ==========\n    const detectedGroups: string[] = [];\n    let totalFGCount = 0;\n\n    FUNCTIONAL_GROUPS.forEach(fg => {\n        const count = fg.pattern(atoms, bonds, graph);\n        if (count > 0) {\n            totalFGCount += count;\n            detectedGroups.push(`${fg.icon} ${fg.displayName}${count > 1 ? ` (√ó${count})` : ''}`);\n        }\n    });\n\n    // ========== Calculate Properties ==========\n    const formula = getFormula(atoms);\n    const molecularWeight = calculateMolecularWeight(atoms);\n    const heavyAtomCount = atoms.filter(a => a.element !== 'H').length;\n    const rotableBonds = countRotatableBonds(atoms, bonds, graph);\n    const hBondDonors = countHBondDonors(atoms, graph);\n    const hBondAcceptors = countHBondAcceptors(atoms);\n    const hasAromaticRing = rings.some(r => r.isAromatic);\n    const complexity = calculateComplexity(atoms, bonds, rings, totalFGCount);\n\n    const properties: MoleculeProperties = {\n        atomCount: atoms.length,\n        bondCount: bonds.length,\n        heavyAtomCount,\n        rotableBonds,\n        hBondDonors,\n        hBondAcceptors,\n        isConnected: connected,\n        hasAromaticRing,\n        complexity\n    };\n\n    // ========== Molecule Recognition ==========\n    let name: string | undefined;\n\n    if (allValenceSatisfied) {\n        const match = MOLECULE_DATABASE.find(m => m.formula === formula);\n\n        if (match) {\n            name = match.name;\n            score = match.score;\n\n            if (match.description) {\n                warnings.unshift(`üíä ${match.description}`);\n            }\n        } else {\n            name = \"Valid Unknown Compound\";\n            // Calculate score based on complexity\n            score = Math.round(\n                atoms.length * 8 +\n                rings.length * 20 +\n                totalFGCount * 15 +\n                (hasAromaticRing ? 50 : 0)\n            );\n        }\n\n        // Bonus for aromatic compounds\n        if (hasAromaticRing) {\n            warnings.unshift('üîµ Contains aromatic ring system');\n        }\n\n        // Drug-likeness check (Lipinski's Rule of 5)\n        if (molecularWeight <= 500 && hBondDonors <= 5 && hBondAcceptors <= 10) {\n            if (heavyAtomCount >= 5) {\n                warnings.unshift('‚úÖ Passes Lipinski drug-likeness criteria');\n                score += 25;\n            }\n        } else if (molecularWeight > 500) {\n            warnings.push('‚ö†Ô∏è Molecular weight >500 (may have poor absorption)');\n        }\n    }\n\n    return {\n        valid: allValenceSatisfied,\n        errors,\n        warnings,\n        score,\n        name,\n        formula,\n        molecularWeight: Math.round(molecularWeight * 100) / 100,\n        functionalGroups: detectedGroups,\n        rings,\n        properties\n    };\n}\n\n// ============================================================================\n// Utility Exports\n// ============================================================================\n\nexport { getFormula, calculateMolecularWeight };\n","/**\n * SMILES Parser - Converts SMILES notation to 3D molecular structures\n * \n * Supported features:\n * - Organic subset atoms: B, C, N, O, P, S, F, Cl, Br, I\n * - Bracket atoms: [NH4+], [O-], [13C], etc.\n * - Bond types: - (single), = (double), # (triple)\n * - Branches: parentheses ()\n * - Ring closures: numeric digits 1-9, %10-%99\n * - Aromatic atoms: lowercase c, n, o, s\n * - Implicit hydrogens (added automatically)\n * \n * Limitations:\n * - Stereochemistry (@, @@, /, \\) is parsed but not applied to 3D\n * - Charges are parsed but not used in rendering\n * - Isotopes are parsed but not used\n */\n\nimport { Atom, Bond, PeriodicTable } from './chemistry';\n\n// ============================================================================\n// Types\n// ============================================================================\n\ninterface ParsedAtom {\n    element: string;\n    aromatic: boolean;\n    charge: number;\n    hCount: number | null;  // Explicit H count, null means implicit\n    isotope: number | null;\n}\n\ninterface ParserState {\n    pos: number;\n    atoms: ParsedAtom[];\n    bonds: Array<{ source: number; target: number; order: number }>;\n    ringClosures: Map<number, { atomIndex: number; bondOrder: number }>;\n    branchStack: number[];  // Stack of atom indices for branch returns\n    lastAtomIndex: number;\n    pendingBondOrder: number;\n}\n\nexport interface SmilesParseResult {\n    success: boolean;\n    atoms: Atom[];\n    bonds: Bond[];\n    error?: string;\n}\n\n// ============================================================================\n// Element Data for Valence\n// ============================================================================\n\nconst VALENCE_MAP: Record<string, number[]> = {\n    'H': [1],\n    'B': [3],\n    'C': [4],\n    'N': [3, 4, 5],\n    'O': [2],\n    'P': [3, 5],\n    'S': [2, 4, 6],\n    'F': [1],\n    'Cl': [1],\n    'Br': [1],\n    'I': [1],\n};\n\n// Organic subset - atoms that can appear without brackets\nconst ORGANIC_SUBSET = new Set(['B', 'C', 'N', 'O', 'P', 'S', 'F', 'Cl', 'Br', 'I']);\n\n// Aromatic atoms (lowercase in SMILES)\nconst AROMATIC_ATOMS: Record<string, string> = {\n    'c': 'C',\n    'n': 'N',\n    'o': 'O',\n    's': 'S',\n    'p': 'P',\n};\n\n// ============================================================================\n// Parser Functions\n// ============================================================================\n\nfunction peek(smiles: string, state: ParserState): string {\n    return smiles[state.pos] || '';\n}\n\nfunction consume(smiles: string, state: ParserState): string {\n    return smiles[state.pos++] || '';\n}\n\nfunction parseNumber(smiles: string, state: ParserState): number | null {\n    let numStr = '';\n    while (state.pos < smiles.length && /[0-9]/.test(smiles[state.pos])) {\n        numStr += consume(smiles, state);\n    }\n    return numStr ? parseInt(numStr, 10) : null;\n}\n\nfunction parseBracketAtom(smiles: string, state: ParserState): ParsedAtom | null {\n    // Assumes '[' has been consumed\n    let isotope: number | null = null;\n    let element = '';\n    let aromatic = false;\n    let hCount: number | null = null;\n    let charge = 0;\n\n    // Isotope (optional)\n    const isoNum = parseNumber(smiles, state);\n    if (isoNum !== null) isotope = isoNum;\n\n    // Element symbol (1-2 chars)\n    const first = consume(smiles, state);\n    if (!first) return null;\n\n    if (first === first.toLowerCase() && AROMATIC_ATOMS[first]) {\n        aromatic = true;\n        element = AROMATIC_ATOMS[first];\n    } else {\n        element = first.toUpperCase();\n        // Check for two-character elements\n        const next = peek(smiles, state);\n        if (next && next === next.toLowerCase() && /[a-z]/.test(next)) {\n            element += consume(smiles, state);\n        }\n    }\n\n    // Parse remaining bracket contents\n    while (state.pos < smiles.length && peek(smiles, state) !== ']') {\n        const char = peek(smiles, state);\n\n        if (char === 'H') {\n            consume(smiles, state);\n            const num = parseNumber(smiles, state);\n            hCount = num !== null ? num : 1;\n        } else if (char === '+') {\n            consume(smiles, state);\n            const num = parseNumber(smiles, state);\n            charge = num !== null ? num : 1;\n        } else if (char === '-') {\n            consume(smiles, state);\n            const num = parseNumber(smiles, state);\n            charge = -(num !== null ? num : 1);\n        } else if (char === '@') {\n            // Skip stereochemistry\n            consume(smiles, state);\n            if (peek(smiles, state) === '@') consume(smiles, state);\n        } else {\n            // Skip unknown characters\n            consume(smiles, state);\n        }\n    }\n\n    // Consume closing bracket\n    if (peek(smiles, state) === ']') consume(smiles, state);\n\n    return { element, aromatic, charge, hCount, isotope };\n}\n\nfunction parseOrganicAtom(smiles: string, state: ParserState): ParsedAtom | null {\n    const char = peek(smiles, state);\n\n    // Check for aromatic atoms\n    if (AROMATIC_ATOMS[char]) {\n        consume(smiles, state);\n        return { element: AROMATIC_ATOMS[char], aromatic: true, charge: 0, hCount: null, isotope: null };\n    }\n\n    // Check for two-character elements first (Cl, Br)\n    const twoChar = smiles.slice(state.pos, state.pos + 2);\n    if (twoChar === 'Cl' || twoChar === 'Br') {\n        state.pos += 2;\n        return { element: twoChar, aromatic: false, charge: 0, hCount: null, isotope: null };\n    }\n\n    // Single character organic subset\n    const upper = char.toUpperCase();\n    if (ORGANIC_SUBSET.has(upper) && char === upper) {\n        consume(smiles, state);\n        return { element: upper, aromatic: false, charge: 0, hCount: null, isotope: null };\n    }\n\n    return null;\n}\n\nfunction parseBondOrder(smiles: string, state: ParserState): number {\n    const char = peek(smiles, state);\n\n    switch (char) {\n        case '-': consume(smiles, state); return 1;\n        case '=': consume(smiles, state); return 2;\n        case '#': consume(smiles, state); return 3;\n        case ':': consume(smiles, state); return 1; // Aromatic bond treated as single\n        default: return 0; // Implicit bond\n    }\n}\n\nfunction parseRingClosure(smiles: string, state: ParserState): number | null {\n    const char = peek(smiles, state);\n\n    // Single digit ring\n    if (/[0-9]/.test(char)) {\n        consume(smiles, state);\n        return parseInt(char, 10);\n    }\n\n    // Double digit ring (%XX)\n    if (char === '%') {\n        consume(smiles, state);\n        const num = parseNumber(smiles, state);\n        return num;\n    }\n\n    return null;\n}\n\nfunction addBond(state: ParserState, source: number, target: number, order: number) {\n    // Avoid duplicate bonds\n    const exists = state.bonds.some(b =>\n        (b.source === source && b.target === target) ||\n        (b.source === target && b.target === source)\n    );\n    if (!exists && source !== target && source >= 0 && target >= 0) {\n        state.bonds.push({ source, target, order });\n    }\n}\n\nfunction calculateImplicitHydrogens(parsedAtoms: ParsedAtom[], bonds: Array<{ source: number; target: number; order: number }>): number[] {\n    return parsedAtoms.map((atom, idx) => {\n        // If explicit H count is specified, use it\n        if (atom.hCount !== null) return atom.hCount;\n\n        // Calculate current bond order sum\n        const bondOrderSum = bonds\n            .filter(b => b.source === idx || b.target === idx)\n            .reduce((sum, b) => sum + b.order, 0);\n\n        // Get target valence\n        const valences = VALENCE_MAP[atom.element] || [0];\n        const targetValence = valences.find(v => v >= bondOrderSum) || valences[valences.length - 1];\n\n        // Aromatic atoms typically have one less hydrogen\n        const aromaticAdjust = atom.aromatic ? 1 : 0;\n\n        return Math.max(0, targetValence - bondOrderSum - aromaticAdjust);\n    });\n}\n\n// ============================================================================\n// 3D Coordinate Generation (Enhanced with VSEPR & Chemistry-Aware Layout)\n// ============================================================================\n\n// Standard bond lengths in Angstroms (approximate)\nconst BOND_LENGTHS: Record<string, number> = {\n    'C-C': 1.54, 'C=C': 1.34, 'C#C': 1.20,\n    'C-N': 1.47, 'C=N': 1.29, 'C#N': 1.16,\n    'C-O': 1.43, 'C=O': 1.23,\n    'C-S': 1.82, 'C=S': 1.71,\n    'C-H': 1.09,\n    'C-F': 1.35, 'C-Cl': 1.77, 'C-Br': 1.94, 'C-I': 2.14,\n    'N-N': 1.45, 'N=N': 1.25, 'N#N': 1.10,\n    'N-O': 1.40, 'N=O': 1.21,\n    'N-H': 1.01,\n    'O-O': 1.48, 'O=O': 1.21,\n    'O-H': 0.96,\n    'S-S': 2.05, 'S-H': 1.34,\n    'P-O': 1.63, 'P=O': 1.48,\n    'P-H': 1.42,\n    'DEFAULT': 1.50\n};\n\n// Get bond length for a pair of elements\nfunction getBondLength(elem1: string, elem2: string, order: number): number {\n    // Sort elements alphabetically for consistent lookup\n    const [a, b] = [elem1, elem2].sort();\n    const orderSymbol = order === 1 ? '-' : order === 2 ? '=' : '#';\n\n    const key = `${a}${orderSymbol}${b}`;\n    const singleKey = `${a}-${b}`;\n\n    return BOND_LENGTHS[key] || BOND_LENGTHS[singleKey] || BOND_LENGTHS['DEFAULT'];\n}\n\n// VSEPR geometry angles based on coordination number\nconst VSEPR_ANGLES: Record<number, { angles: number[]; name: string }> = {\n    1: { angles: [0], name: 'terminal' },\n    2: { angles: [Math.PI], name: 'linear' },                    // 180¬∞\n    3: { angles: [2 * Math.PI / 3, 4 * Math.PI / 3], name: 'trigonal' }, // 120¬∞\n    4: { angles: [Math.acos(-1 / 3), 2 * Math.PI / 3, 4 * Math.PI / 3], name: 'tetrahedral' }, // 109.5¬∞\n    5: { angles: [Math.PI / 2, 2 * Math.PI / 3], name: 'trigonal-bipyramidal' },\n    6: { angles: [Math.PI / 2, Math.PI], name: 'octahedral' }       // 90¬∞, 180¬∞\n};\n\n// Tetrahedral unit vectors (sp3 hybridization)\nconst TETRAHEDRAL_VECTORS = [\n    { x: 1, y: 1, z: 1 },\n    { x: 1, y: -1, z: -1 },\n    { x: -1, y: 1, z: -1 },\n    { x: -1, y: -1, z: 1 }\n].map(v => {\n    const len = Math.sqrt(v.x * v.x + v.y * v.y + v.z * v.z);\n    return { x: v.x / len, y: v.y / len, z: v.z / len };\n});\n\n// Trigonal planar unit vectors (sp2 hybridization)\nconst TRIGONAL_VECTORS = [\n    { x: 1, y: 0, z: 0 },\n    { x: -0.5, y: Math.sqrt(3) / 2, z: 0 },\n    { x: -0.5, y: -Math.sqrt(3) / 2, z: 0 }\n];\n\n// Linear unit vectors (sp hybridization)\nconst LINEAR_VECTORS = [\n    { x: 1, y: 0, z: 0 },\n    { x: -1, y: 0, z: 0 }\n];\n\ninterface Vec3 {\n    x: number;\n    y: number;\n    z: number;\n}\n\nfunction vec3Add(a: Vec3, b: Vec3): Vec3 {\n    return { x: a.x + b.x, y: a.y + b.y, z: a.z + b.z };\n}\n\nfunction vec3Sub(a: Vec3, b: Vec3): Vec3 {\n    return { x: a.x - b.x, y: a.y - b.y, z: a.z - b.z };\n}\n\nfunction vec3Scale(v: Vec3, s: number): Vec3 {\n    return { x: v.x * s, y: v.y * s, z: v.z * s };\n}\n\nfunction vec3Length(v: Vec3): number {\n    return Math.sqrt(v.x * v.x + v.y * v.y + v.z * v.z);\n}\n\nfunction vec3Normalize(v: Vec3): Vec3 {\n    const len = vec3Length(v) || 1;\n    return { x: v.x / len, y: v.y / len, z: v.z / len };\n}\n\nfunction vec3Cross(a: Vec3, b: Vec3): Vec3 {\n    return {\n        x: a.y * b.z - a.z * b.y,\n        y: a.z * b.x - a.x * b.z,\n        z: a.x * b.y - a.y * b.x\n    };\n}\n\nfunction vec3Dot(a: Vec3, b: Vec3): number {\n    return a.x * b.x + a.y * b.y + a.z * b.z;\n}\n\n// Find rings in the molecule using DFS\nfunction findRings(atomCount: number, bonds: Array<{ source: number; target: number; order: number }>): number[][] {\n    const adj: Map<number, number[]> = new Map();\n    for (let i = 0; i < atomCount; i++) adj.set(i, []);\n\n    bonds.forEach(b => {\n        adj.get(b.source)?.push(b.target);\n        adj.get(b.target)?.push(b.source);\n    });\n\n    const rings: number[][] = [];\n    const visited = new Set<number>();\n\n    function dfs(node: number, parent: number, path: number[]): void {\n        if (path.length > 8) return; // Limit ring size\n\n        const neighbors = adj.get(node) || [];\n        for (const neighbor of neighbors) {\n            if (neighbor === parent) continue;\n\n            const idx = path.indexOf(neighbor);\n            if (idx !== -1) {\n                // Found a ring\n                const ring = path.slice(idx);\n                if (ring.length >= 3 && ring.length <= 7) {\n                    // Check if this ring is new\n                    const sortedRing = [...ring].sort((a, b) => a - b).join(',');\n                    const isNew = !rings.some(r =>\n                        [...r].sort((a, b) => a - b).join(',') === sortedRing\n                    );\n                    if (isNew) rings.push(ring);\n                }\n            } else if (!visited.has(neighbor)) {\n                dfs(neighbor, node, [...path, neighbor]);\n            }\n        }\n    }\n\n    for (let i = 0; i < atomCount; i++) {\n        if (!visited.has(i)) {\n            dfs(i, -1, [i]);\n            visited.add(i);\n        }\n    }\n\n    return rings;\n}\n\n// Get coordination number (number of bonded atoms) for each atom\nfunction getCoordinationNumbers(atomCount: number, bonds: Array<{ source: number; target: number; order: number }>): number[] {\n    const coordination = new Array(atomCount).fill(0);\n    bonds.forEach(b => {\n        coordination[b.source]++;\n        coordination[b.target]++;\n    });\n    return coordination;\n}\n\n// Build adjacency list with bond orders\nfunction buildAdjacency(atomCount: number, bonds: Array<{ source: number; target: number; order: number }>): Map<number, Array<{ neighbor: number; order: number }>> {\n    const adj: Map<number, Array<{ neighbor: number; order: number }>> = new Map();\n    for (let i = 0; i < atomCount; i++) adj.set(i, []);\n\n    bonds.forEach(b => {\n        adj.get(b.source)?.push({ neighbor: b.target, order: b.order });\n        adj.get(b.target)?.push({ neighbor: b.source, order: b.order });\n    });\n\n    return adj;\n}\n\n// Determine hybridization based on bond orders\nfunction getHybridization(atomIdx: number, bonds: Array<{ source: number; target: number; order: number }>, element: string): 'sp' | 'sp2' | 'sp3' {\n    const atomBonds = bonds.filter(b => b.source === atomIdx || b.target === atomIdx);\n    const hasTriple = atomBonds.some(b => b.order === 3);\n    const doubleCount = atomBonds.filter(b => b.order === 2).length;\n\n    if (hasTriple) return 'sp';           // Linear\n    if (doubleCount >= 1) return 'sp2';   // Trigonal planar\n    return 'sp3';                          // Tetrahedral\n}\n\n// Generate 3D coordinates with enhanced chemistry-aware algorithm\nfunction generate3DCoordinates(\n    atomCount: number,\n    bonds: Array<{ source: number; target: number; order: number }>,\n    elements: string[]\n): Array<{ x: number; y: number; z: number }> {\n    if (atomCount === 0) return [];\n    if (atomCount === 1) return [{ x: 0, y: 0, z: 0 }];\n\n    const positions: Vec3[] = new Array(atomCount).fill(null).map(() => ({ x: 0, y: 0, z: 0 }));\n    const placed = new Set<number>();\n    const adj = buildAdjacency(atomCount, bonds);\n    const coordination = getCoordinationNumbers(atomCount, bonds);\n    const rings = findRings(atomCount, bonds);\n    const inRing = new Set<number>();\n    rings.forEach(ring => ring.forEach(idx => inRing.add(idx)));\n\n    // Find the best starting atom (highest connectivity, preferring non-hydrogen)\n    let startAtom = 0;\n    let maxCoord = -1;\n    for (let i = 0; i < atomCount; i++) {\n        const score = coordination[i] * (elements[i] === 'H' ? 0.1 : 1);\n        if (score > maxCoord) {\n            maxCoord = score;\n            startAtom = i;\n        }\n    }\n\n    // Place first atom at origin\n    positions[startAtom] = { x: 0, y: 0, z: 0 };\n    placed.add(startAtom);\n\n    // BFS queue for placement\n    const queue: number[] = [startAtom];\n\n    // Keep track of used directions for each atom\n    const usedDirections: Map<number, Vec3[]> = new Map();\n\n    while (queue.length > 0) {\n        const current = queue.shift()!;\n        const neighbors = adj.get(current) || [];\n        const currentPos = positions[current];\n        const hybridization = getHybridization(current, bonds, elements[current]);\n\n        // Get already placed neighbors to determine available directions\n        const placedNeighbors = neighbors.filter(n => placed.has(n.neighbor));\n        const unplacedNeighbors = neighbors.filter(n => !placed.has(n.neighbor));\n\n        if (unplacedNeighbors.length === 0) continue;\n\n        // Calculate reference directions based on already placed neighbors\n        let referenceDir: Vec3 = { x: 1, y: 0, z: 0 };\n        let upDir: Vec3 = { x: 0, y: 0, z: 1 };\n\n        if (placedNeighbors.length > 0) {\n            // Use existing neighbor direction as reference\n            const firstNeighbor = placedNeighbors[0];\n            referenceDir = vec3Normalize(vec3Sub(positions[firstNeighbor.neighbor], currentPos));\n\n            // Find a perpendicular direction\n            if (Math.abs(referenceDir.z) < 0.9) {\n                upDir = vec3Normalize(vec3Cross(referenceDir, { x: 0, y: 0, z: 1 }));\n            } else {\n                upDir = vec3Normalize(vec3Cross(referenceDir, { x: 1, y: 0, z: 0 }));\n            }\n        }\n\n        // Get geometry vectors based on hybridization\n        let geometryVectors: Vec3[];\n        switch (hybridization) {\n            case 'sp':\n                geometryVectors = LINEAR_VECTORS;\n                break;\n            case 'sp2':\n                geometryVectors = TRIGONAL_VECTORS;\n                break;\n            case 'sp3':\n            default:\n                geometryVectors = TETRAHEDRAL_VECTORS;\n        }\n\n        // Rotate geometry vectors to align with reference direction\n        // Simple rotation: we'll use a basic transformation\n        const rightDir = vec3Cross(upDir, referenceDir);\n\n        // Place unplaced neighbors\n        let vectorIdx = placedNeighbors.length; // Skip used positions\n\n        for (const neighborInfo of unplacedNeighbors) {\n            const neighbor = neighborInfo.neighbor;\n            const bondOrder = neighborInfo.order;\n            const bondLength = getBondLength(elements[current], elements[neighbor], bondOrder);\n\n            // Get direction vector\n            let dir: Vec3;\n\n            // Check if this neighbor is in a ring with current atom\n            const sharedRing = rings.find(r => r.includes(current) && r.includes(neighbor));\n\n            if (sharedRing && sharedRing.length >= 5 && sharedRing.length <= 6) {\n                // Planar ring geometry\n                const ringSize = sharedRing.length;\n                const currentRingIdx = sharedRing.indexOf(current);\n                const neighborRingIdx = sharedRing.indexOf(neighbor);\n\n                // Calculate angle for planar ring\n                const angleStep = (2 * Math.PI) / ringSize;\n                const angle = neighborRingIdx * angleStep;\n\n                dir = {\n                    x: Math.cos(angle),\n                    y: Math.sin(angle),\n                    z: 0  // Keep rings planar in XY plane initially\n                };\n            } else {\n                // Use geometry vectors with rotation\n                const geoVec = geometryVectors[vectorIdx % geometryVectors.length];\n\n                // Transform the geometry vector to the local coordinate system\n                dir = vec3Normalize({\n                    x: geoVec.x * referenceDir.x + geoVec.y * upDir.x + geoVec.z * rightDir.x,\n                    y: geoVec.x * referenceDir.y + geoVec.y * upDir.y + geoVec.z * rightDir.y,\n                    z: geoVec.x * referenceDir.z + geoVec.y * upDir.z + geoVec.z * rightDir.z\n                });\n\n                vectorIdx++;\n            }\n\n            // Position the neighbor\n            positions[neighbor] = vec3Add(currentPos, vec3Scale(dir, bondLength));\n            placed.add(neighbor);\n            queue.push(neighbor);\n\n            // Track used directions\n            if (!usedDirections.has(current)) usedDirections.set(current, []);\n            usedDirections.get(current)!.push(dir);\n        }\n    }\n\n    // Handle any disconnected atoms (shouldn't happen normally)\n    for (let i = 0; i < atomCount; i++) {\n        if (!placed.has(i)) {\n            positions[i] = {\n                x: (Math.random() - 0.5) * 5,\n                y: (Math.random() - 0.5) * 5,\n                z: (Math.random() - 0.5) * 5\n            };\n            placed.add(i);\n        }\n    }\n\n    // Refinement phase: Force-directed relaxation\n    refineMoleculeGeometry(positions, bonds, elements, 80);\n\n    // Center the molecule\n    const center: Vec3 = { x: 0, y: 0, z: 0 };\n    positions.forEach(p => {\n        center.x += p.x;\n        center.y += p.y;\n        center.z += p.z;\n    });\n    center.x /= atomCount;\n    center.y /= atomCount;\n    center.z /= atomCount;\n\n    return positions.map(p => ({\n        x: Math.round((p.x - center.x) * 100) / 100,\n        y: Math.round((p.y - center.y) * 100) / 100,\n        z: Math.round((p.z - center.z) * 100) / 100\n    }));\n}\n\n// Force-directed geometry refinement\nfunction refineMoleculeGeometry(\n    positions: Vec3[],\n    bonds: Array<{ source: number; target: number; order: number }>,\n    elements: string[],\n    iterations: number\n): void {\n    const atomCount = positions.length;\n    const velocities: Vec3[] = positions.map(() => ({ x: 0, y: 0, z: 0 }));\n\n    const BOND_STRENGTH = 0.15;\n    const REPULSION_STRENGTH = 1.5;\n    const ANGLE_STRENGTH = 0.05;\n    const DAMPING = 0.85;\n    const MIN_DISTANCE = 0.5;\n\n    const adj = buildAdjacency(atomCount, bonds);\n\n    for (let iter = 0; iter < iterations; iter++) {\n        const forces: Vec3[] = positions.map(() => ({ x: 0, y: 0, z: 0 }));\n\n        // Bond length forces\n        bonds.forEach(bond => {\n            const i = bond.source;\n            const j = bond.target;\n            const idealLength = getBondLength(elements[i], elements[j], bond.order);\n\n            const delta = vec3Sub(positions[j], positions[i]);\n            const dist = vec3Length(delta) + 0.001;\n            const displacement = dist - idealLength;\n\n            const forceDir = vec3Normalize(delta);\n            const forceMag = BOND_STRENGTH * displacement;\n\n            const force = vec3Scale(forceDir, forceMag);\n            forces[i] = vec3Add(forces[i], force);\n            forces[j] = vec3Sub(forces[j], force);\n        });\n\n        // Non-bonded repulsion (only between close atoms)\n        for (let i = 0; i < atomCount; i++) {\n            for (let j = i + 1; j < atomCount; j++) {\n                // Skip bonded pairs\n                const isBonded = bonds.some(b =>\n                    (b.source === i && b.target === j) ||\n                    (b.source === j && b.target === i)\n                );\n\n                const delta = vec3Sub(positions[i], positions[j]);\n                const dist = vec3Length(delta) + 0.001;\n\n                // Only apply repulsion if atoms are too close\n                const minDist = isBonded ? 0 : (elements[i] === 'H' || elements[j] === 'H' ? 1.5 : 2.5);\n\n                if (!isBonded && dist < minDist) {\n                    const forceDir = vec3Normalize(delta);\n                    const forceMag = REPULSION_STRENGTH * (minDist - dist) / dist;\n\n                    const force = vec3Scale(forceDir, forceMag);\n                    forces[i] = vec3Add(forces[i], force);\n                    forces[j] = vec3Sub(forces[j], force);\n                }\n            }\n        }\n\n        // Angle constraints for proper geometry\n        for (let center = 0; center < atomCount; center++) {\n            const neighbors = adj.get(center) || [];\n            if (neighbors.length < 2) continue;\n\n            // Get ideal angle based on hybridization\n            const hybridization = getHybridization(center, bonds, elements[center]);\n            let idealAngle: number;\n            switch (hybridization) {\n                case 'sp': idealAngle = Math.PI; break;          // 180¬∞\n                case 'sp2': idealAngle = 2 * Math.PI / 3; break; // 120¬∞\n                case 'sp3':\n                default: idealAngle = Math.acos(-1 / 3); break;    // 109.5¬∞\n            }\n\n            // Apply angle forces for each pair of neighbors\n            for (let ni = 0; ni < neighbors.length; ni++) {\n                for (let nj = ni + 1; nj < neighbors.length; nj++) {\n                    const i = neighbors[ni].neighbor;\n                    const j = neighbors[nj].neighbor;\n\n                    const v1 = vec3Normalize(vec3Sub(positions[i], positions[center]));\n                    const v2 = vec3Normalize(vec3Sub(positions[j], positions[center]));\n\n                    const cosAngle = Math.max(-1, Math.min(1, vec3Dot(v1, v2)));\n                    const currentAngle = Math.acos(cosAngle);\n                    const angleDiff = currentAngle - idealAngle;\n\n                    if (Math.abs(angleDiff) > 0.1) {\n                        // Apply torque-like forces to adjust angle\n                        const perpForce = ANGLE_STRENGTH * angleDiff;\n\n                        const perp1 = vec3Normalize(vec3Cross(v1, v2));\n                        const tangent1 = vec3Cross(perp1, v1);\n                        const tangent2 = vec3Cross(v2, perp1);\n\n                        forces[i] = vec3Add(forces[i], vec3Scale(tangent1, perpForce));\n                        forces[j] = vec3Add(forces[j], vec3Scale(tangent2, perpForce));\n                    }\n                }\n            }\n        }\n\n        // Apply forces with damping\n        for (let i = 0; i < atomCount; i++) {\n            velocities[i] = vec3Scale(vec3Add(velocities[i], forces[i]), DAMPING);\n\n            // Limit velocity\n            const speed = vec3Length(velocities[i]);\n            if (speed > 0.5) {\n                velocities[i] = vec3Scale(velocities[i], 0.5 / speed);\n            }\n\n            positions[i] = vec3Add(positions[i], velocities[i]);\n        }\n    }\n}\n\n// ============================================================================\n// Main Parser\n// ============================================================================\n\nexport function parseSmiles(smiles: string): SmilesParseResult {\n    // Sanitize input\n    smiles = smiles.trim();\n\n    if (!smiles) {\n        return { success: false, atoms: [], bonds: [], error: 'Empty SMILES string' };\n    }\n\n    const state: ParserState = {\n        pos: 0,\n        atoms: [],\n        bonds: [],\n        ringClosures: new Map(),\n        branchStack: [],\n        lastAtomIndex: -1,\n        pendingBondOrder: 0,\n    };\n\n    try {\n        while (state.pos < smiles.length) {\n            const char = peek(smiles, state);\n\n            // Skip whitespace\n            if (/\\s/.test(char)) {\n                consume(smiles, state);\n                continue;\n            }\n\n            // Skip stereochemistry markers\n            if (char === '/' || char === '\\\\') {\n                consume(smiles, state);\n                continue;\n            }\n\n            // Bond order\n            if (char === '-' || char === '=' || char === '#' || char === ':') {\n                state.pendingBondOrder = parseBondOrder(smiles, state);\n                continue;\n            }\n\n            // Branch start\n            if (char === '(') {\n                consume(smiles, state);\n                state.branchStack.push(state.lastAtomIndex);\n                continue;\n            }\n\n            // Branch end\n            if (char === ')') {\n                consume(smiles, state);\n                if (state.branchStack.length > 0) {\n                    state.lastAtomIndex = state.branchStack.pop()!;\n                }\n                continue;\n            }\n\n            // Disconnection (dot)\n            if (char === '.') {\n                consume(smiles, state);\n                state.lastAtomIndex = -1;\n                continue;\n            }\n\n            // Ring closure\n            const ringNum = parseRingClosure(smiles, state);\n            if (ringNum !== null) {\n                const bondOrder = state.pendingBondOrder || 1;\n                state.pendingBondOrder = 0;\n\n                if (state.ringClosures.has(ringNum)) {\n                    // Close the ring\n                    const opener = state.ringClosures.get(ringNum)!;\n                    const closerOrder = Math.max(opener.bondOrder, bondOrder);\n                    addBond(state, opener.atomIndex, state.lastAtomIndex, closerOrder);\n                    state.ringClosures.delete(ringNum);\n                } else {\n                    // Open a new ring\n                    state.ringClosures.set(ringNum, {\n                        atomIndex: state.lastAtomIndex,\n                        bondOrder\n                    });\n                }\n                continue;\n            }\n\n            // Bracket atom\n            if (char === '[') {\n                consume(smiles, state);\n                const atom = parseBracketAtom(smiles, state);\n                if (!atom) {\n                    return { success: false, atoms: [], bonds: [], error: `Invalid bracket atom at position ${state.pos}` };\n                }\n\n                const atomIndex = state.atoms.length;\n                state.atoms.push(atom);\n\n                if (state.lastAtomIndex >= 0) {\n                    const bondOrder = state.pendingBondOrder || 1;\n                    addBond(state, state.lastAtomIndex, atomIndex, bondOrder);\n                }\n                state.pendingBondOrder = 0;\n                state.lastAtomIndex = atomIndex;\n                continue;\n            }\n\n            // Organic subset atom\n            const atom = parseOrganicAtom(smiles, state);\n            if (atom) {\n                const atomIndex = state.atoms.length;\n                state.atoms.push(atom);\n\n                if (state.lastAtomIndex >= 0) {\n                    const bondOrder = state.pendingBondOrder || (atom.aromatic && state.atoms[state.lastAtomIndex]?.aromatic ? 1 : 1);\n                    addBond(state, state.lastAtomIndex, atomIndex, bondOrder);\n                }\n                state.pendingBondOrder = 0;\n                state.lastAtomIndex = atomIndex;\n                continue;\n            }\n\n            // Unknown character\n            return { success: false, atoms: [], bonds: [], error: `Unexpected character '${char}' at position ${state.pos}` };\n        }\n\n        // Check for unclosed rings\n        if (state.ringClosures.size > 0) {\n            const unclosed = Array.from(state.ringClosures.keys()).join(', ');\n            return { success: false, atoms: [], bonds: [], error: `Unclosed ring(s): ${unclosed}` };\n        }\n\n        // Calculate implicit hydrogens and add them\n        const implicitH = calculateImplicitHydrogens(state.atoms, state.bonds);\n\n        // Add hydrogen atoms\n        const allAtoms: ParsedAtom[] = [...state.atoms];\n        const allBonds = [...state.bonds];\n\n        implicitH.forEach((hCount, parentIdx) => {\n            for (let h = 0; h < hCount; h++) {\n                const hIdx = allAtoms.length;\n                allAtoms.push({ element: 'H', aromatic: false, charge: 0, hCount: 0, isotope: null });\n                allBonds.push({ source: parentIdx, target: hIdx, order: 1 });\n            }\n        });\n\n        // Generate 3D coordinates with element information for proper bond lengths\n        const elements = allAtoms.map(a => a.element);\n        const positions = generate3DCoordinates(allAtoms.length, allBonds, elements);\n\n        // Convert to output format\n        const outputAtoms: Atom[] = allAtoms.map((a, i) => ({\n            id: Date.now() + i,\n            element: a.element,\n            x: positions[i]?.x || 0,\n            y: positions[i]?.y || 0,\n            z: positions[i]?.z || 0\n        }));\n\n        const outputBonds: Bond[] = allBonds.map((b, i) => ({\n            id: Date.now() + 1000 + i,\n            sourceId: outputAtoms[b.source]?.id || 0,\n            targetId: outputAtoms[b.target]?.id || 0,\n            order: b.order\n        }));\n\n        return { success: true, atoms: outputAtoms, bonds: outputBonds };\n\n    } catch (error) {\n        return {\n            success: false,\n            atoms: [],\n            bonds: [],\n            error: `Parse error: ${error instanceof Error ? error.message : 'Unknown error'}`\n        };\n    }\n}\n\n// ============================================================================\n// Common SMILES Examples for Quick Input\n// ============================================================================\n\nexport const SMILES_EXAMPLES: Array<{ name: string; smiles: string; category: string }> = [\n    // Simple\n    { name: 'Water', smiles: 'O', category: 'Simple' },\n    { name: 'Ammonia', smiles: 'N', category: 'Simple' },\n    { name: 'Methane', smiles: 'C', category: 'Simple' },\n    { name: 'Carbon Dioxide', smiles: 'O=C=O', category: 'Simple' },\n    { name: 'Hydrogen Peroxide', smiles: 'OO', category: 'Simple' },\n\n    // Alkanes\n    { name: 'Ethane', smiles: 'CC', category: 'Alkanes' },\n    { name: 'Propane', smiles: 'CCC', category: 'Alkanes' },\n    { name: 'Butane', smiles: 'CCCC', category: 'Alkanes' },\n    { name: 'Isobutane', smiles: 'CC(C)C', category: 'Alkanes' },\n\n    // Alcohols\n    { name: 'Methanol', smiles: 'CO', category: 'Alcohols' },\n    { name: 'Ethanol', smiles: 'CCO', category: 'Alcohols' },\n    { name: 'Isopropanol', smiles: 'CC(O)C', category: 'Alcohols' },\n    { name: 'Glycerol', smiles: 'OCC(O)CO', category: 'Alcohols' },\n\n    // Aromatics\n    { name: 'Benzene', smiles: 'c1ccccc1', category: 'Aromatics' },\n    { name: 'Toluene', smiles: 'Cc1ccccc1', category: 'Aromatics' },\n    { name: 'Phenol', smiles: 'Oc1ccccc1', category: 'Aromatics' },\n    { name: 'Aniline', smiles: 'Nc1ccccc1', category: 'Aromatics' },\n\n    // Drugs\n    { name: 'Aspirin', smiles: 'CC(=O)Oc1ccccc1C(=O)O', category: 'Drugs' },\n    { name: 'Paracetamol', smiles: 'CC(=O)Nc1ccc(O)cc1', category: 'Drugs' },\n    { name: 'Caffeine', smiles: 'Cn1cnc2c1c(=O)n(C)c(=O)n2C', category: 'Drugs' },\n    { name: 'Ibuprofen', smiles: 'CC(C)Cc1ccc(C(C)C(=O)O)cc1', category: 'Drugs' },\n\n    // Amino Acids\n    { name: 'Glycine', smiles: 'NCC(=O)O', category: 'Amino Acids' },\n    { name: 'Alanine', smiles: 'CC(N)C(=O)O', category: 'Amino Acids' },\n    { name: 'Serine', smiles: 'NC(CO)C(=O)O', category: 'Amino Acids' },\n];\n","'use client';\n\nimport React from 'react';\nimport { SYLLABUS_DATA, SyllabusLevel } from '@/lib/syllabusData';\n\ninterface MissionSelectorProps {\n    userLevel: number;\n    onSelectMission: (mission: SyllabusLevel) => void;\n    currentMissionId: number;\n}\n\nexport default function MissionSelector({ userLevel, onSelectMission, currentMissionId }: MissionSelectorProps) {\n\n    // Sort levels just in case\n    const sortedLevels = [...SYLLABUS_DATA].sort((a, b) => a.level - b.level);\n\n    return (\n        <div style={{\n            display: 'flex',\n            flexDirection: 'column',\n            gap: '12px',\n            marginBottom: '20px',\n        }}>\n            <h3 style={{ margin: 0, fontSize: '0.85rem', fontWeight: 700, color: '#9ca3af', textTransform: 'uppercase', letterSpacing: '0.5px' }}>\n                üó∫Ô∏è Syllabus Map\n            </h3>\n\n            <div className=\"no-scrollbar\" style={{\n                display: 'flex',\n                gap: '8px',\n                overflowX: 'auto',\n                paddingBottom: '4px',\n                maskImage: 'linear-gradient(to right, black 85%, transparent 100%)',\n                WebkitMaskImage: 'linear-gradient(to right, black 85%, transparent 100%)'\n            }}>\n                <style jsx>{`\n                    .no-scrollbar::-webkit-scrollbar {\n                        display: none;\n                    }\n                    .no-scrollbar {\n                        -ms-overflow-style: none;\n                        scrollbar-width: none;\n                    }\n                `}</style>\n                {sortedLevels.map((level) => {\n                    const isLocked = level.level > userLevel;\n                    const isActive = level.level === currentMissionId;\n                    const isCompleted = level.level < userLevel;\n\n                    return (\n                        <div\n                            key={level.level}\n                            onClick={() => !isLocked && onSelectMission(level)}\n                            style={{\n                                minWidth: '120px',\n                                padding: '10px',\n                                borderRadius: '10px',\n                                background: isActive ? '#2563eb' : (isLocked ? '#1f2937' : '#1f2937'),\n                                border: isActive ? '1px solid #60a5fa' : '1px solid #374151',\n                                cursor: isLocked ? 'not-allowed' : 'pointer',\n                                opacity: isLocked ? 0.5 : 1,\n                                display: 'flex',\n                                flexDirection: 'column',\n                                gap: '2px',\n                                position: 'relative',\n                                transition: 'all 0.2s',\n                                transform: isActive ? 'scale(1.02)' : 'scale(1)'\n                            }}\n                        >\n                            {/* Header */}\n                            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '4px' }}>\n                                <span style={{\n                                    fontSize: '0.65rem',\n                                    fontWeight: 'bold',\n                                    color: isActive ? '#e0e7ff' : '#6b7280',\n                                    textTransform: 'uppercase'\n                                }}>\n                                    {level.semester}\n                                </span>\n                                {isLocked && <span style={{ fontSize: '0.7rem' }}>üîí</span>}\n                                {isCompleted && <span style={{ fontSize: '0.7rem' }}>‚úÖ</span>}\n                            </div>\n\n                            {/* Title */}\n                            <div style={{\n                                fontSize: '0.85rem',\n                                fontWeight: '600',\n                                color: isActive ? '#fff' : '#e5e7eb',\n                                lineHeight: '1.2',\n                                whiteSpace: 'nowrap',\n                                overflow: 'hidden',\n                                textOverflow: 'ellipsis'\n                            }}>\n                                {level.moleculeTemplate.name}\n                            </div>\n\n                            {/* Active Indicator */}\n                            {isActive && (\n                                <div style={{\n                                    height: '2px',\n                                    background: '#fff',\n                                    marginTop: '6px',\n                                    borderRadius: '1px',\n                                    opacity: 0.5\n                                }} />\n                            )}\n                        </div>\n                    );\n                })}\n            </div>\n\n            <div style={{\n                fontSize: '0.75rem',\n                color: '#9ca3af',\n                background: '#151921',\n                padding: '10px',\n                borderRadius: '8px',\n                border: '1px solid rgba(255,255,255,0.05)',\n                lineHeight: '1.4'\n            }}>\n                <span style={{ color: '#60a5fa', fontWeight: 600 }}>Objective:</span> {\n                    SYLLABUS_DATA.find(s => s.level === userLevel)?.learningObjective || \"Master the syllabus.\"\n                }\n            </div>\n        </div>\n    );\n}\n","'use client';\n\nimport { useState } from 'react';\nimport { PeriodicTable, ElementData } from '@/lib/chemistry';\nimport styles from './ChemistryReference.module.css';\n\ninterface ChemistryReferenceProps {\n    isOpen: boolean;\n    onClose: () => void;\n}\n\n// Tab types\ntype TabType = 'elements' | 'bonds' | 'groups' | 'tips' | 'smiles';\n\n// Functional group data with expanded descriptions\nconst FUNCTIONAL_GROUPS_DATA = [\n    {\n        name: 'Hydroxyl (-OH)',\n        structure: 'R-O-H',\n        icon: 'üíß',\n        description: 'An oxygen atom bonded to a hydrogen. Found in alcohols and phenols.',\n        drugRelevance: 'Increases water solubility (hydrophilicity), enables hydrogen bonding for receptor binding.',\n        examples: ['Ethanol (CCO)', 'Phenol (Oc1ccccc1)'],\n        color: '#60a5fa'\n    },\n    {\n        name: 'Carbonyl (C=O)',\n        structure: 'R-C(=O)-R',\n        icon: '‚öóÔ∏è',\n        description: 'A carbon double-bonded to oxygen. The defining feature of aldehydes, ketones, esters, and amides.',\n        drugRelevance: 'Reactive center for drug metabolism, hydrogen bond acceptor.',\n        examples: ['Acetone (CC(=O)C)', 'Formaldehyde (C=O)'],\n        color: '#f59e0b'\n    },\n    {\n        name: 'Carboxyl (-COOH)',\n        structure: 'R-C(=O)-O-H',\n        icon: 'üß™',\n        description: 'A carbonyl attached to a hydroxyl group. Found in carboxylic acids.',\n        drugRelevance: 'Acidic (pKa ~4-5), ionizes at physiological pH, increases water solubility.',\n        examples: ['Acetic Acid (CC(=O)O)', 'Aspirin (CC(=O)Oc1ccccc1C(=O)O)'],\n        color: '#ef4444'\n    },\n    {\n        name: 'Amine (-NH‚ÇÇ)',\n        structure: 'R-N-H‚ÇÇ',\n        icon: 'üîµ',\n        description: 'A nitrogen atom with hydrogen(s) attached. Can be primary, secondary, or tertiary.',\n        drugRelevance: 'Basic (pKa ~9-11), protonated at physiological pH, hydrogen bond donor.',\n        examples: ['Methylamine (CN)', 'Aniline (Nc1ccccc1)'],\n        color: '#3b82f6'\n    },\n    {\n        name: 'Amide (-CONH‚ÇÇ)',\n        structure: 'R-C(=O)-N-H‚ÇÇ',\n        icon: 'üîó',\n        description: 'A carbonyl attached to a nitrogen. The peptide bond is an amide.',\n        drugRelevance: 'Very stable, resistant to metabolism, mimics peptide bonds in proteins.',\n        examples: ['Acetamide (CC(=O)N)', 'Paracetamol (CC(=O)Nc1ccc(O)cc1)'],\n        color: '#8b5cf6'\n    },\n    {\n        name: 'Ether (C-O-C)',\n        structure: 'R-O-R',\n        icon: '‚≠ï',\n        description: 'An oxygen between two carbon groups. Generally stable and non-reactive.',\n        drugRelevance: 'Increases lipophilicity, good for crossing cell membranes.',\n        examples: ['Diethyl Ether (CCOCC)', 'Anisole (COc1ccccc1)'],\n        color: '#06b6d4'\n    },\n    {\n        name: 'Ester (-COO-)',\n        structure: 'R-C(=O)-O-R',\n        icon: 'üçã',\n        description: 'A carbonyl attached to an oxygen with an R group. Common in fats and flavors.',\n        drugRelevance: 'Used in prodrugs - can be cleaved by esterases to release active drug.',\n        examples: ['Ethyl Acetate (CCOC(=O)C)', 'Aspirin ester group'],\n        color: '#84cc16'\n    },\n    {\n        name: 'Halogen (F/Cl/Br/I)',\n        structure: 'R-X',\n        icon: 'üü¢',\n        description: 'Fluorine, chlorine, bromine, or iodine attached to a carbon.',\n        drugRelevance: 'F increases metabolic stability, Cl/Br add lipophilicity, useful for PET imaging (18F).',\n        examples: ['Chloroform (ClC(Cl)Cl)', 'Fluorobenzene (Fc1ccccc1)'],\n        color: '#22c55e'\n    },\n    {\n        name: 'Thiol (-SH)',\n        structure: 'R-S-H',\n        icon: 'üü°',\n        description: 'A sulfur with a hydrogen. Also called mercaptan. Very reactive.',\n        drugRelevance: 'Can form covalent bonds with cysteine residues, used in covalent drugs.',\n        examples: ['Methanethiol (CS)', 'Cysteine (NC(CS)C(=O)O)'],\n        color: '#eab308'\n    },\n    {\n        name: 'Aromatic Ring',\n        structure: 'c1ccccc1',\n        icon: 'üîµ',\n        description: 'A planar ring of carbons with delocalized œÄ electrons. Benzene is the prototype.',\n        drugRelevance: 'Flat, hydrophobic, can stack with other aromatics (œÄ-œÄ stacking).',\n        examples: ['Benzene (c1ccccc1)', 'Naphthalene (c1ccc2ccccc2c1)'],\n        color: '#a78bfa'\n    }\n];\n\n// Bond types data\nconst BOND_TYPES_DATA = [\n    {\n        name: 'Single Bond',\n        symbol: '-',\n        electrons: 2,\n        description: 'One pair of shared electrons. Allows free rotation around the bond axis.',\n        examples: ['C-C in ethane', 'C-H in methane'],\n        strength: 'Medium (347 kJ/mol for C-C)'\n    },\n    {\n        name: 'Double Bond',\n        symbol: '=',\n        electrons: 4,\n        description: 'Two pairs of shared electrons (1 sigma + 1 pi). Restricts rotation, creates geometric isomers.',\n        examples: ['C=C in ethylene', 'C=O in aldehydes'],\n        strength: 'Strong (614 kJ/mol for C=C)'\n    },\n    {\n        name: 'Triple Bond',\n        symbol: '‚â°',\n        electrons: 6,\n        description: 'Three pairs of shared electrons (1 sigma + 2 pi). Very strong and linear.',\n        examples: ['C‚â°C in acetylene', 'C‚â°N in nitriles'],\n        strength: 'Very Strong (839 kJ/mol for C‚â°C)'\n    },\n    {\n        name: 'Aromatic Bond',\n        symbol: '‚óØ',\n        electrons: 1.5,\n        description: 'Delocalized electrons shared across a ring. Bond order is between single and double.',\n        examples: ['Benzene ring', 'Pyridine ring'],\n        strength: 'Intermediate (resonance stabilized)'\n    }\n];\n\n// Building tips\nconst BUILDING_TIPS = [\n    {\n        title: 'üéØ Start with Carbon',\n        tip: 'Carbon forms 4 bonds and is the backbone of organic molecules. Place carbons first, then add other atoms.'\n    },\n    {\n        title: '‚ö° Watch Your Valence',\n        tip: 'Each element has a specific number of bonds it needs: H=1, O=2, N=3, C=4. The validation panel shows errors if bonds are wrong.'\n    },\n    {\n        title: 'üîÑ Use Bond Mode',\n        tip: 'After placing atoms, switch to Bond Mode to connect them. Click two atoms to create a bond. Click existing bonds to increase their order.'\n    },\n    {\n        title: 'üóëÔ∏è Delete Mode',\n        tip: 'Use Delete Mode to remove atoms or bonds. Clicking an atom removes it and all its bonds.'\n    },\n    {\n        title: 'üíä Drug-like Molecules',\n        tip: 'For pharmaceutical compounds, follow Lipinski\\'s Rule of 5: MW ‚â§ 500, H-bond donors ‚â§ 5, H-bond acceptors ‚â§ 10.'\n    },\n    {\n        title: 'üîµ Aromatic Rings',\n        tip: 'To build benzene, create 6 carbons in a ring with alternating single and double bonds. The system will detect aromaticity.'\n    },\n    {\n        title: 'üìù SMILES Input',\n        tip: 'Use the SMILES tab to quickly generate molecules from SMILES notation. Great for importing known structures!'\n    },\n    {\n        title: 'üß¨ Load Templates',\n        tip: 'Use the mission system to load pre-built molecule templates as starting points for modifications.'\n    }\n];\n\n// SMILES syntax guide\nconst SMILES_SYNTAX = [\n    { syntax: 'C, N, O, S, P, F, Cl, Br, I', description: 'Organic atoms (implicit H added)' },\n    { syntax: 'c, n, o, s', description: 'Aromatic atoms (lowercase)' },\n    { syntax: '[NH4+], [O-], [Fe]', description: 'Bracket atoms (charges, metals)' },\n    { syntax: '- = #', description: 'Single, double, triple bonds' },\n    { syntax: '()', description: 'Branches (side chains)' },\n    { syntax: '1, 2, %10', description: 'Ring closures' },\n    { syntax: '.', description: 'Disconnected fragments' },\n];\n\nexport default function ChemistryReference({ isOpen, onClose }: ChemistryReferenceProps) {\n    const [activeTab, setActiveTab] = useState<TabType>('elements');\n    const [selectedElement, setSelectedElement] = useState<string | null>(null);\n\n    if (!isOpen) return null;\n\n    const elements = Object.entries(PeriodicTable) as [string, ElementData][];\n\n    const renderElements = () => (\n        <div className={styles.elementsGrid}>\n            {elements.map(([symbol, data]) => (\n                <div\n                    key={symbol}\n                    className={`${styles.elementCard} ${selectedElement === symbol ? styles.selected : ''}`}\n                    onClick={() => setSelectedElement(selectedElement === symbol ? null : symbol)}\n                    style={{ borderColor: `#${data.color.toString(16).padStart(6, '0')}` }}\n                >\n                    <div\n                        className={styles.elementSymbol}\n                        style={{ color: `#${data.color.toString(16).padStart(6, '0')}` }}\n                    >\n                        {symbol}\n                    </div>\n                    <div className={styles.elementName}>{data.name}</div>\n                    <div className={styles.elementNumber}>#{data.atomicNumber}</div>\n                </div>\n            ))}\n\n            {selectedElement && PeriodicTable[selectedElement] && (\n                <div className={styles.elementDetail}>\n                    <h4 style={{ color: `#${PeriodicTable[selectedElement].color.toString(16).padStart(6, '0')}` }}>\n                        {PeriodicTable[selectedElement].name} ({selectedElement})\n                    </h4>\n                    <div className={styles.detailGrid}>\n                        <div className={styles.detailItem}>\n                            <span className={styles.detailLabel}>Atomic Number</span>\n                            <span className={styles.detailValue}>{PeriodicTable[selectedElement].atomicNumber}</span>\n                        </div>\n                        <div className={styles.detailItem}>\n                            <span className={styles.detailLabel}>Atomic Mass</span>\n                            <span className={styles.detailValue}>{PeriodicTable[selectedElement].mass} u</span>\n                        </div>\n                        <div className={styles.detailItem}>\n                            <span className={styles.detailLabel}>Valence</span>\n                            <span className={styles.detailValue}>{PeriodicTable[selectedElement].valence.join(', ')}</span>\n                        </div>\n                        <div className={styles.detailItem}>\n                            <span className={styles.detailLabel}>Radius</span>\n                            <span className={styles.detailValue}>{PeriodicTable[selectedElement].radius} √Ö</span>\n                        </div>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n\n    const renderBonds = () => (\n        <div className={styles.bondsList}>\n            {BOND_TYPES_DATA.map((bond, i) => (\n                <div key={i} className={styles.bondCard}>\n                    <div className={styles.bondHeader}>\n                        <span className={styles.bondSymbol}>{bond.symbol}</span>\n                        <span className={styles.bondName}>{bond.name}</span>\n                        <span className={styles.bondElectrons}>{bond.electrons} e‚Åª</span>\n                    </div>\n                    <p className={styles.bondDescription}>{bond.description}</p>\n                    <div className={styles.bondExamples}>\n                        <strong>Examples:</strong> {bond.examples.join(', ')}\n                    </div>\n                    <div className={styles.bondStrength}>\n                        <strong>Strength:</strong> {bond.strength}\n                    </div>\n                </div>\n            ))}\n        </div>\n    );\n\n    const renderGroups = () => (\n        <div className={styles.groupsList}>\n            {FUNCTIONAL_GROUPS_DATA.map((group, i) => (\n                <div key={i} className={styles.groupCard} style={{ borderLeftColor: group.color }}>\n                    <div className={styles.groupHeader}>\n                        <span className={styles.groupIcon}>{group.icon}</span>\n                        <span className={styles.groupName}>{group.name}</span>\n                    </div>\n                    <div className={styles.groupStructure}>\n                        <code>{group.structure}</code>\n                    </div>\n                    <p className={styles.groupDescription}>{group.description}</p>\n                    <div className={styles.groupRelevance}>\n                        <strong>üíä Drug Relevance:</strong> {group.drugRelevance}\n                    </div>\n                    <div className={styles.groupExamples}>\n                        <strong>Examples:</strong> {group.examples.join(', ')}\n                    </div>\n                </div>\n            ))}\n        </div>\n    );\n\n    const renderTips = () => (\n        <div className={styles.tipsList}>\n            {BUILDING_TIPS.map((tip, i) => (\n                <div key={i} className={styles.tipCard}>\n                    <div className={styles.tipTitle}>{tip.title}</div>\n                    <p className={styles.tipContent}>{tip.tip}</p>\n                </div>\n            ))}\n        </div>\n    );\n\n    const renderSmiles = () => (\n        <div className={styles.smilesGuide}>\n            <h4 className={styles.smilesTitle}>üìù SMILES Notation Guide</h4>\n            <p className={styles.smilesIntro}>\n                SMILES (Simplified Molecular Input Line Entry System) is a way to represent molecules as text strings.\n            </p>\n\n            <table className={styles.smilesTable}>\n                <thead>\n                    <tr>\n                        <th>Syntax</th>\n                        <th>Meaning</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {SMILES_SYNTAX.map((item, i) => (\n                        <tr key={i}>\n                            <td><code>{item.syntax}</code></td>\n                            <td>{item.description}</td>\n                        </tr>\n                    ))}\n                </tbody>\n            </table>\n\n            <h4 className={styles.smilesTitle} style={{ marginTop: '20px' }}>üß™ Examples</h4>\n            <div className={styles.smilesExamples}>\n                <div className={styles.smilesExample}>\n                    <code>CCO</code> ‚Üí Ethanol (2 carbons + oxygen)\n                </div>\n                <div className={styles.smilesExample}>\n                    <code>c1ccccc1</code> ‚Üí Benzene (aromatic ring)\n                </div>\n                <div className={styles.smilesExample}>\n                    <code>CC(=O)O</code> ‚Üí Acetic acid (with carbonyl)\n                </div>\n                <div className={styles.smilesExample}>\n                    <code>CC(C)C</code> ‚Üí Isobutane (with branch)\n                </div>\n                <div className={styles.smilesExample}>\n                    <code>C1CCCCC1</code> ‚Üí Cyclohexane (6-ring)\n                </div>\n            </div>\n        </div>\n    );\n\n    return (\n        <div className={styles.overlay} onClick={onClose}>\n            <div className={styles.panel} onClick={e => e.stopPropagation()}>\n                <div className={styles.header}>\n                    <h2 className={styles.title}>üìö Chemistry Reference</h2>\n                    <button className={styles.closeBtn} onClick={onClose}>√ó</button>\n                </div>\n\n                <div className={styles.tabs}>\n                    <button\n                        className={`${styles.tab} ${activeTab === 'elements' ? styles.activeTab : ''}`}\n                        onClick={() => setActiveTab('elements')}\n                    >\n                        üß™ Elements\n                    </button>\n                    <button\n                        className={`${styles.tab} ${activeTab === 'bonds' ? styles.activeTab : ''}`}\n                        onClick={() => setActiveTab('bonds')}\n                    >\n                        üîó Bonds\n                    </button>\n                    <button\n                        className={`${styles.tab} ${activeTab === 'groups' ? styles.activeTab : ''}`}\n                        onClick={() => setActiveTab('groups')}\n                    >\n                        üß¨ Groups\n                    </button>\n                    <button\n                        className={`${styles.tab} ${activeTab === 'smiles' ? styles.activeTab : ''}`}\n                        onClick={() => setActiveTab('smiles')}\n                    >\n                        üìù SMILES\n                    </button>\n                    <button\n                        className={`${styles.tab} ${activeTab === 'tips' ? styles.activeTab : ''}`}\n                        onClick={() => setActiveTab('tips')}\n                    >\n                        üí° Tips\n                    </button>\n                </div>\n\n                <div className={styles.content}>\n                    {activeTab === 'elements' && renderElements()}\n                    {activeTab === 'bonds' && renderBonds()}\n                    {activeTab === 'groups' && renderGroups()}\n                    {activeTab === 'tips' && renderTips()}\n                    {activeTab === 'smiles' && renderSmiles()}\n                </div>\n            </div>\n        </div>\n    );\n}\n","/**\n * Image Service - AI-powered molecule image generation with Firebase Storage\n * Generates unique molecule visualizations and stores them persistently\n */\n\nimport { storage } from './firebase';\nimport { ref, uploadBytes, getDownloadURL } from 'firebase/storage';\n\n// API Key for image generation (AI Guru Lab or similar)\nconst IMAGE_API_KEY = process.env.NEXT_PUBLIC_AI_GURU_LAB_API_KEY || '';\nconst GEMINI_API_KEY = process.env.NEXT_PUBLIC_GOOGLE_GENAI_API_KEY || '';\n\n// Molecule color palettes based on molecule type\nconst MOLECULE_COLORS: Record<string, string[]> = {\n    paracetamol: ['#4FC3F7', '#29B6F6', '#03A9F4', '#039BE5'],\n    aspirin: ['#81C784', '#66BB6A', '#4CAF50', '#43A047'],\n    ibuprofen: ['#FFB74D', '#FFA726', '#FF9800', '#FB8C00'],\n    caffeine: ['#BA68C8', '#AB47BC', '#9C27B0', '#8E24AA'],\n    default: ['#7C4DFF', '#651FFF', '#6200EA', '#536DFE']\n};\n\nexport interface GeneratedImage {\n    url: string;\n    generatedAt: number;\n    prompt: string;\n}\n\nexport const ImageService = {\n    /**\n     * Generate a molecule image using AI and upload to Firebase Storage\n     */\n    async generateMoleculeImage(\n        moleculeName: string,\n        trialId: string,\n        efficacy: number = 50,\n        safety: number = 50,\n        visualPrompt?: string\n    ): Promise<GeneratedImage | null> {\n        try {\n            // Create a descriptive prompt for molecule visualization\n            // If visualPrompt is provided (from AI analysis), use it, otherwise fallback to template\n            const prompt = visualPrompt\n                ? `${visualPrompt}, high quality, detailed scientific render, 8k resolution, photorealistic`\n                : this.createMoleculePrompt(moleculeName, efficacy, safety);\n\n            // Try AI Guru Lab API first, then fallback to procedural\n            let imageBlob: Blob | null = null;\n\n            if (IMAGE_API_KEY && IMAGE_API_KEY.length > 10) {\n                try {\n                    imageBlob = await this.callAIGuruLabAPI(prompt);\n                } catch (apiError) {\n                    console.warn('AI Guru Lab API error, using procedural fallback');\n                    imageBlob = null;\n                }\n            }\n\n            // If AI API fails or not configured, generate procedural SVG\n            if (!imageBlob) {\n                console.log('Generating procedural molecule SVG for:', moleculeName);\n                imageBlob = await this.generateProceduralMolecule(moleculeName, efficacy, safety);\n            }\n\n            // Upload to Firebase Storage\n            let url = '';\n            try {\n                url = await this.uploadToFirebase(imageBlob, trialId);\n            } catch (uploadError: any) {\n                console.warn('Firebase Upload Failed:', uploadError.message);\n                // Fallback: Convert Blob to Base64 Data URI so image still shows up\n                if (imageBlob) {\n                    url = await new Promise<string>((resolve) => {\n                        const reader = new FileReader();\n                        reader.onloadend = () => resolve(reader.result as string);\n                        reader.readAsDataURL(imageBlob as Blob);\n                    });\n                }\n            }\n\n            return {\n                url,\n                generatedAt: Date.now(),\n                prompt\n            };\n        } catch (error) {\n            console.error('Failed to generate molecule image:', error);\n            return null;\n        }\n    },\n\n    /**\n     * Create a descriptive prompt for molecule image generation\n     */\n    createMoleculePrompt(moleculeName: string, efficacy: number, safety: number): string {\n        const quality = efficacy > 70 ? 'high-quality, well-structured' : 'experimental';\n        const stability = safety > 70 ? 'stable' : 'reactive';\n\n        return `Scientific 3D molecular structure visualization of ${moleculeName}, ${quality} ${stability} pharmaceutical compound, glowing atoms, dark background, neon blue and purple accents, professional medical illustration, high detail`;\n    },\n\n    /**\n     * Call AI Guru Lab API for image generation\n     */\n    async callAIGuruLabAPI(prompt: string): Promise<Blob | null> {\n        if (!IMAGE_API_KEY) return null;\n\n        try {\n            // AI Guru Lab API endpoint\n            const response = await fetch('https://aigurulab.tech/api/generate-image', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'x-api-key': IMAGE_API_KEY\n                },\n                body: JSON.stringify({\n                    input: prompt, // SDK uses 'input' for the prompt\n                    width: 1024,\n                    height: 1024,\n                    model: 'flux',\n                    aspectRatio: \"1:1\"\n                })\n            });\n\n            if (!response.ok) {\n                console.warn('AI Guru Lab API failed:', response.status);\n                return null;\n            }\n\n            const data = await response.json();\n\n            // Handle response based on format (base64 or URL)\n            if (data.image) {\n                // Base64 response\n                const base64Data = data.image.replace(/^data:image\\/\\w+;base64,/, '');\n                const binaryString = atob(base64Data);\n                const bytes = new Uint8Array(binaryString.length);\n                for (let i = 0; i < binaryString.length; i++) {\n                    bytes[i] = binaryString.charCodeAt(i);\n                }\n                return new Blob([bytes], { type: 'image/png' });\n            } else if (data.url) {\n                // URL response - fetch and convert to blob\n                const imageResponse = await fetch(data.url);\n                return await imageResponse.blob();\n            }\n\n            return null;\n        } catch (error) {\n            console.warn('AI Guru Lab API error:', error);\n            return null;\n        }\n    },\n\n    /**\n     * Generate a procedural molecule SVG (fallback when AI is unavailable)\n     */\n    async generateProceduralMolecule(\n        moleculeName: string,\n        efficacy: number,\n        safety: number\n    ): Promise<Blob> {\n        // Determine colors based on molecule type\n        const lowerName = moleculeName.toLowerCase();\n        let colors = MOLECULE_COLORS.default;\n        for (const [key, palette] of Object.entries(MOLECULE_COLORS)) {\n            if (lowerName.includes(key)) {\n                colors = palette;\n                break;\n            }\n        }\n\n        // Generate atom positions based on molecule \"hash\"\n        const seed = this.hashString(moleculeName + efficacy + safety);\n        const atoms = this.generateAtomPositions(seed, 6 + (efficacy % 5));\n        const bonds = this.generateBonds(atoms);\n\n        // Create SVG\n        const svg = `\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"512\" height=\"512\" viewBox=\"0 0 512 512\">\n                <defs>\n                    <radialGradient id=\"bg\" cx=\"50%\" cy=\"50%\" r=\"70%\">\n                        <stop offset=\"0%\" stop-color=\"#1a1a2e\"/>\n                        <stop offset=\"100%\" stop-color=\"#0a0a15\"/>\n                    </radialGradient>\n                    <filter id=\"glow\">\n                        <feGaussianBlur stdDeviation=\"3\" result=\"coloredBlur\"/>\n                        <feMerge>\n                            <feMergeNode in=\"coloredBlur\"/>\n                            <feMergeNode in=\"SourceGraphic\"/>\n                        </feMerge>\n                    </filter>\n                    <radialGradient id=\"atom\" cx=\"30%\" cy=\"30%\" r=\"60%\">\n                        <stop offset=\"0%\" stop-color=\"${colors[0]}\"/>\n                        <stop offset=\"100%\" stop-color=\"${colors[2]}\"/>\n                    </radialGradient>\n                </defs>\n                <rect width=\"512\" height=\"512\" fill=\"url(#bg)\"/>\n                \n                <!-- Bonds -->\n                <g stroke=\"${colors[1]}\" stroke-width=\"3\" opacity=\"0.7\" filter=\"url(#glow)\">\n                    ${bonds.map(b => `<line x1=\"${b.x1}\" y1=\"${b.y1}\" x2=\"${b.x2}\" y2=\"${b.y2}\"/>`).join('\\n')}\n                </g>\n                \n                <!-- Atoms -->\n                <g filter=\"url(#glow)\">\n                    ${atoms.map((a, i) => `\n                        <circle cx=\"${a.x}\" cy=\"${a.y}\" r=\"${15 + (i % 3) * 5}\" fill=\"url(#atom)\"/>\n                        <circle cx=\"${a.x - 4}\" cy=\"${a.y - 4}\" r=\"${5 + (i % 2) * 2}\" fill=\"white\" opacity=\"0.3\"/>\n                    `).join('\\n')}\n                </g>\n                \n                <!-- Center glow effect -->\n                <circle cx=\"256\" cy=\"256\" r=\"100\" fill=\"none\" stroke=\"${colors[0]}\" stroke-width=\"1\" opacity=\"0.2\"/>\n                <circle cx=\"256\" cy=\"256\" r=\"150\" fill=\"none\" stroke=\"${colors[1]}\" stroke-width=\"0.5\" opacity=\"0.1\"/>\n            </svg>\n        `;\n\n        return new Blob([svg], { type: 'image/svg+xml' });\n    },\n\n    /**\n     * Upload image blob to Firebase Storage\n     */\n    async uploadToFirebase(blob: Blob, trialId: string): Promise<string> {\n        const extension = blob.type.includes('svg') ? 'svg' : 'png';\n        const storageRef = ref(storage, `molecules/${trialId}.${extension}`);\n\n        await uploadBytes(storageRef, blob);\n        const downloadUrl = await getDownloadURL(storageRef);\n\n        return downloadUrl;\n    },\n\n    /**\n     * Get existing molecule image URL from storage\n     */\n    async getMoleculeImageUrl(trialId: string): Promise<string | null> {\n        try {\n            // Try PNG first, then SVG\n            const pngRef = ref(storage, `molecules/${trialId}.png`);\n            try {\n                return await getDownloadURL(pngRef);\n            } catch {\n                const svgRef = ref(storage, `molecules/${trialId}.svg`);\n                return await getDownloadURL(svgRef);\n            }\n        } catch {\n            return null;\n        }\n    },\n\n    // Helper: Simple string hash for deterministic generation\n    hashString(str: string): number {\n        let hash = 0;\n        for (let i = 0; i < str.length; i++) {\n            const char = str.charCodeAt(i);\n            hash = ((hash << 5) - hash) + char;\n            hash = hash & hash;\n        }\n        return Math.abs(hash);\n    },\n\n    // Helper: Generate atom positions in a somewhat structured way\n    generateAtomPositions(seed: number, count: number): Array<{ x: number, y: number }> {\n        const atoms: Array<{ x: number, y: number }> = [];\n        const centerX = 256, centerY = 256;\n\n        for (let i = 0; i < count; i++) {\n            const angle = ((seed + i * 137.5) % 360) * (Math.PI / 180);\n            const radius = 60 + ((seed * (i + 1)) % 120);\n            atoms.push({\n                x: centerX + Math.cos(angle) * radius,\n                y: centerY + Math.sin(angle) * radius\n            });\n        }\n\n        return atoms;\n    },\n\n    // Helper: Generate bonds between nearby atoms\n    generateBonds(atoms: Array<{ x: number, y: number }>): Array<{ x1: number, y1: number, x2: number, y2: number }> {\n        const bonds: Array<{ x1: number, y1: number, x2: number, y2: number }> = [];\n\n        for (let i = 0; i < atoms.length; i++) {\n            // Connect to next atom (ring structure)\n            const j = (i + 1) % atoms.length;\n            bonds.push({\n                x1: atoms[i].x, y1: atoms[i].y,\n                x2: atoms[j].x, y2: atoms[j].y\n            });\n\n            // Connect some atoms to center for structure\n            if (i % 2 === 0) {\n                bonds.push({\n                    x1: atoms[i].x, y1: atoms[i].y,\n                    x2: 256, y2: 256\n                });\n            }\n        }\n\n        return bonds;\n    }\n};\n"],"names":[],"mappings":"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","ignoreList":[1,2,7]}