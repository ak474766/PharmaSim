module.exports=[25238,a=>{a.v({active:"Builder-module__puRpEa__active",aiFeedback:"Builder-module__puRpEa__aiFeedback",btn:"Builder-module__puRpEa__btn",btnPrimary:"Builder-module__puRpEa__btnPrimary",btnSuccess:"Builder-module__puRpEa__btnSuccess",builderContainer:"Builder-module__puRpEa__builderContainer",canvasArea:"Builder-module__puRpEa__canvasArea",canvasContainer:"Builder-module__puRpEa__canvasContainer",canvasHeader:"Builder-module__puRpEa__canvasHeader",container:"Builder-module__puRpEa__container",controls:"Builder-module__puRpEa__controls",elementCard:"Builder-module__puRpEa__elementCard",elementList:"Builder-module__puRpEa__elementList",elementsGrid:"Builder-module__puRpEa__elementsGrid",feedbackStats:"Builder-module__puRpEa__feedbackStats",header:"Builder-module__puRpEa__header",hintCard:"Builder-module__puRpEa__hintCard",hintText:"Builder-module__puRpEa__hintText",hintTitle:"Builder-module__puRpEa__hintTitle",iconPurple:"Builder-module__puRpEa__iconPurple",palette:"Builder-module__puRpEa__palette",propBar:"Builder-module__puRpEa__propBar",propFill:"Builder-module__puRpEa__propFill",propHeader:"Builder-module__puRpEa__propHeader",propLabel:"Builder-module__puRpEa__propLabel",propSection:"Builder-module__puRpEa__propSection",propTags:"Builder-module__puRpEa__propTags",propValue:"Builder-module__puRpEa__propValue",properties:"Builder-module__puRpEa__properties",selected:"Builder-module__puRpEa__selected",sidebar:"Builder-module__puRpEa__sidebar",statusMsg:"Builder-module__puRpEa__statusMsg",tag:"Builder-module__puRpEa__tag"})},54826,(a,b,c)=>{},15299,(a,b,c)=>{a.r(54826);var d=a.r(72131),e=d&&"object"==typeof d&&"default"in d?d:{default:d},f="u">typeof process&&process.env&&!0,g=function(a){return"[object String]"===Object.prototype.toString.call(a)},h=function(){function a(a){var b=void 0===a?{}:a,c=b.name,d=void 0===c?"stylesheet":c,e=b.optimizeForSpeed,h=void 0===e?f:e;i(g(d),"`name` must be a string"),this._name=d,this._deletedRulePlaceholder="#"+d+"-deleted-rule____{}",i("boolean"==typeof h,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=h,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0,this._nonce=null}var b,c=a.prototype;return c.setOptimizeForSpeed=function(a){i("boolean"==typeof a,"`setOptimizeForSpeed` accepts a boolean"),i(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=a,this.inject()},c.isOptimizeForSpeed=function(){return this._optimizeForSpeed},c.inject=function(){var a=this;i(!this._injected,"sheet already injected"),this._injected=!0,this._serverSheet={cssRules:[],insertRule:function(b,c){return"number"==typeof c?a._serverSheet.cssRules[c]={cssText:b}:a._serverSheet.cssRules.push({cssText:b}),c},deleteRule:function(b){a._serverSheet.cssRules[b]=null}}},c.getSheetForTag=function(a){if(a.sheet)return a.sheet;for(var b=0;b<document.styleSheets.length;b++)if(document.styleSheets[b].ownerNode===a)return document.styleSheets[b]},c.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},c.insertRule=function(a,b){return i(g(a),"`insertRule` accepts only strings"),"number"!=typeof b&&(b=this._serverSheet.cssRules.length),this._serverSheet.insertRule(a,b),this._rulesCount++},c.replaceRule=function(a,b){this._optimizeForSpeed;var c=this._serverSheet;if(b.trim()||(b=this._deletedRulePlaceholder),!c.cssRules[a])return a;c.deleteRule(a);try{c.insertRule(b,a)}catch(d){f||console.warn("StyleSheet: illegal rule: \n\n"+b+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),c.insertRule(this._deletedRulePlaceholder,a)}return a},c.deleteRule=function(a){this._serverSheet.deleteRule(a)},c.flush=function(){this._injected=!1,this._rulesCount=0,this._serverSheet.cssRules=[]},c.cssRules=function(){return this._serverSheet.cssRules},c.makeStyleTag=function(a,b,c){b&&i(g(b),"makeStyleTag accepts only strings as second parameter");var d=document.createElement("style");this._nonce&&d.setAttribute("nonce",this._nonce),d.type="text/css",d.setAttribute("data-"+a,""),b&&d.appendChild(document.createTextNode(b));var e=document.head||document.getElementsByTagName("head")[0];return c?e.insertBefore(d,c):e.appendChild(d),d},b=[{key:"length",get:function(){return this._rulesCount}}],function(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}(a.prototype,b),a}();function i(a,b){if(!a)throw Error("StyleSheet: "+b+".")}var j=function(a){for(var b=5381,c=a.length;c;)b=33*b^a.charCodeAt(--c);return b>>>0},k={};function l(a,b){if(!b)return"jsx-"+a;var c=String(b),d=a+c;return k[d]||(k[d]="jsx-"+j(a+"-"+c)),k[d]}function m(a,b){var c=a+(b=b.replace(/\/style/gi,"\\/style"));return k[c]||(k[c]=b.replace(/__jsx-style-dynamic-selector/g,a)),k[c]}var n=function(){function a(a){var b=void 0===a?{}:a,c=b.styleSheet,d=void 0===c?null:c,e=b.optimizeForSpeed,f=void 0!==e&&e;this._sheet=d||new h({name:"styled-jsx",optimizeForSpeed:f}),this._sheet.inject(),d&&"boolean"==typeof f&&(this._sheet.setOptimizeForSpeed(f),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var b=a.prototype;return b.add=function(a){var b=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(a.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed());var c=this.getIdAndRules(a),d=c.styleId,e=c.rules;if(d in this._instancesCounts){this._instancesCounts[d]+=1;return}var f=e.map(function(a){return b._sheet.insertRule(a)}).filter(function(a){return -1!==a});this._indices[d]=f,this._instancesCounts[d]=1},b.remove=function(a){var b=this,c=this.getIdAndRules(a).styleId;if(function(a,b){if(!a)throw Error("StyleSheetRegistry: "+b+".")}(c in this._instancesCounts,"styleId: `"+c+"` not found"),this._instancesCounts[c]-=1,this._instancesCounts[c]<1){var d=this._fromServer&&this._fromServer[c];d?(d.parentNode.removeChild(d),delete this._fromServer[c]):(this._indices[c].forEach(function(a){return b._sheet.deleteRule(a)}),delete this._indices[c]),delete this._instancesCounts[c]}},b.update=function(a,b){this.add(b),this.remove(a)},b.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},b.cssRules=function(){var a=this,b=this._fromServer?Object.keys(this._fromServer).map(function(b){return[b,a._fromServer[b]]}):[],c=this._sheet.cssRules();return b.concat(Object.keys(this._indices).map(function(b){return[b,a._indices[b].map(function(a){return c[a].cssText}).join(a._optimizeForSpeed?"":"\n")]}).filter(function(a){return!!a[1]}))},b.styles=function(a){var b,c;return b=this.cssRules(),void 0===(c=a)&&(c={}),b.map(function(a){var b=a[0],d=a[1];return e.default.createElement("style",{id:"__"+b,key:"__"+b,nonce:c.nonce?c.nonce:void 0,dangerouslySetInnerHTML:{__html:d}})})},b.getIdAndRules=function(a){var b=a.children,c=a.dynamic,d=a.id;if(c){var e=l(d,c);return{styleId:e,rules:Array.isArray(b)?b.map(function(a){return m(e,a)}):[m(e,b)]}}return{styleId:l(d),rules:Array.isArray(b)?b:[b]}},b.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(a,b){return a[b.id.slice(2)]=b,a},{})},a}(),o=d.createContext(null);function p(){return new n}function q(){return d.useContext(o)}function r(a){var b=q();return b&&b.add(a),null}o.displayName="StyleSheetContext",e.default.useInsertionEffect||e.default.useLayoutEffect,r.dynamic=function(a){return a.map(function(a){return l(a[0],a[1])}).join(" ")},c.StyleRegistry=function(a){var b=a.registry,c=a.children,f=d.useContext(o),g=d.useState(function(){return f||b||p()})[0];return e.default.createElement(o.Provider,{value:g},c)},c.createStyleRegistry=p,c.style=r,c.useStyleRegistry=q},31626,(a,b,c)=>{b.exports=a.r(15299).style},48910,a=>{a.v({activeTab:"ChemistryReference-module__K33AyG__activeTab",bondCard:"ChemistryReference-module__K33AyG__bondCard",bondDescription:"ChemistryReference-module__K33AyG__bondDescription",bondElectrons:"ChemistryReference-module__K33AyG__bondElectrons",bondExamples:"ChemistryReference-module__K33AyG__bondExamples",bondHeader:"ChemistryReference-module__K33AyG__bondHeader",bondName:"ChemistryReference-module__K33AyG__bondName",bondStrength:"ChemistryReference-module__K33AyG__bondStrength",bondSymbol:"ChemistryReference-module__K33AyG__bondSymbol",bondsList:"ChemistryReference-module__K33AyG__bondsList",closeBtn:"ChemistryReference-module__K33AyG__closeBtn",content:"ChemistryReference-module__K33AyG__content",detailGrid:"ChemistryReference-module__K33AyG__detailGrid",detailItem:"ChemistryReference-module__K33AyG__detailItem",detailLabel:"ChemistryReference-module__K33AyG__detailLabel",detailValue:"ChemistryReference-module__K33AyG__detailValue",elementCard:"ChemistryReference-module__K33AyG__elementCard",elementDetail:"ChemistryReference-module__K33AyG__elementDetail",elementName:"ChemistryReference-module__K33AyG__elementName",elementNumber:"ChemistryReference-module__K33AyG__elementNumber",elementSymbol:"ChemistryReference-module__K33AyG__elementSymbol",elementsGrid:"ChemistryReference-module__K33AyG__elementsGrid",groupCard:"ChemistryReference-module__K33AyG__groupCard",groupDescription:"ChemistryReference-module__K33AyG__groupDescription",groupExamples:"ChemistryReference-module__K33AyG__groupExamples",groupHeader:"ChemistryReference-module__K33AyG__groupHeader",groupIcon:"ChemistryReference-module__K33AyG__groupIcon",groupName:"ChemistryReference-module__K33AyG__groupName",groupRelevance:"ChemistryReference-module__K33AyG__groupRelevance",groupStructure:"ChemistryReference-module__K33AyG__groupStructure",groupsList:"ChemistryReference-module__K33AyG__groupsList",header:"ChemistryReference-module__K33AyG__header",overlay:"ChemistryReference-module__K33AyG__overlay",panel:"ChemistryReference-module__K33AyG__panel",selected:"ChemistryReference-module__K33AyG__selected",smilesExample:"ChemistryReference-module__K33AyG__smilesExample",smilesExamples:"ChemistryReference-module__K33AyG__smilesExamples",smilesGuide:"ChemistryReference-module__K33AyG__smilesGuide",smilesIntro:"ChemistryReference-module__K33AyG__smilesIntro",smilesTable:"ChemistryReference-module__K33AyG__smilesTable",smilesTitle:"ChemistryReference-module__K33AyG__smilesTitle",tab:"ChemistryReference-module__K33AyG__tab",tabs:"ChemistryReference-module__K33AyG__tabs",tipCard:"ChemistryReference-module__K33AyG__tipCard",tipContent:"ChemistryReference-module__K33AyG__tipContent",tipTitle:"ChemistryReference-module__K33AyG__tipTitle",tipsList:"ChemistryReference-module__K33AyG__tipsList",title:"ChemistryReference-module__K33AyG__title"})},74199,a=>{"use strict";var b=a.i(87924),c=a.i(54354),d=a.i(72131),e=a.i(98167),f=e;let g={type:"change"},h={type:"start"},i={type:"end"},j=new f.Ray,k=new f.Plane,l=Math.cos(70*f.MathUtils.DEG2RAD);class m extends f.EventDispatcher{constructor(a,b){super(),this.object=a,this.domElement=b,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new f.Vector3,this.cursor=new f.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:f.MOUSE.ROTATE,MIDDLE:f.MOUSE.DOLLY,RIGHT:f.MOUSE.PAN},this.touches={ONE:f.TOUCH.ROTATE,TWO:f.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return n.phi},this.getAzimuthalAngle=function(){return n.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(a){a.addEventListener("keydown",ab),this._domElementKeyEvents=a},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",ab),this._domElementKeyEvents=null},this.saveState=function(){c.target0.copy(c.target),c.position0.copy(c.object.position),c.zoom0=c.object.zoom},this.reset=function(){c.target.copy(c.target0),c.object.position.copy(c.position0),c.object.zoom=c.zoom0,c.object.updateProjectionMatrix(),c.dispatchEvent(g),c.update(),e=d.NONE},this.update=function(){let b=new f.Vector3,h=new f.Quaternion().setFromUnitVectors(a.up,new f.Vector3(0,1,0)),i=h.clone().invert(),r=new f.Vector3,s=new f.Quaternion,t=new f.Vector3,u=2*Math.PI;return function(v=null){var w;let x=c.object.position;b.copy(x).sub(c.target),b.applyQuaternion(h),n.setFromVector3(b),c.autoRotate&&e===d.NONE&&H(null!==(w=v)?2*Math.PI/60*c.autoRotateSpeed*w:2*Math.PI/60/60*c.autoRotateSpeed),c.enableDamping?(n.theta+=o.theta*c.dampingFactor,n.phi+=o.phi*c.dampingFactor):(n.theta+=o.theta,n.phi+=o.phi);let y=c.minAzimuthAngle,z=c.maxAzimuthAngle;isFinite(y)&&isFinite(z)&&(y<-Math.PI?y+=u:y>Math.PI&&(y-=u),z<-Math.PI?z+=u:z>Math.PI&&(z-=u),y<=z?n.theta=Math.max(y,Math.min(z,n.theta)):n.theta=n.theta>(y+z)/2?Math.max(y,n.theta):Math.min(z,n.theta)),n.phi=Math.max(c.minPolarAngle,Math.min(c.maxPolarAngle,n.phi)),n.makeSafe(),!0===c.enableDamping?c.target.addScaledVector(q,c.dampingFactor):c.target.add(q),c.target.sub(c.cursor),c.target.clampLength(c.minTargetRadius,c.maxTargetRadius),c.target.add(c.cursor),c.zoomToCursor&&C||c.object.isOrthographicCamera?n.radius=P(n.radius):n.radius=P(n.radius*p),b.setFromSpherical(n),b.applyQuaternion(i),x.copy(c.target).add(b),c.object.lookAt(c.target),!0===c.enableDamping?(o.theta*=1-c.dampingFactor,o.phi*=1-c.dampingFactor,q.multiplyScalar(1-c.dampingFactor)):(o.set(0,0,0),q.set(0,0,0));let D=!1;if(c.zoomToCursor&&C){let d=null;if(c.object.isPerspectiveCamera){let a=b.length();d=P(a*p);let e=a-d;c.object.position.addScaledVector(A,e),c.object.updateMatrixWorld()}else if(c.object.isOrthographicCamera){let a=new f.Vector3(B.x,B.y,0);a.unproject(c.object),c.object.zoom=Math.max(c.minZoom,Math.min(c.maxZoom,c.object.zoom/p)),c.object.updateProjectionMatrix(),D=!0;let e=new f.Vector3(B.x,B.y,0);e.unproject(c.object),c.object.position.sub(e).add(a),c.object.updateMatrixWorld(),d=b.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),c.zoomToCursor=!1;null!==d&&(this.screenSpacePanning?c.target.set(0,0,-1).transformDirection(c.object.matrix).multiplyScalar(d).add(c.object.position):(j.origin.copy(c.object.position),j.direction.set(0,0,-1).transformDirection(c.object.matrix),Math.abs(c.object.up.dot(j.direction))<l?a.lookAt(c.target):(k.setFromNormalAndCoplanarPoint(c.object.up,c.target),j.intersectPlane(k,c.target))))}else c.object.isOrthographicCamera&&(c.object.zoom=Math.max(c.minZoom,Math.min(c.maxZoom,c.object.zoom/p)),c.object.updateProjectionMatrix(),D=!0);return p=1,C=!1,!!(D||r.distanceToSquared(c.object.position)>m||8*(1-s.dot(c.object.quaternion))>m||t.distanceToSquared(c.target)>0)&&(c.dispatchEvent(g),r.copy(c.object.position),s.copy(c.object.quaternion),t.copy(c.target),!0)}}(),this.dispose=function(){c.domElement.removeEventListener("contextmenu",ac),c.domElement.removeEventListener("pointerdown",Y),c.domElement.removeEventListener("pointercancel",$),c.domElement.removeEventListener("wheel",_),c.domElement.removeEventListener("pointermove",Z),c.domElement.removeEventListener("pointerup",$),null!==c._domElementKeyEvents&&(c._domElementKeyEvents.removeEventListener("keydown",ab),c._domElementKeyEvents=null)};const c=this,d={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let e=d.NONE;const m=1e-6,n=new f.Spherical,o=new f.Spherical;let p=1;const q=new f.Vector3,r=new f.Vector2,s=new f.Vector2,t=new f.Vector2,u=new f.Vector2,v=new f.Vector2,w=new f.Vector2,x=new f.Vector2,y=new f.Vector2,z=new f.Vector2,A=new f.Vector3,B=new f.Vector2;let C=!1;const D=[],E={};let F=!1;function G(a){let b=Math.abs(.01*a);return Math.pow(.95,c.zoomSpeed*b)}function H(a){o.theta-=a}function I(a){o.phi-=a}const J=function(){let a=new f.Vector3;return function(b,c){a.setFromMatrixColumn(c,0),a.multiplyScalar(-b),q.add(a)}}(),K=function(){let a=new f.Vector3;return function(b,d){!0===c.screenSpacePanning?a.setFromMatrixColumn(d,1):(a.setFromMatrixColumn(d,0),a.crossVectors(c.object.up,a)),a.multiplyScalar(b),q.add(a)}}(),L=function(){let a=new f.Vector3;return function(b,d){let e=c.domElement;if(c.object.isPerspectiveCamera){let f=c.object.position;a.copy(f).sub(c.target);let g=a.length();J(2*b*(g*=Math.tan(c.object.fov/2*Math.PI/180))/e.clientHeight,c.object.matrix),K(2*d*g/e.clientHeight,c.object.matrix)}else c.object.isOrthographicCamera?(J(b*(c.object.right-c.object.left)/c.object.zoom/e.clientWidth,c.object.matrix),K(d*(c.object.top-c.object.bottom)/c.object.zoom/e.clientHeight,c.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),c.enablePan=!1)}}();function M(a){c.object.isPerspectiveCamera||c.object.isOrthographicCamera?p/=a:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),c.enableZoom=!1)}function N(a){c.object.isPerspectiveCamera||c.object.isOrthographicCamera?p*=a:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),c.enableZoom=!1)}function O(a,b){if(!c.zoomToCursor)return;C=!0;let d=c.domElement.getBoundingClientRect(),e=a-d.left,f=b-d.top,g=d.width,h=d.height;B.x=e/g*2-1,B.y=-(f/h*2)+1,A.set(B.x,B.y,1).unproject(c.object).sub(c.object.position).normalize()}function P(a){return Math.max(c.minDistance,Math.min(c.maxDistance,a))}function Q(a){r.set(a.clientX,a.clientY)}function R(a){u.set(a.clientX,a.clientY)}function S(a){if(1===D.length)r.set(a.pageX,a.pageY);else{let b=ae(a),c=.5*(a.pageX+b.x),d=.5*(a.pageY+b.y);r.set(c,d)}}function T(a){if(1===D.length)u.set(a.pageX,a.pageY);else{let b=ae(a),c=.5*(a.pageX+b.x),d=.5*(a.pageY+b.y);u.set(c,d)}}function U(a){let b=ae(a),c=a.pageX-b.x,d=a.pageY-b.y,e=Math.sqrt(c*c+d*d);x.set(0,e)}function V(a){if(1==D.length)s.set(a.pageX,a.pageY);else{let b=ae(a),c=.5*(a.pageX+b.x),d=.5*(a.pageY+b.y);s.set(c,d)}t.subVectors(s,r).multiplyScalar(c.rotateSpeed);let b=c.domElement;H(2*Math.PI*t.x/b.clientHeight),I(2*Math.PI*t.y/b.clientHeight),r.copy(s)}function W(a){if(1===D.length)v.set(a.pageX,a.pageY);else{let b=ae(a),c=.5*(a.pageX+b.x),d=.5*(a.pageY+b.y);v.set(c,d)}w.subVectors(v,u).multiplyScalar(c.panSpeed),L(w.x,w.y),u.copy(v)}function X(a){let b=ae(a),d=a.pageX-b.x,e=a.pageY-b.y,f=Math.sqrt(d*d+e*e);y.set(0,f),z.set(0,Math.pow(y.y/x.y,c.zoomSpeed)),M(z.y),x.copy(y),O((a.pageX+b.x)*.5,(a.pageY+b.y)*.5)}function Y(a){var b;!1!==c.enabled&&(0===D.length&&(c.domElement.setPointerCapture(a.pointerId),c.domElement.addEventListener("pointermove",Z),c.domElement.addEventListener("pointerup",$)),b=a,D.push(b.pointerId),"touch"===a.pointerType?function(a){switch(ad(a),D.length){case 1:switch(c.touches.ONE){case f.TOUCH.ROTATE:if(!1===c.enableRotate)return;S(a),e=d.TOUCH_ROTATE;break;case f.TOUCH.PAN:if(!1===c.enablePan)return;T(a),e=d.TOUCH_PAN;break;default:e=d.NONE}break;case 2:switch(c.touches.TWO){case f.TOUCH.DOLLY_PAN:if(!1===c.enableZoom&&!1===c.enablePan)return;c.enableZoom&&U(a),c.enablePan&&T(a),e=d.TOUCH_DOLLY_PAN;break;case f.TOUCH.DOLLY_ROTATE:if(!1===c.enableZoom&&!1===c.enableRotate)return;c.enableZoom&&U(a),c.enableRotate&&S(a),e=d.TOUCH_DOLLY_ROTATE;break;default:e=d.NONE}break;default:e=d.NONE}e!==d.NONE&&c.dispatchEvent(h)}(a):function(a){let b;switch(a.button){case 0:b=c.mouseButtons.LEFT;break;case 1:b=c.mouseButtons.MIDDLE;break;case 2:b=c.mouseButtons.RIGHT;break;default:b=-1}switch(b){case f.MOUSE.DOLLY:if(!1===c.enableZoom)return;O(a.clientX,a.clientX),x.set(a.clientX,a.clientY),e=d.DOLLY;break;case f.MOUSE.ROTATE:if(a.ctrlKey||a.metaKey||a.shiftKey){if(!1===c.enablePan)return;R(a),e=d.PAN}else{if(!1===c.enableRotate)return;Q(a),e=d.ROTATE}break;case f.MOUSE.PAN:if(a.ctrlKey||a.metaKey||a.shiftKey){if(!1===c.enableRotate)return;Q(a),e=d.ROTATE}else{if(!1===c.enablePan)return;R(a),e=d.PAN}break;default:e=d.NONE}e!==d.NONE&&c.dispatchEvent(h)}(a))}function Z(a){!1!==c.enabled&&("touch"===a.pointerType?function(a){switch(ad(a),e){case d.TOUCH_ROTATE:if(!1===c.enableRotate)return;V(a),c.update();break;case d.TOUCH_PAN:if(!1===c.enablePan)return;W(a),c.update();break;case d.TOUCH_DOLLY_PAN:if(!1===c.enableZoom&&!1===c.enablePan)return;c.enableZoom&&X(a),c.enablePan&&W(a),c.update();break;case d.TOUCH_DOLLY_ROTATE:if(!1===c.enableZoom&&!1===c.enableRotate)return;c.enableZoom&&X(a),c.enableRotate&&V(a),c.update();break;default:e=d.NONE}}(a):function(a){switch(e){case d.ROTATE:let b;if(!1===c.enableRotate)return;s.set(a.clientX,a.clientY),t.subVectors(s,r).multiplyScalar(c.rotateSpeed),b=c.domElement,H(2*Math.PI*t.x/b.clientHeight),I(2*Math.PI*t.y/b.clientHeight),r.copy(s),c.update();break;case d.DOLLY:if(!1===c.enableZoom)return;y.set(a.clientX,a.clientY),z.subVectors(y,x),z.y>0?M(G(z.y)):z.y<0&&N(G(z.y)),x.copy(y),c.update();break;case d.PAN:if(!1===c.enablePan)return;v.set(a.clientX,a.clientY),w.subVectors(v,u).multiplyScalar(c.panSpeed),L(w.x,w.y),u.copy(v),c.update()}}(a))}function $(a){(function(a){delete E[a.pointerId];for(let b=0;b<D.length;b++)if(D[b]==a.pointerId)return void D.splice(b,1)})(a),0===D.length&&(c.domElement.releasePointerCapture(a.pointerId),c.domElement.removeEventListener("pointermove",Z),c.domElement.removeEventListener("pointerup",$)),c.dispatchEvent(i),e=d.NONE}function _(a){if(!1!==c.enabled&&!1!==c.enableZoom&&e===d.NONE){var b;a.preventDefault(),c.dispatchEvent(h),O((b=function(a){let b=a.deltaMode,c={clientX:a.clientX,clientY:a.clientY,deltaY:a.deltaY};switch(b){case 1:c.deltaY*=16;break;case 2:c.deltaY*=100}return a.ctrlKey&&!F&&(c.deltaY*=10),c}(a)).clientX,b.clientY),b.deltaY<0?N(G(b.deltaY)):b.deltaY>0&&M(G(b.deltaY)),c.update(),c.dispatchEvent(i)}}function aa(a){"Control"===a.key&&(F=!1,document.removeEventListener("keyup",aa,{passive:!0,capture:!0}))}function ab(a){if(!1!==c.enabled&&!1!==c.enablePan){let b=!1;switch(a.code){case c.keys.UP:a.ctrlKey||a.metaKey||a.shiftKey?I(2*Math.PI*c.rotateSpeed/c.domElement.clientHeight):L(0,c.keyPanSpeed),b=!0;break;case c.keys.BOTTOM:a.ctrlKey||a.metaKey||a.shiftKey?I(-2*Math.PI*c.rotateSpeed/c.domElement.clientHeight):L(0,-c.keyPanSpeed),b=!0;break;case c.keys.LEFT:a.ctrlKey||a.metaKey||a.shiftKey?H(2*Math.PI*c.rotateSpeed/c.domElement.clientHeight):L(c.keyPanSpeed,0),b=!0;break;case c.keys.RIGHT:a.ctrlKey||a.metaKey||a.shiftKey?H(-2*Math.PI*c.rotateSpeed/c.domElement.clientHeight):L(-c.keyPanSpeed,0),b=!0}b&&(a.preventDefault(),c.update())}}function ac(a){!1!==c.enabled&&a.preventDefault()}function ad(a){let b=E[a.pointerId];void 0===b&&(b=new f.Vector2,E[a.pointerId]=b),b.set(a.pageX,a.pageY)}function ae(a){return E[a.pointerId===D[0]?D[1]:D[0]]}c.domElement.addEventListener("contextmenu",ac),c.domElement.addEventListener("pointerdown",Y),c.domElement.addEventListener("pointercancel",$),c.domElement.addEventListener("wheel",_,{passive:!1}),document.addEventListener("keydown",function(a){"Control"===a.key&&(F=!0,document.addEventListener("keyup",aa,{passive:!0,capture:!0}))},{passive:!0,capture:!0}),this.update()}}let n={H:{name:"Hydrogen",symbol:"H",atomicNumber:1,color:0xffffff,radius:.8,mass:1.008,valence:[1]},C:{name:"Carbon",symbol:"C",atomicNumber:6,color:9474192,radius:1.2,mass:12.011,valence:[4]},N:{name:"Nitrogen",symbol:"N",atomicNumber:7,color:3166456,radius:1.1,mass:14.007,valence:[3,4,5]},O:{name:"Oxygen",symbol:"O",atomicNumber:8,color:0xff0d0d,radius:1,mass:15.999,valence:[2]},F:{name:"Fluorine",symbol:"F",atomicNumber:9,color:9494608,radius:.9,mass:18.998,valence:[1]},P:{name:"Phosphorus",symbol:"P",atomicNumber:15,color:0xff8000,radius:1.3,mass:30.974,valence:[3,5]},S:{name:"Sulfur",symbol:"S",atomicNumber:16,color:0xffff30,radius:1.3,mass:32.06,valence:[2,4,6]},Cl:{name:"Chlorine",symbol:"Cl",atomicNumber:17,color:2093087,radius:1.2,mass:35.45,valence:[1]},Br:{name:"Bromine",symbol:"Br",atomicNumber:35,color:0xa62929,radius:1.4,mass:79.904,valence:[1]},I:{name:"Iodine",symbol:"I",atomicNumber:53,color:9699476,radius:1.6,mass:126.9,valence:[1]}};class o{scene;camera;renderer;controls;raycaster;mouse;container;atoms=[];bonds=[];atomMeshes=new Map;bondMeshes=new Map;onAtomClick;onEmptyClick;onAtomHover;ghostMesh=null;hoveredAtomId=null;constructor(a,b,c,d,f,g){this.container=a,this.onAtomClick=d,this.onEmptyClick=f,this.onAtomHover=g,this.scene=new e.Scene,this.scene.background=new e.Color(328968),this.scene.fog=new e.Fog(328968,15,60),this.camera=new e.PerspectiveCamera(55,b/c,.1,1e3),this.camera.position.set(0,8,18),this.renderer=new e.WebGLRenderer({antialias:!0,alpha:!0}),this.renderer.setSize(b,c),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),a.appendChild(this.renderer.domElement),this.controls=new m(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.dampingFactor=.05,this.controls.minDistance=5,this.controls.maxDistance=50;const h=new e.AmbientLight(4210768,2);this.scene.add(h);const i=new e.PointLight(0xffffff,2.5);i.position.set(10,15,10),this.scene.add(i);const j=new e.DirectionalLight(0xffffff,1.5);j.position.set(-5,10,-5),this.scene.add(j);const k=new e.GridHelper(40,40,3355456,1710629);this.scene.add(k),this.raycaster=new e.Raycaster,this.mouse=new e.Vector2,this.renderer.domElement.addEventListener("click",this.handleClick.bind(this)),this.renderer.domElement.addEventListener("mousemove",this.handleMouseMove.bind(this)),this.animate()}updateGhost(a){if(this.ghostMesh&&(this.scene.remove(this.ghostMesh),this.ghostMesh=null),a&&n[a]){let b=n[a],c=new e.SphereGeometry(1,32,32),d=new e.MeshPhongMaterial({color:b.color,opacity:.4,transparent:!0,emissive:b.color,emissiveIntensity:.3});this.ghostMesh=new e.Mesh(c,d);let f=.5*b.radius;this.ghostMesh.scale.set(f,f,f),this.scene.add(this.ghostMesh)}}handleMouseMove(a){let b=this.renderer.domElement.getBoundingClientRect();this.mouse.x=(a.clientX-b.left)/b.width*2-1,this.mouse.y=-(2*((a.clientY-b.top)/b.height))+1,this.raycaster.setFromCamera(this.mouse,this.camera);let c=Array.from(this.atomMeshes.values()),d=this.raycaster.intersectObjects(c);if(d.length>0){let a=d[0].object;for(let[b,c]of this.atomMeshes.entries())if(c===a){if(this.hoveredAtomId!==b){this.hoveredAtomId=b;let a=this.atoms.find(a=>a.id===b);this.onAtomHover&&this.onAtomHover(a||null)}break}}else null!==this.hoveredAtomId&&(this.hoveredAtomId=null,this.onAtomHover&&this.onAtomHover(null));if(this.ghostMesh){let a=new e.Plane(new e.Vector3(0,1,0),0),b=new e.Vector3,c=this.raycaster.ray.intersectPlane(a,b);c?(this.ghostMesh.position.copy(c),this.ghostMesh.visible=!0):this.ghostMesh.visible=!1}}handleClick(a){let b=this.renderer.domElement.getBoundingClientRect();this.mouse.x=(a.clientX-b.left)/b.width*2-1,this.mouse.y=-(2*((a.clientY-b.top)/b.height))+1,this.raycaster.setFromCamera(this.mouse,this.camera);let c=Array.from(this.atomMeshes.values()),d=this.raycaster.intersectObjects(c);if(d.length>0){let a=d[0].object;for(let[b,c]of this.atomMeshes.entries())if(c===a&&this.onAtomClick)return void this.onAtomClick(b)}else{let a=new e.Plane(new e.Vector3(0,1,0),0),b=new e.Vector3,c=this.raycaster.ray.intersectPlane(a,b);c&&this.onEmptyClick&&this.onEmptyClick(c)}}updateMolecule(a,b){this.atoms=a,this.bonds=b,this.renderMolecule()}renderMolecule(){this.atomMeshes.forEach(a=>this.scene.remove(a)),this.atomMeshes.clear(),this.bondMeshes.forEach(a=>a.forEach(a=>this.scene.remove(a))),this.bondMeshes.clear();let a=new e.SphereGeometry(1,32,32),b=new e.CylinderGeometry(.15,.15,1,16);this.atoms.forEach(b=>{let c=n[b.element];if(!c)return;let d=new e.MeshPhongMaterial({color:c.color,shininess:80,specular:4473924}),f=new e.Mesh(a,d),g=.5*c.radius;f.scale.set(g,g,g),f.position.set(b.x,b.y,b.z),this.scene.add(f),this.atomMeshes.set(b.id,f)}),this.bonds.forEach(a=>{let c=this.atoms.find(b=>b.id===a.sourceId),d=this.atoms.find(b=>b.id===a.targetId);if(!c||!d)return;let f=new e.Vector3(c.x,c.y,c.z),g=new e.Vector3(d.x,d.y,d.z),h=f.distanceTo(g),i=new e.Vector3().addVectors(f,g).multiplyScalar(.5),j=new e.Vector3().subVectors(g,f).normalize(),k=new e.Quaternion;if(k.setFromUnitVectors(new e.Vector3(0,1,0),j),1===a.order){let c=new e.MeshPhongMaterial({color:6710912}),d=new e.Mesh(b,c);d.position.copy(i),d.quaternion.copy(k),d.scale.set(1,h,1),this.scene.add(d),this.bondMeshes.set(a.id,[d])}else if(a.order>=2){let c=new e.Vector3(0,0,1);Math.abs(j.z)>.9&&c.set(1,0,0);let d=new e.Vector3().crossVectors(j,c).normalize().multiplyScalar(.2),f=new e.Mesh(b,new e.MeshPhongMaterial({color:6710912}));f.position.copy(i).add(d),f.quaternion.copy(k),f.scale.set(.8,h,.8);let g=new e.Mesh(b,new e.MeshPhongMaterial({color:6710912}));g.position.copy(i).sub(d),g.quaternion.copy(k),g.scale.set(.8,h,.8),this.scene.add(f),this.scene.add(g),this.bondMeshes.set(a.id,[f,g])}})}resize(a,b){this.camera.aspect=a/b,this.camera.updateProjectionMatrix(),this.renderer.setSize(a,b)}dispose(){this.renderer.dispose(),this.container.contains(this.renderer.domElement)&&this.container.removeChild(this.renderer.domElement)}animate(){requestAnimationFrame(this.animate.bind(this)),this.controls.update(),this.renderer.render(this.scene,this.camera)}}let p=(0,d.forwardRef)(({atoms:a,bonds:c,selectedElement:e,onAtomClick:f,onEmptyClick:g},h)=>{let i=(0,d.useRef)(null),j=(0,d.useRef)(null),[k,l]=(0,d.useState)(null),[m,p]=(0,d.useState)({x:0,y:0}),q=(0,d.useRef)(f),r=(0,d.useRef)(g);return(0,d.useEffect)(()=>{q.current=f},[f]),(0,d.useEffect)(()=>{r.current=g},[g]),(0,d.useImperativeHandle)(h,()=>({resize:()=>{if(j.current&&i.current){let{clientWidth:a,clientHeight:b}=i.current;j.current.resize(a,b)}}})),(0,d.useEffect)(()=>{if(!i.current)return;let{clientWidth:a,clientHeight:b}=i.current,c=new o(i.current,a,b,a=>q.current?.(a),a=>r.current?.(a),a=>l(a));j.current=c;let d=new ResizeObserver(()=>{if(i.current&&j.current){let{clientWidth:a,clientHeight:b}=i.current;j.current.resize(a,b)}});return d.observe(i.current),()=>{c.dispose(),d.disconnect()}},[]),(0,d.useEffect)(()=>{j.current&&(j.current.updateMolecule(a,c),j.current.updateGhost(e||null))},[a,c,e]),(0,b.jsx)("div",{ref:i,onMouseMove:a=>{if(i.current){let b=i.current.getBoundingClientRect();p({x:a.clientX-b.left+15,y:a.clientY-b.top-10})}},style:{width:"100%",height:"100%",position:"relative",cursor:k?"pointer":"crosshair"},children:k&&(0,b.jsxs)("div",{style:{position:"absolute",left:m.x,top:m.y,background:"rgba(0, 0, 0, 0.9)",color:"#fff",padding:"8px 12px",borderRadius:"8px",fontSize:"0.85rem",fontWeight:600,pointerEvents:"none",zIndex:100,display:"flex",alignItems:"center",gap:"8px",border:"1px solid rgba(255,255,255,0.15)",boxShadow:"0 4px 12px rgba(0,0,0,0.4)"},children:[(0,b.jsx)("div",{style:{width:"14px",height:"14px",borderRadius:"50%",background:`#${n[k.element]?.color.toString(16).padStart(6,"0")||"ffffff"}`}}),(0,b.jsx)("span",{children:n[k.element]?.name||k.element}),(0,b.jsxs)("span",{style:{color:"#6b7280",fontWeight:400,fontSize:"0.75rem"},children:["(",k.element,")"]})]})})});p.displayName="View3D";var q=a.i(82011),r=a.i(46663);let s=[{formula:"H2",name:"Hydrogen Gas",score:10,category:"simple"},{formula:"O2",name:"Oxygen Gas",score:10,category:"simple"},{formula:"N2",name:"Nitrogen Gas",score:10,category:"simple"},{formula:"H2O",name:"Water",score:30,category:"simple",description:"Universal solvent"},{formula:"CO2",name:"Carbon Dioxide",score:40,category:"simple"},{formula:"NH3",name:"Ammonia",score:35,category:"simple"},{formula:"HCl",name:"Hydrochloric Acid",score:25,category:"simple"},{formula:"HF",name:"Hydrofluoric Acid",score:25,category:"simple"},{formula:"H2S",name:"Hydrogen Sulfide",score:30,category:"simple"},{formula:"CH4",name:"Methane",score:50,category:"organic",description:"Simplest alkane"},{formula:"C2H6",name:"Ethane",score:60,category:"organic"},{formula:"C3H8",name:"Propane",score:70,category:"organic"},{formula:"C4H10",name:"Butane",score:80,category:"organic"},{formula:"C2H4",name:"Ethylene",score:65,category:"organic",description:"Simplest alkene"},{formula:"C2H2",name:"Acetylene",score:70,category:"organic",description:"Simplest alkyne"},{formula:"C6H6",name:"Benzene",score:150,category:"organic",description:"Aromatic ring"},{formula:"CH4O",name:"Methanol",score:80,category:"organic"},{formula:"C2H6O",name:"Ethanol",score:100,category:"organic",description:"Drinking alcohol"},{formula:"C3H8O",name:"Propanol",score:110,category:"organic"},{formula:"C3H8O3",name:"Glycerol",score:140,category:"organic"},{formula:"CH2O",name:"Formaldehyde",score:70,category:"organic"},{formula:"C2H4O",name:"Acetaldehyde",score:85,category:"organic"},{formula:"C3H6O",name:"Acetone",score:95,category:"organic"},{formula:"CH2O2",name:"Formic Acid",score:75,category:"organic"},{formula:"C2H4O2",name:"Acetic Acid",score:90,category:"organic",description:"Vinegar"},{formula:"C3H6O2",name:"Propionic Acid",score:100,category:"organic"},{formula:"CH5N",name:"Methylamine",score:70,category:"organic"},{formula:"C2H7N",name:"Ethylamine",score:80,category:"organic"},{formula:"C6H7N",name:"Aniline",score:130,category:"organic"},{formula:"C8H9NO2",name:"Paracetamol",score:300,category:"drug",description:"Acetaminophen - analgesic"},{formula:"C9H8O4",name:"Aspirin",score:350,category:"drug",description:"Acetylsalicylic acid - NSAID"},{formula:"C13H18O2",name:"Ibuprofen",score:400,category:"drug",description:"NSAID anti-inflammatory"},{formula:"C8H10N4O2",name:"Caffeine",score:450,category:"drug",description:"Stimulant"},{formula:"C17H19NO3",name:"Morphine",score:500,category:"drug",description:"Opioid analgesic"},{formula:"C16H18N2O4S",name:"Penicillin G",score:550,category:"drug",description:"Beta-lactam antibiotic"},{formula:"C10H15N",name:"Amphetamine",score:380,category:"drug"},{formula:"C20H25N3O",name:"LSD",score:600,category:"drug"},{formula:"C21H23NO5",name:"Codeine",score:480,category:"drug"},{formula:"C14H18N2O5",name:"Aspartame",score:350,category:"organic"},{formula:"C6H12O6",name:"Glucose",score:250,category:"biomolecule",description:"Simple sugar"},{formula:"C5H10O5",name:"Ribose",score:220,category:"biomolecule"},{formula:"C4H8N2O3",name:"Asparagine",score:280,category:"biomolecule",description:"Amino acid"},{formula:"C5H9NO4",name:"Glutamic Acid",score:290,category:"biomolecule",description:"Amino acid"},{formula:"C3H7NO2",name:"Alanine",score:200,category:"biomolecule",description:"Simple amino acid"},{formula:"C2H5NO2",name:"Glycine",score:180,category:"biomolecule",description:"Simplest amino acid"},{formula:"CHCl3",name:"Chloroform",score:120,category:"organic"},{formula:"CCl4",name:"Carbon Tetrachloride",score:110,category:"organic"},{formula:"C4H8O2",name:"Ethyl Acetate",score:130,category:"organic",description:"Common solvent"}],t=[{name:"hydroxyl",displayName:"Hydroxyl (-OH)",icon:"ðŸ’§",drugRelevance:"Increases water solubility",pattern:(a,b,c)=>{let d=0;return a.forEach(e=>{if("O"===e.element){let f=c.get(e.id)||[];if(2===u(e.id,b).totalOrder){let b=f.some(b=>a.find(a=>a.id===b)?.element==="H"),c=f.some(b=>a.find(a=>a.id===b)?.element==="C");b&&c&&d++}}}),d}},{name:"carbonyl",displayName:"Carbonyl (C=O)",icon:"âš—ï¸",drugRelevance:"Reactive center, H-bond acceptor",pattern:(a,b)=>{let c=0;return b.forEach(b=>{if(2===b.order){let d=a.find(a=>a.id===b.sourceId),e=a.find(a=>a.id===b.targetId);(d?.element==="C"&&e?.element==="O"||d?.element==="O"&&e?.element==="C")&&c++}}),c}},{name:"carboxyl",displayName:"Carboxyl (-COOH)",icon:"ðŸ§ª",drugRelevance:"Acidic, increases solubility",pattern:(a,b,c)=>{let d=0;return a.forEach(e=>{if("C"===e.element){let f=(c.get(e.id)||[]).map(b=>a.find(a=>a.id===b)).filter(Boolean),g=b.some(b=>{if(2!==b.order)return!1;let c=b.sourceId===e.id?b.targetId:b.targetId===e.id?b.sourceId:null;return!!c&&a.find(a=>a.id===c)?.element==="O"}),h=f.some(b=>b?.element==="O"&&(c.get(b.id)||[]).some(b=>a.find(a=>a.id===b)?.element==="H"));g&&h&&d++}}),d}},{name:"amine",displayName:"Amine (-NHâ‚‚/-NHR)",icon:"ðŸ”µ",drugRelevance:"Basic, H-bond donor",pattern:(a,b,c)=>{let d=0;return a.forEach(e=>{if("N"===e.element){let f=(c.get(e.id)||[]).some(b=>a.find(a=>a.id===b)?.element==="H"),g=u(e.id,b);f&&g.totalOrder<=3&&!b.some(b=>{if(2!==b.order)return!1;let c=b.sourceId===e.id?b.targetId:b.targetId===e.id?b.sourceId:null;return c&&a.find(a=>a.id===c)?.element==="C"})&&d++}}),d}},{name:"amide",displayName:"Amide (-CONHâ‚‚)",icon:"ðŸ”—",drugRelevance:"Peptide bond mimic, stable",pattern:(a,b,c)=>{let d=0;return a.forEach(e=>{if("C"===e.element){let f=c.get(e.id)||[],g=b.some(b=>{if(2!==b.order)return!1;let c=b.sourceId===e.id?b.targetId:b.targetId===e.id?b.sourceId:null;return c&&a.find(a=>a.id===c)?.element==="O"}),h=f.some(c=>{let d=a.find(a=>a.id===c);if(d?.element!=="N")return!1;let f=b.find(a=>a.sourceId===e.id&&a.targetId===c||a.targetId===e.id&&a.sourceId===c);return f?.order===1});g&&h&&d++}}),d}},{name:"ether",displayName:"Ether (C-O-C)",icon:"â­•",drugRelevance:"Increases lipophilicity",pattern:(a,b,c)=>{let d=0;return a.forEach(e=>{if("O"===e.element){let f=c.get(e.id)||[];2===u(e.id,b).totalOrder&&2===f.length&&f.every(b=>a.find(a=>a.id===b)?.element==="C")&&d++}}),d}},{name:"ester",displayName:"Ester (-COO-)",icon:"ðŸ‹",drugRelevance:"Prodrug linkage, good absorption",pattern:(a,b,c)=>{let d=0;return a.forEach(e=>{if("C"===e.element){let f=c.get(e.id)||[],g=!1,h=!1;f.forEach(d=>{let f=a.find(a=>a.id===d);if(!f)return;let i=b.find(a=>a.sourceId===e.id&&a.targetId===d||a.targetId===e.id&&a.sourceId===d);"O"===f.element&&i?.order===2&&(g=!0),"O"===f.element&&i?.order===1&&(c.get(d)||[]).some(b=>b!==e.id&&a.find(a=>a.id===b)?.element==="C")&&(h=!0)}),g&&h&&d++}}),d}},{name:"halogen",displayName:"Halogen (F/Cl/Br/I)",icon:"ðŸŸ¢",drugRelevance:"Metabolic stability, lipophilicity",pattern:a=>a.filter(a=>["F","Cl","Br","I"].includes(a.element)).length},{name:"thiol",displayName:"Thiol (-SH)",icon:"ðŸŸ¡",drugRelevance:"Reactive, covalent drug target",pattern:(a,b,c)=>{let d=0;return a.forEach(b=>{"S"===b.element&&(c.get(b.id)||[]).some(b=>a.find(a=>a.id===b)?.element==="H")&&d++}),d}},{name:"phosphate",displayName:"Phosphate (-POâ‚„)",icon:"ðŸŸ ",drugRelevance:"Energy transfer, nucleotides",pattern:(a,b,c)=>{let d=0;return a.forEach(b=>{"P"===b.element&&(c.get(b.id)||[]).filter(b=>a.find(a=>a.id===b)?.element==="O").length>=3&&d++}),d}}];function u(a,b){let c=b.filter(b=>b.sourceId===a||b.targetId===a);return{count:c.length,totalOrder:c.reduce((a,b)=>a+b.order,0)}}function v(a,b){var c;let d,e,f,g,h,i,j,k,l,m,o=[],p=[],q=0;if(0===a.length)return{valid:!1,errors:["Molecule is empty"],warnings:[],score:0};let r=(e=new Map,a.forEach(a=>e.set(a.id,[])),b.forEach(a=>{e.get(a.sourceId)?.push(a.targetId),e.get(a.targetId)?.push(a.sourceId)}),e),v=function(a,b){if(0===a.length||1===a.length)return!0;let c=new Set,d=[a[0].id];for(;d.length>0;){let a=d.shift();c.has(a)||(c.add(a),(b.get(a)||[]).forEach(a=>{c.has(a)||d.push(a)}))}return c.size===a.length}(a,r);v||p.push("âš ï¸ Molecule has disconnected fragments");let w=!0;a.forEach(a=>{let c=u(a.id,b),d=n[a.element];if(!d){o.push(`Unknown element: ${a.element}`),w=!1;return}if(!d.valence.includes(c.totalOrder)){w=!1;let b=`${d.name} #${a.id.toString().slice(-4)}`,e=c.totalOrder,f=d.valence.join(" or ");0===e?o.push(`${b} has no bonds (needs ${f})`):e<Math.min(...d.valence)?o.push(`${b} needs more bonds: has ${e}, needs ${f}`):e>Math.max(...d.valence)?o.push(`${b} has too many bonds: has ${e}, max is ${Math.max(...d.valence)}`):o.push(`${b} has ${e} bonds (needs exactly ${f})`)}"C"===a.element&&3===c.totalOrder&&p.push("Carbon atom may be a carbocation (unstable)")});let x=(f=[],g=new Set,a.forEach(c=>{g.has(c.id)||(!function c(d,e,h){if(!(h.length>7))for(let i of r.get(d)||[]){if(i===e)continue;let j=h.indexOf(i);if(-1!==j){let c=h.slice(j),d=c.length;if(d>=3&&d<=7){let e=[...c].sort((a,b)=>a-b).join(",");if(!f.some(a=>[...a.atomIds].sort((a,b)=>a-b).join(",")===e)){let e=function(a,b,c){if(6!==a.length&&5!==a.length)return!1;let d=a.map(a=>b.find(b=>b.id===a)).filter(Boolean);if(d.length!==a.length)return!1;let e=["C","N","O","S"];if(!d.every(a=>e.includes(a.element)))return!1;let f=0;for(let b=0;b<a.length;b++){let d=a[b],e=a[(b+1)%a.length],g=c.find(a=>a.sourceId===d&&a.targetId===e||a.sourceId===e&&a.targetId===d);g?.order===2&&f++}return 6===a.length&&!!(f>=2)||5===a.length&&!!(f>=2)}(c,a,b);f.push({size:d,atomIds:c,isAromatic:e})}}}else g.has(i)||c(i,d,[...h,i])}}(c.id,null,[c.id]),g.add(c.id))}),f);x.forEach(a=>{3===a.size?p.push(`âš ï¸ 3-membered ring detected (high ring strain)`):4===a.size&&p.push(`âš ï¸ 4-membered ring detected (moderate ring strain)`)});let y=[],z=0;t.forEach(c=>{let d=c.pattern(a,b,r);d>0&&(z+=d,y.push(`${c.icon} ${c.displayName}${d>1?` (\xd7${d})`:""}`))});let A=(h={},a.forEach(a=>{h[a.element]=(h[a.element]||0)+1}),Object.keys(h).sort((a,b)=>"C"===a?-1:"C"===b?1:"H"===a?-1:"H"===b?1:a.localeCompare(b)).map(a=>`${a}${h[a]>1?h[a]:""}`).join("")),B=a.reduce((a,b)=>{let c=n[b.element];return a+(c?.mass||0)},0),C=a.filter(a=>"H"!==a.element).length,D=(i=0,b.forEach(b=>{if(1!==b.order)return;let c=a.find(a=>a.id===b.sourceId),d=a.find(a=>a.id===b.targetId);if(!c||!d||"H"===c.element||"H"===d.element)return;let e=r.get(c.id)?.length||0,f=r.get(d.id)?.length||0;e>1&&f>1&&i++}),i),E=(j=0,a.forEach(b=>{("O"===b.element||"N"===b.element)&&(r.get(b.id)||[]).some(b=>a.find(a=>a.id===b)?.element==="H")&&j++}),j),F=a.filter(a=>"O"===a.element||"N"===a.element).length,G=x.some(a=>a.isAromatic),H=(c=z,k=Math.min(2*a.length,30),l=Math.min(1.5*b.length,20),m=Math.min(10*x.length,25),Math.min(100,Math.round(k+l+m+5*x.filter(a=>a.isAromatic).length+Math.min(5*c,20)))),I={atomCount:a.length,bondCount:b.length,heavyAtomCount:C,rotableBonds:D,hBondDonors:E,hBondAcceptors:F,isConnected:v,hasAromaticRing:G,complexity:H};if(w){let b=s.find(a=>a.formula===A);b?(d=b.name,q=b.score,b.description&&p.unshift(`ðŸ’Š ${b.description}`)):(d="Valid Unknown Compound",q=Math.round(8*a.length+20*x.length+15*z+50*!!G)),G&&p.unshift("ðŸ”µ Contains aromatic ring system"),B<=500&&E<=5&&F<=10?C>=5&&(p.unshift("âœ… Passes Lipinski drug-likeness criteria"),q+=25):B>500&&p.push("âš ï¸ Molecular weight >500 (may have poor absorption)")}return{valid:w,errors:o,warnings:p,score:q,name:d,formula:A,molecularWeight:Math.round(100*B)/100,functionalGroups:y,rings:x,properties:I}}let w={H:[1],B:[3],C:[4],N:[3,4,5],O:[2],P:[3,5],S:[2,4,6],F:[1],Cl:[1],Br:[1],I:[1]},x=new Set(["B","C","N","O","P","S","F","Cl","Br","I"]),y={c:"C",n:"N",o:"O",s:"S",p:"P"};function z(a,b){return a[b.pos]||""}function A(a,b){return a[b.pos++]||""}function B(a,b){let c="";for(;b.pos<a.length&&/[0-9]/.test(a[b.pos]);)c+=A(a,b);return c?parseInt(c,10):null}function C(a,b,c,d){!a.bonds.some(a=>a.source===b&&a.target===c||a.source===c&&a.target===b)&&b!==c&&b>=0&&c>=0&&a.bonds.push({source:b,target:c,order:d})}let D={"C-C":1.54,"C=C":1.34,"C#C":1.2,"C-N":1.47,"C=N":1.29,"C#N":1.16,"C-O":1.43,"C=O":1.23,"C-S":1.82,"C=S":1.71,"C-H":1.09,"C-F":1.35,"C-Cl":1.77,"C-Br":1.94,"C-I":2.14,"N-N":1.45,"N=N":1.25,"N#N":1.1,"N-O":1.4,"N=O":1.21,"N-H":1.01,"O-O":1.48,"O=O":1.21,"O-H":.96,"S-S":2.05,"S-H":1.34,"P-O":1.63,"P=O":1.48,"P-H":1.42,DEFAULT:1.5};function E(a,b,c){let[d,e]=[a,b].sort(),f=`${d}${1===c?"-":2===c?"=":"#"}${e}`,g=`${d}-${e}`;return D[f]||D[g]||D.DEFAULT}let F=[{x:1,y:1,z:1},{x:1,y:-1,z:-1},{x:-1,y:1,z:-1},{x:-1,y:-1,z:1}].map(a=>{let b=Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z);return{x:a.x/b,y:a.y/b,z:a.z/b}}),G=[{x:1,y:0,z:0},{x:-.5,y:Math.sqrt(3)/2,z:0},{x:-.5,y:-Math.sqrt(3)/2,z:0}],H=[{x:1,y:0,z:0},{x:-1,y:0,z:0}];function I(a,b){return{x:a.x+b.x,y:a.y+b.y,z:a.z+b.z}}function J(a,b){return{x:a.x-b.x,y:a.y-b.y,z:a.z-b.z}}function K(a,b){return{x:a.x*b,y:a.y*b,z:a.z*b}}function L(a){return Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z)}function M(a){let b=L(a)||1;return{x:a.x/b,y:a.y/b,z:a.z/b}}function N(a,b){return{x:a.y*b.z-a.z*b.y,y:a.z*b.x-a.x*b.z,z:a.x*b.y-a.y*b.x}}function O(a,b){let c=new Map;for(let b=0;b<a;b++)c.set(b,[]);return b.forEach(a=>{c.get(a.source)?.push({neighbor:a.target,order:a.order}),c.get(a.target)?.push({neighbor:a.source,order:a.order})}),c}function P(a,b,c){let d=b.filter(b=>b.source===a||b.target===a),e=d.some(a=>3===a.order),f=d.filter(a=>2===a.order).length;return e?"sp":f>=1?"sp2":"sp3"}function Q(a){if(!(a=a.trim()))return{success:!1,atoms:[],bonds:[],error:"Empty SMILES string"};let b={pos:0,atoms:[],bonds:[],ringClosures:new Map,branchStack:[],lastAtomIndex:-1,pendingBondOrder:0};try{for(var c,d;b.pos<a.length;){let c=z(a,b);if(/\s/.test(c)||"/"===c||"\\"===c){A(a,b);continue}if("-"===c||"="===c||"#"===c||":"===c){b.pendingBondOrder=function(a,b){switch(z(a,b)){case"-":case":":return A(a,b),1;case"=":return A(a,b),2;case"#":return A(a,b),3;default:return 0}}(a,b);continue}if("("===c){A(a,b),b.branchStack.push(b.lastAtomIndex);continue}if(")"===c){A(a,b),b.branchStack.length>0&&(b.lastAtomIndex=b.branchStack.pop());continue}if("."===c){A(a,b),b.lastAtomIndex=-1;continue}let d=function(a,b){let c=z(a,b);return/[0-9]/.test(c)?(A(a,b),parseInt(c,10)):"%"===c?(A(a,b),B(a,b)):null}(a,b);if(null!==d){let a=b.pendingBondOrder||1;if(b.pendingBondOrder=0,b.ringClosures.has(d)){let c=b.ringClosures.get(d),e=Math.max(c.bondOrder,a);C(b,c.atomIndex,b.lastAtomIndex,e),b.ringClosures.delete(d)}else b.ringClosures.set(d,{atomIndex:b.lastAtomIndex,bondOrder:a});continue}if("["===c){A(a,b);let c=function(a,b){let c=null,d="",e=!1,f=null,g=0,h=B(a,b);null!==h&&(c=h);let i=A(a,b);if(!i)return null;if(i===i.toLowerCase()&&y[i])e=!0,d=y[i];else{d=i.toUpperCase();let c=z(a,b);c&&c===c.toLowerCase()&&/[a-z]/.test(c)&&(d+=A(a,b))}for(;b.pos<a.length&&"]"!==z(a,b);){let c=z(a,b);if("H"===c){A(a,b);let c=B(a,b);f=null!==c?c:1}else if("+"===c){A(a,b);let c=B(a,b);g=null!==c?c:1}else if("-"===c){A(a,b);let c=B(a,b);g=-(null!==c?c:1)}else"@"===c?(A(a,b),"@"===z(a,b)&&A(a,b)):A(a,b)}return"]"===z(a,b)&&A(a,b),{element:d,aromatic:e,charge:g,hCount:f,isotope:c}}(a,b);if(!c)return{success:!1,atoms:[],bonds:[],error:`Invalid bracket atom at position ${b.pos}`};let d=b.atoms.length;if(b.atoms.push(c),b.lastAtomIndex>=0){let a=b.pendingBondOrder||1;C(b,b.lastAtomIndex,d,a)}b.pendingBondOrder=0,b.lastAtomIndex=d;continue}let e=function(a,b){let c=z(a,b);if(y[c])return A(a,b),{element:y[c],aromatic:!0,charge:0,hCount:null,isotope:null};let d=a.slice(b.pos,b.pos+2);if("Cl"===d||"Br"===d)return b.pos+=2,{element:d,aromatic:!1,charge:0,hCount:null,isotope:null};let e=c.toUpperCase();return x.has(e)&&c===e?(A(a,b),{element:e,aromatic:!1,charge:0,hCount:null,isotope:null}):null}(a,b);if(e){let a=b.atoms.length;if(b.atoms.push(e),b.lastAtomIndex>=0){let c=b.pendingBondOrder||(e.aromatic&&b.atoms[b.lastAtomIndex]?.aromatic,1);C(b,b.lastAtomIndex,a,c)}b.pendingBondOrder=0,b.lastAtomIndex=a;continue}return{success:!1,atoms:[],bonds:[],error:`Unexpected character '${c}' at position ${b.pos}`}}if(b.ringClosures.size>0){let a=Array.from(b.ringClosures.keys()).join(", ");return{success:!1,atoms:[],bonds:[],error:`Unclosed ring(s): ${a}`}}let e=(c=b.atoms,d=b.bonds,c.map((a,b)=>{if(null!==a.hCount)return a.hCount;let c=d.filter(a=>a.source===b||a.target===b).reduce((a,b)=>a+b.order,0),e=w[a.element]||[0],f=e.find(a=>a>=c)||e[e.length-1];return Math.max(0,f-c-!!a.aromatic)})),f=[...b.atoms],g=[...b.bonds];e.forEach((a,b)=>{for(let c=0;c<a;c++){let a=f.length;f.push({element:"H",aromatic:!1,charge:0,hCount:0,isotope:null}),g.push({source:b,target:a,order:1})}});let h=f.map(a=>a.element),i=function(a,b,c){let d;if(0===a)return[];if(1===a)return[{x:0,y:0,z:0}];let e=Array(a).fill(null).map(()=>({x:0,y:0,z:0})),f=new Set,g=O(a,b),h=(d=Array(a).fill(0),b.forEach(a=>{d[a.source]++,d[a.target]++}),d),i=function(a,b){let c=new Map;for(let b=0;b<a;b++)c.set(b,[]);b.forEach(a=>{c.get(a.source)?.push(a.target),c.get(a.target)?.push(a.source)});let d=[],e=new Set;for(let b=0;b<a;b++)e.has(b)||(!function a(b,f,g){if(!(g.length>8))for(let h of c.get(b)||[]){if(h===f)continue;let c=g.indexOf(h);if(-1!==c){let a=g.slice(c);if(a.length>=3&&a.length<=7){let b=[...a].sort((a,b)=>a-b).join(",");d.some(a=>[...a].sort((a,b)=>a-b).join(",")===b)||d.push(a)}}else e.has(h)||a(h,b,[...g,h])}}(b,-1,[b]),e.add(b));return d}(a,b),j=new Set;i.forEach(a=>a.forEach(a=>j.add(a)));let k=0,l=-1;for(let b=0;b<a;b++){let a=h[b]*("H"===c[b]?.1:1);a>l&&(l=a,k=b)}e[k]={x:0,y:0,z:0},f.add(k);let m=[k],n=new Map;for(;m.length>0;){let a,d=m.shift(),h=g.get(d)||[],j=e[d],k=P(d,b,c[d]),l=h.filter(a=>f.has(a.neighbor)),o=h.filter(a=>!f.has(a.neighbor));if(0===o.length)continue;let p={x:1,y:0,z:0},q={x:0,y:0,z:1};switch(l.length>0&&(q=.9>Math.abs((p=M(J(e[l[0].neighbor],j))).z)?M(N(p,{x:0,y:0,z:1})):M(N(p,{x:1,y:0,z:0}))),k){case"sp":a=H;break;case"sp2":a=G;break;default:a=F}let r=N(q,p),s=l.length;for(let b of o){let g,h=b.neighbor,k=b.order,l=E(c[d],c[h],k),o=i.find(a=>a.includes(d)&&a.includes(h));if(o&&o.length>=5&&o.length<=6){let a=o.length;o.indexOf(d);let b=o.indexOf(h),c=2*Math.PI/a*b;g={x:Math.cos(c),y:Math.sin(c),z:0}}else{let b=a[s%a.length];g=M({x:b.x*p.x+b.y*q.x+b.z*r.x,y:b.x*p.y+b.y*q.y+b.z*r.y,z:b.x*p.z+b.y*q.z+b.z*r.z}),s++}e[h]=I(j,K(g,l)),f.add(h),m.push(h),n.has(d)||n.set(d,[]),n.get(d).push(g)}}for(let b=0;b<a;b++)f.has(b)||(e[b]={x:(Math.random()-.5)*5,y:(Math.random()-.5)*5,z:(Math.random()-.5)*5},f.add(b));!function(a,b,c,d){let e=a.length,f=a.map(()=>({x:0,y:0,z:0})),g=O(e,b);for(let d=0;d<80;d++){let d=a.map(()=>({x:0,y:0,z:0}));b.forEach(b=>{let e=b.source,f=b.target,g=E(c[e],c[f],b.order),h=J(a[f],a[e]),i=L(h)+.001-g,j=M(h),k=K(j,.15*i);d[e]=I(d[e],k),d[f]=J(d[f],k)});for(let f=0;f<e;f++)for(let g=f+1;g<e;g++){let e=b.some(a=>a.source===f&&a.target===g||a.source===g&&a.target===f),h=J(a[f],a[g]),i=L(h)+.001,j=e?0:"H"===c[f]||"H"===c[g]?1.5:2.5;if(!e&&i<j){let a=M(h),b=K(a,1.5*(j-i)/i);d[f]=I(d[f],b),d[g]=J(d[g],b)}}for(let f=0;f<e;f++){let e,h=g.get(f)||[];if(!(h.length<2)){switch(P(f,b,c[f])){case"sp":e=Math.PI;break;case"sp2":e=2*Math.PI/3;break;default:e=Math.acos(-1/3)}for(let b=0;b<h.length;b++)for(let c=b+1;c<h.length;c++){let g=h[b].neighbor,i=h[c].neighbor,j=M(J(a[g],a[f])),k=M(J(a[i],a[f])),l=Math.acos(Math.max(-1,Math.min(1,j.x*k.x+j.y*k.y+j.z*k.z)))-e;if(Math.abs(l)>.1){let a=.05*l,b=M(N(j,k)),c=N(b,j),e=N(k,b);d[g]=I(d[g],K(c,a)),d[i]=I(d[i],K(e,a))}}}}for(let b=0;b<e;b++){f[b]=K(I(f[b],d[b]),.85);let c=L(f[b]);c>.5&&(f[b]=K(f[b],.5/c)),a[b]=I(a[b],f[b])}}}(e,b,c,80);let o={x:0,y:0,z:0};return e.forEach(a=>{o.x+=a.x,o.y+=a.y,o.z+=a.z}),o.x/=a,o.y/=a,o.z/=a,e.map(a=>({x:Math.round((a.x-o.x)*100)/100,y:Math.round((a.y-o.y)*100)/100,z:Math.round((a.z-o.z)*100)/100}))}(f.length,g,h),j=f.map((a,b)=>({id:Date.now()+b,element:a.element,x:i[b]?.x||0,y:i[b]?.y||0,z:i[b]?.z||0})),k=g.map((a,b)=>({id:Date.now()+1e3+b,sourceId:j[a.source]?.id||0,targetId:j[a.target]?.id||0,order:a.order}));return{success:!0,atoms:j,bonds:k}}catch(a){return{success:!1,atoms:[],bonds:[],error:`Parse error: ${a instanceof Error?a.message:"Unknown error"}`}}}let R=[{name:"Water",smiles:"O",category:"Simple"},{name:"Ammonia",smiles:"N",category:"Simple"},{name:"Methane",smiles:"C",category:"Simple"},{name:"Carbon Dioxide",smiles:"O=C=O",category:"Simple"},{name:"Hydrogen Peroxide",smiles:"OO",category:"Simple"},{name:"Ethane",smiles:"CC",category:"Alkanes"},{name:"Propane",smiles:"CCC",category:"Alkanes"},{name:"Butane",smiles:"CCCC",category:"Alkanes"},{name:"Isobutane",smiles:"CC(C)C",category:"Alkanes"},{name:"Methanol",smiles:"CO",category:"Alcohols"},{name:"Ethanol",smiles:"CCO",category:"Alcohols"},{name:"Isopropanol",smiles:"CC(O)C",category:"Alcohols"},{name:"Glycerol",smiles:"OCC(O)CO",category:"Alcohols"},{name:"Benzene",smiles:"c1ccccc1",category:"Aromatics"},{name:"Toluene",smiles:"Cc1ccccc1",category:"Aromatics"},{name:"Phenol",smiles:"Oc1ccccc1",category:"Aromatics"},{name:"Aniline",smiles:"Nc1ccccc1",category:"Aromatics"},{name:"Aspirin",smiles:"CC(=O)Oc1ccccc1C(=O)O",category:"Drugs"},{name:"Paracetamol",smiles:"CC(=O)Nc1ccc(O)cc1",category:"Drugs"},{name:"Caffeine",smiles:"Cn1cnc2c1c(=O)n(C)c(=O)n2C",category:"Drugs"},{name:"Ibuprofen",smiles:"CC(C)Cc1ccc(C(C)C(=O)O)cc1",category:"Drugs"},{name:"Glycine",smiles:"NCC(=O)O",category:"Amino Acids"},{name:"Alanine",smiles:"CC(N)C(=O)O",category:"Amino Acids"},{name:"Serine",smiles:"NC(CO)C(=O)O",category:"Amino Acids"}];var S=a.i(25238),T=a.i(56025),U=a.i(68209),V=a.i(31626);function W({userLevel:a,onSelectMission:c,currentMissionId:d}){let e=[...q.SYLLABUS_DATA].sort((a,b)=>a.level-b.level);return(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"20px"},children:[(0,b.jsx)("h3",{style:{margin:0,fontSize:"0.85rem",fontWeight:700,color:"#9ca3af",textTransform:"uppercase",letterSpacing:"0.5px"},children:"ðŸ—ºï¸ Syllabus Map"}),(0,b.jsxs)("div",{style:{display:"flex",gap:"8px",overflowX:"auto",paddingBottom:"4px",maskImage:"linear-gradient(to right, black 85%, transparent 100%)",WebkitMaskImage:"linear-gradient(to right, black 85%, transparent 100%)"},className:"jsx-e904ed44d668d0c7 no-scrollbar",children:[(0,b.jsx)(V.default,{id:"e904ed44d668d0c7",children:".no-scrollbar.jsx-e904ed44d668d0c7::-webkit-scrollbar{display:none}.no-scrollbar.jsx-e904ed44d668d0c7{-ms-overflow-style:none;scrollbar-width:none}"}),e.map(e=>{let f=e.level>a,g=e.level===d,h=e.level<a;return(0,b.jsxs)("div",{onClick:()=>!f&&c(e),style:{minWidth:"120px",padding:"10px",borderRadius:"10px",background:g?"#2563eb":"#1f2937",border:g?"1px solid #60a5fa":"1px solid #374151",cursor:f?"not-allowed":"pointer",opacity:f?.5:1,display:"flex",flexDirection:"column",gap:"2px",position:"relative",transition:"all 0.2s",transform:g?"scale(1.02)":"scale(1)"},className:"jsx-e904ed44d668d0c7",children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},className:"jsx-e904ed44d668d0c7",children:[(0,b.jsx)("span",{style:{fontSize:"0.65rem",fontWeight:"bold",color:g?"#e0e7ff":"#6b7280",textTransform:"uppercase"},className:"jsx-e904ed44d668d0c7",children:e.semester}),f&&(0,b.jsx)("span",{style:{fontSize:"0.7rem"},className:"jsx-e904ed44d668d0c7",children:"ðŸ”’"}),h&&(0,b.jsx)("span",{style:{fontSize:"0.7rem"},className:"jsx-e904ed44d668d0c7",children:"âœ…"})]}),(0,b.jsx)("div",{style:{fontSize:"0.85rem",fontWeight:"600",color:g?"#fff":"#e5e7eb",lineHeight:"1.2",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},className:"jsx-e904ed44d668d0c7",children:e.moleculeTemplate.name}),g&&(0,b.jsx)("div",{style:{height:"2px",background:"#fff",marginTop:"6px",borderRadius:"1px",opacity:.5},className:"jsx-e904ed44d668d0c7"})]},e.level)})]}),(0,b.jsxs)("div",{style:{fontSize:"0.75rem",color:"#9ca3af",background:"#151921",padding:"10px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.05)",lineHeight:"1.4"},children:[(0,b.jsx)("span",{style:{color:"#60a5fa",fontWeight:600},children:"Objective:"})," ",q.SYLLABUS_DATA.find(b=>b.level===a)?.learningObjective||"Master the syllabus."]})]})}var X=a.i(48910);let Y=[{name:"Hydroxyl (-OH)",structure:"R-O-H",icon:"ðŸ’§",description:"An oxygen atom bonded to a hydrogen. Found in alcohols and phenols.",drugRelevance:"Increases water solubility (hydrophilicity), enables hydrogen bonding for receptor binding.",examples:["Ethanol (CCO)","Phenol (Oc1ccccc1)"],color:"#60a5fa"},{name:"Carbonyl (C=O)",structure:"R-C(=O)-R",icon:"âš—ï¸",description:"A carbon double-bonded to oxygen. The defining feature of aldehydes, ketones, esters, and amides.",drugRelevance:"Reactive center for drug metabolism, hydrogen bond acceptor.",examples:["Acetone (CC(=O)C)","Formaldehyde (C=O)"],color:"#f59e0b"},{name:"Carboxyl (-COOH)",structure:"R-C(=O)-O-H",icon:"ðŸ§ª",description:"A carbonyl attached to a hydroxyl group. Found in carboxylic acids.",drugRelevance:"Acidic (pKa ~4-5), ionizes at physiological pH, increases water solubility.",examples:["Acetic Acid (CC(=O)O)","Aspirin (CC(=O)Oc1ccccc1C(=O)O)"],color:"#ef4444"},{name:"Amine (-NHâ‚‚)",structure:"R-N-Hâ‚‚",icon:"ðŸ”µ",description:"A nitrogen atom with hydrogen(s) attached. Can be primary, secondary, or tertiary.",drugRelevance:"Basic (pKa ~9-11), protonated at physiological pH, hydrogen bond donor.",examples:["Methylamine (CN)","Aniline (Nc1ccccc1)"],color:"#3b82f6"},{name:"Amide (-CONHâ‚‚)",structure:"R-C(=O)-N-Hâ‚‚",icon:"ðŸ”—",description:"A carbonyl attached to a nitrogen. The peptide bond is an amide.",drugRelevance:"Very stable, resistant to metabolism, mimics peptide bonds in proteins.",examples:["Acetamide (CC(=O)N)","Paracetamol (CC(=O)Nc1ccc(O)cc1)"],color:"#8b5cf6"},{name:"Ether (C-O-C)",structure:"R-O-R",icon:"â­•",description:"An oxygen between two carbon groups. Generally stable and non-reactive.",drugRelevance:"Increases lipophilicity, good for crossing cell membranes.",examples:["Diethyl Ether (CCOCC)","Anisole (COc1ccccc1)"],color:"#06b6d4"},{name:"Ester (-COO-)",structure:"R-C(=O)-O-R",icon:"ðŸ‹",description:"A carbonyl attached to an oxygen with an R group. Common in fats and flavors.",drugRelevance:"Used in prodrugs - can be cleaved by esterases to release active drug.",examples:["Ethyl Acetate (CCOC(=O)C)","Aspirin ester group"],color:"#84cc16"},{name:"Halogen (F/Cl/Br/I)",structure:"R-X",icon:"ðŸŸ¢",description:"Fluorine, chlorine, bromine, or iodine attached to a carbon.",drugRelevance:"F increases metabolic stability, Cl/Br add lipophilicity, useful for PET imaging (18F).",examples:["Chloroform (ClC(Cl)Cl)","Fluorobenzene (Fc1ccccc1)"],color:"#22c55e"},{name:"Thiol (-SH)",structure:"R-S-H",icon:"ðŸŸ¡",description:"A sulfur with a hydrogen. Also called mercaptan. Very reactive.",drugRelevance:"Can form covalent bonds with cysteine residues, used in covalent drugs.",examples:["Methanethiol (CS)","Cysteine (NC(CS)C(=O)O)"],color:"#eab308"},{name:"Aromatic Ring",structure:"c1ccccc1",icon:"ðŸ”µ",description:"A planar ring of carbons with delocalized Ï€ electrons. Benzene is the prototype.",drugRelevance:"Flat, hydrophobic, can stack with other aromatics (Ï€-Ï€ stacking).",examples:["Benzene (c1ccccc1)","Naphthalene (c1ccc2ccccc2c1)"],color:"#a78bfa"}],Z=[{name:"Single Bond",symbol:"-",electrons:2,description:"One pair of shared electrons. Allows free rotation around the bond axis.",examples:["C-C in ethane","C-H in methane"],strength:"Medium (347 kJ/mol for C-C)"},{name:"Double Bond",symbol:"=",electrons:4,description:"Two pairs of shared electrons (1 sigma + 1 pi). Restricts rotation, creates geometric isomers.",examples:["C=C in ethylene","C=O in aldehydes"],strength:"Strong (614 kJ/mol for C=C)"},{name:"Triple Bond",symbol:"â‰¡",electrons:6,description:"Three pairs of shared electrons (1 sigma + 2 pi). Very strong and linear.",examples:["Câ‰¡C in acetylene","Câ‰¡N in nitriles"],strength:"Very Strong (839 kJ/mol for Câ‰¡C)"},{name:"Aromatic Bond",symbol:"â—¯",electrons:1.5,description:"Delocalized electrons shared across a ring. Bond order is between single and double.",examples:["Benzene ring","Pyridine ring"],strength:"Intermediate (resonance stabilized)"}],$=[{title:"ðŸŽ¯ Start with Carbon",tip:"Carbon forms 4 bonds and is the backbone of organic molecules. Place carbons first, then add other atoms."},{title:"âš¡ Watch Your Valence",tip:"Each element has a specific number of bonds it needs: H=1, O=2, N=3, C=4. The validation panel shows errors if bonds are wrong."},{title:"ðŸ”„ Use Bond Mode",tip:"After placing atoms, switch to Bond Mode to connect them. Click two atoms to create a bond. Click existing bonds to increase their order."},{title:"ðŸ—‘ï¸ Delete Mode",tip:"Use Delete Mode to remove atoms or bonds. Clicking an atom removes it and all its bonds."},{title:"ðŸ’Š Drug-like Molecules",tip:"For pharmaceutical compounds, follow Lipinski's Rule of 5: MW â‰¤ 500, H-bond donors â‰¤ 5, H-bond acceptors â‰¤ 10."},{title:"ðŸ”µ Aromatic Rings",tip:"To build benzene, create 6 carbons in a ring with alternating single and double bonds. The system will detect aromaticity."},{title:"ðŸ“ SMILES Input",tip:"Use the SMILES tab to quickly generate molecules from SMILES notation. Great for importing known structures!"},{title:"ðŸ§¬ Load Templates",tip:"Use the mission system to load pre-built molecule templates as starting points for modifications."}],_=[{syntax:"C, N, O, S, P, F, Cl, Br, I",description:"Organic atoms (implicit H added)"},{syntax:"c, n, o, s",description:"Aromatic atoms (lowercase)"},{syntax:"[NH4+], [O-], [Fe]",description:"Bracket atoms (charges, metals)"},{syntax:"- = #",description:"Single, double, triple bonds"},{syntax:"()",description:"Branches (side chains)"},{syntax:"1, 2, %10",description:"Ring closures"},{syntax:".",description:"Disconnected fragments"}];function aa({isOpen:a,onClose:c}){let[e,f]=(0,d.useState)("elements"),[g,h]=(0,d.useState)(null);if(!a)return null;let i=Object.entries(n);return(0,b.jsx)("div",{className:X.default.overlay,onClick:c,children:(0,b.jsxs)("div",{className:X.default.panel,onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:X.default.header,children:[(0,b.jsx)("h2",{className:X.default.title,children:"ðŸ“š Chemistry Reference"}),(0,b.jsx)("button",{className:X.default.closeBtn,onClick:c,children:"Ã—"})]}),(0,b.jsxs)("div",{className:X.default.tabs,children:[(0,b.jsx)("button",{className:`${X.default.tab} ${"elements"===e?X.default.activeTab:""}`,onClick:()=>f("elements"),children:"ðŸ§ª Elements"}),(0,b.jsx)("button",{className:`${X.default.tab} ${"bonds"===e?X.default.activeTab:""}`,onClick:()=>f("bonds"),children:"ðŸ”— Bonds"}),(0,b.jsx)("button",{className:`${X.default.tab} ${"groups"===e?X.default.activeTab:""}`,onClick:()=>f("groups"),children:"ðŸ§¬ Groups"}),(0,b.jsx)("button",{className:`${X.default.tab} ${"smiles"===e?X.default.activeTab:""}`,onClick:()=>f("smiles"),children:"ðŸ“ SMILES"}),(0,b.jsx)("button",{className:`${X.default.tab} ${"tips"===e?X.default.activeTab:""}`,onClick:()=>f("tips"),children:"ðŸ’¡ Tips"})]}),(0,b.jsxs)("div",{className:X.default.content,children:["elements"===e&&(0,b.jsxs)("div",{className:X.default.elementsGrid,children:[i.map(([a,c])=>(0,b.jsxs)("div",{className:`${X.default.elementCard} ${g===a?X.default.selected:""}`,onClick:()=>h(g===a?null:a),style:{borderColor:`#${c.color.toString(16).padStart(6,"0")}`},children:[(0,b.jsx)("div",{className:X.default.elementSymbol,style:{color:`#${c.color.toString(16).padStart(6,"0")}`},children:a}),(0,b.jsx)("div",{className:X.default.elementName,children:c.name}),(0,b.jsxs)("div",{className:X.default.elementNumber,children:["#",c.atomicNumber]})]},a)),g&&n[g]&&(0,b.jsxs)("div",{className:X.default.elementDetail,children:[(0,b.jsxs)("h4",{style:{color:`#${n[g].color.toString(16).padStart(6,"0")}`},children:[n[g].name," (",g,")"]}),(0,b.jsxs)("div",{className:X.default.detailGrid,children:[(0,b.jsxs)("div",{className:X.default.detailItem,children:[(0,b.jsx)("span",{className:X.default.detailLabel,children:"Atomic Number"}),(0,b.jsx)("span",{className:X.default.detailValue,children:n[g].atomicNumber})]}),(0,b.jsxs)("div",{className:X.default.detailItem,children:[(0,b.jsx)("span",{className:X.default.detailLabel,children:"Atomic Mass"}),(0,b.jsxs)("span",{className:X.default.detailValue,children:[n[g].mass," u"]})]}),(0,b.jsxs)("div",{className:X.default.detailItem,children:[(0,b.jsx)("span",{className:X.default.detailLabel,children:"Valence"}),(0,b.jsx)("span",{className:X.default.detailValue,children:n[g].valence.join(", ")})]}),(0,b.jsxs)("div",{className:X.default.detailItem,children:[(0,b.jsx)("span",{className:X.default.detailLabel,children:"Radius"}),(0,b.jsxs)("span",{className:X.default.detailValue,children:[n[g].radius," Ã…"]})]})]})]})]}),"bonds"===e&&(0,b.jsx)("div",{className:X.default.bondsList,children:Z.map((a,c)=>(0,b.jsxs)("div",{className:X.default.bondCard,children:[(0,b.jsxs)("div",{className:X.default.bondHeader,children:[(0,b.jsx)("span",{className:X.default.bondSymbol,children:a.symbol}),(0,b.jsx)("span",{className:X.default.bondName,children:a.name}),(0,b.jsxs)("span",{className:X.default.bondElectrons,children:[a.electrons," eâ»"]})]}),(0,b.jsx)("p",{className:X.default.bondDescription,children:a.description}),(0,b.jsxs)("div",{className:X.default.bondExamples,children:[(0,b.jsx)("strong",{children:"Examples:"})," ",a.examples.join(", ")]}),(0,b.jsxs)("div",{className:X.default.bondStrength,children:[(0,b.jsx)("strong",{children:"Strength:"})," ",a.strength]})]},c))}),"groups"===e&&(0,b.jsx)("div",{className:X.default.groupsList,children:Y.map((a,c)=>(0,b.jsxs)("div",{className:X.default.groupCard,style:{borderLeftColor:a.color},children:[(0,b.jsxs)("div",{className:X.default.groupHeader,children:[(0,b.jsx)("span",{className:X.default.groupIcon,children:a.icon}),(0,b.jsx)("span",{className:X.default.groupName,children:a.name})]}),(0,b.jsx)("div",{className:X.default.groupStructure,children:(0,b.jsx)("code",{children:a.structure})}),(0,b.jsx)("p",{className:X.default.groupDescription,children:a.description}),(0,b.jsxs)("div",{className:X.default.groupRelevance,children:[(0,b.jsx)("strong",{children:"ðŸ’Š Drug Relevance:"})," ",a.drugRelevance]}),(0,b.jsxs)("div",{className:X.default.groupExamples,children:[(0,b.jsx)("strong",{children:"Examples:"})," ",a.examples.join(", ")]})]},c))}),"tips"===e&&(0,b.jsx)("div",{className:X.default.tipsList,children:$.map((a,c)=>(0,b.jsxs)("div",{className:X.default.tipCard,children:[(0,b.jsx)("div",{className:X.default.tipTitle,children:a.title}),(0,b.jsx)("p",{className:X.default.tipContent,children:a.tip})]},c))}),"smiles"===e&&(0,b.jsxs)("div",{className:X.default.smilesGuide,children:[(0,b.jsx)("h4",{className:X.default.smilesTitle,children:"ðŸ“ SMILES Notation Guide"}),(0,b.jsx)("p",{className:X.default.smilesIntro,children:"SMILES (Simplified Molecular Input Line Entry System) is a way to represent molecules as text strings."}),(0,b.jsxs)("table",{className:X.default.smilesTable,children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:"Syntax"}),(0,b.jsx)("th",{children:"Meaning"})]})}),(0,b.jsx)("tbody",{children:_.map((a,c)=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:(0,b.jsx)("code",{children:a.syntax})}),(0,b.jsx)("td",{children:a.description})]},c))})]}),(0,b.jsx)("h4",{className:X.default.smilesTitle,style:{marginTop:"20px"},children:"ðŸ§ª Examples"}),(0,b.jsxs)("div",{className:X.default.smilesExamples,children:[(0,b.jsxs)("div",{className:X.default.smilesExample,children:[(0,b.jsx)("code",{children:"CCO"})," â†’ Ethanol (2 carbons + oxygen)"]}),(0,b.jsxs)("div",{className:X.default.smilesExample,children:[(0,b.jsx)("code",{children:"c1ccccc1"})," â†’ Benzene (aromatic ring)"]}),(0,b.jsxs)("div",{className:X.default.smilesExample,children:[(0,b.jsx)("code",{children:"CC(=O)O"})," â†’ Acetic acid (with carbonyl)"]}),(0,b.jsxs)("div",{className:X.default.smilesExample,children:[(0,b.jsx)("code",{children:"CC(C)C"})," â†’ Isobutane (with branch)"]}),(0,b.jsxs)("div",{className:X.default.smilesExample,children:[(0,b.jsx)("code",{children:"C1CCCCC1"})," â†’ Cyclohexane (6-ring)"]})]})]})]})]})})}var ab=a.i(50944),ac=a.i(72287),ad=a.i(20237);a.i(60121);var ae=a.i(5420);let af="b5830a60-e35a-4727-b311-5276cec06246",ag={paracetamol:["#4FC3F7","#29B6F6","#03A9F4","#039BE5"],aspirin:["#81C784","#66BB6A","#4CAF50","#43A047"],ibuprofen:["#FFB74D","#FFA726","#FF9800","#FB8C00"],caffeine:["#BA68C8","#AB47BC","#9C27B0","#8E24AA"],default:["#7C4DFF","#651FFF","#6200EA","#536DFE"]},ah={async generateMoleculeImage(a,b,c=50,d=50,e){try{let f=e?`${e}, high quality, detailed scientific render, 8k resolution, photorealistic`:this.createMoleculePrompt(a,c,d),g=null;if(af&&af.length>10)try{g=await this.callAIGuruLabAPI(f)}catch(a){console.warn("AI Guru Lab API error, using procedural fallback"),g=null}g||(console.log("Generating procedural molecule SVG for:",a),g=await this.generateProceduralMolecule(a,c,d));let h="";try{h=await this.uploadToFirebase(g,b)}catch(a){console.warn("Firebase Upload Failed:",a.message),g&&(h=await new Promise(a=>{let b=new FileReader;b.onloadend=()=>a(b.result),b.readAsDataURL(g)}))}return{url:h,generatedAt:Date.now(),prompt:f}}catch(a){return console.error("Failed to generate molecule image:",a),null}},createMoleculePrompt:(a,b,c)=>`Scientific 3D molecular structure visualization of ${a}, ${b>70?"high-quality, well-structured":"experimental"} ${c>70?"stable":"reactive"} pharmaceutical compound, glowing atoms, dark background, neon blue and purple accents, professional medical illustration, high detail`,async callAIGuruLabAPI(a){try{let b=await fetch("https://aigurulab.tech/api/generate-image",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":af},body:JSON.stringify({input:a,width:1024,height:1024,model:"flux",aspectRatio:"1:1"})});if(!b.ok)return console.warn("AI Guru Lab API failed:",b.status),null;let c=await b.json();if(c.image){let a=c.image.replace(/^data:image\/\w+;base64,/,""),b=atob(a),d=new Uint8Array(b.length);for(let a=0;a<b.length;a++)d[a]=b.charCodeAt(a);return new Blob([d],{type:"image/png"})}if(c.url){let a=await fetch(c.url);return await a.blob()}return null}catch(a){return console.warn("AI Guru Lab API error:",a),null}},async generateProceduralMolecule(a,b,c){let d=a.toLowerCase(),e=ag.default;for(let[a,b]of Object.entries(ag))if(d.includes(a)){e=b;break}let f=this.hashString(a+b+c),g=this.generateAtomPositions(f,6+b%5),h=this.generateBonds(g);return new Blob([`
            <svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 512 512">
                <defs>
                    <radialGradient id="bg" cx="50%" cy="50%" r="70%">
                        <stop offset="0%" stop-color="#1a1a2e"/>
                        <stop offset="100%" stop-color="#0a0a15"/>
                    </radialGradient>
                    <filter id="glow">
                        <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                        <feMerge>
                            <feMergeNode in="coloredBlur"/>
                            <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                    </filter>
                    <radialGradient id="atom" cx="30%" cy="30%" r="60%">
                        <stop offset="0%" stop-color="${e[0]}"/>
                        <stop offset="100%" stop-color="${e[2]}"/>
                    </radialGradient>
                </defs>
                <rect width="512" height="512" fill="url(#bg)"/>
                
                <!-- Bonds -->
                <g stroke="${e[1]}" stroke-width="3" opacity="0.7" filter="url(#glow)">
                    ${h.map(a=>`<line x1="${a.x1}" y1="${a.y1}" x2="${a.x2}" y2="${a.y2}"/>`).join("\n")}
                </g>
                
                <!-- Atoms -->
                <g filter="url(#glow)">
                    ${g.map((a,b)=>`
                        <circle cx="${a.x}" cy="${a.y}" r="${15+b%3*5}" fill="url(#atom)"/>
                        <circle cx="${a.x-4}" cy="${a.y-4}" r="${5+b%2*2}" fill="white" opacity="0.3"/>
                    `).join("\n")}
                </g>
                
                <!-- Center glow effect -->
                <circle cx="256" cy="256" r="100" fill="none" stroke="${e[0]}" stroke-width="1" opacity="0.2"/>
                <circle cx="256" cy="256" r="150" fill="none" stroke="${e[1]}" stroke-width="0.5" opacity="0.1"/>
            </svg>
        `],{type:"image/svg+xml"})},async uploadToFirebase(a,b){let c=a.type.includes("svg")?"svg":"png",d=(0,ae.ref)(ad.storage,`molecules/${b}.${c}`);return await (0,ae.uploadBytes)(d,a),await (0,ae.getDownloadURL)(d)},async getMoleculeImageUrl(a){try{let b=(0,ae.ref)(ad.storage,`molecules/${a}.png`);try{return await (0,ae.getDownloadURL)(b)}catch{let b=(0,ae.ref)(ad.storage,`molecules/${a}.svg`);return await (0,ae.getDownloadURL)(b)}}catch{return null}},hashString(a){let b=0;for(let c=0;c<a.length;c++)b=(b<<5)-b+a.charCodeAt(c),b&=b;return Math.abs(b)},generateAtomPositions(a,b){let c=[];for(let d=0;d<b;d++){let b=(a+137.5*d)%360*(Math.PI/180),e=60+a*(d+1)%120;c.push({x:256+Math.cos(b)*e,y:256+Math.sin(b)*e})}return c},generateBonds(a){let b=[];for(let c=0;c<a.length;c++){let d=(c+1)%a.length;b.push({x1:a[c].x,y1:a[c].y,x2:a[d].x,y2:a[d].y}),c%2==0&&b.push({x1:a[c].x,y1:a[c].y,x2:256,y2:256})}return b}};function ai(){let[a,c]=(0,d.useState)([]),[f,g]=(0,d.useState)([]),[h,i]=(0,d.useState)("C"),[j,k]=(0,d.useState)("build"),[l,m]=(0,d.useState)("Select an element and click on the canvas."),[o,s]=(0,d.useState)(null),[t,u]=(0,d.useState)({stability:0,efficacy:0,toxicity:"Low"}),{user:w,refreshProfile:x,profile:y}=(0,T.useAuth)(),[z,A]=(0,d.useState)(!1),[B,C]=(0,d.useState)(q.SYLLABUS_DATA[0]),[D,E]=(0,d.useState)(null),[F,G]=(0,d.useState)(!1),[H,I]=(0,d.useState)(null),[J,K]=(0,d.useState)(!1),[L,M]=(0,d.useState)(""),[N,O]=(0,d.useState)(!1),[P,V]=(0,d.useState)(null),[X,Y]=(0,d.useState)(!1),Z=(0,d.useCallback)(a=>{C(a);let b=a.moleculeTemplate.atoms.map(a=>({id:a.id,element:a.element,x:a.position[0],y:a.position[1],z:a.position[2]})),d=[],e=Date.now();a.moleculeTemplate.bonds.forEach(a=>{let c=b.find(b=>b.id===a.source),f=b.find(b=>b.id===a.target);c&&f&&d.push({id:e++,sourceId:c.id,targetId:f.id,order:a.order||1})}),c(b),g(d),E(null),$(b,d),m(`Loaded Mission: ${a.title}`)},[]);(0,d.useEffect)(()=>{if(y&&!J){let a=Math.min(y.level||1,8);Z(q.SYLLABUS_DATA.find(b=>b.level===a)||q.SYLLABUS_DATA[0]),K(!0)}},[y,J,Z]),(0,d.useEffect)(()=>{a.length>0?I(v(a,f)):I(null)},[a,f]);let $=(a,b)=>{let c=v(a,b);c.valid?u({stability:Math.min(100,50+c.score),efficacy:Math.min(100,20+.5*c.score),toxicity:"Low"}):u({stability:Math.max(0,30-2*a.length),efficacy:0,toxicity:"High"})},_=async()=>{G(!0);try{let b=await r.AiService.analyzeMolecule(B.moleculeTemplate.name,a.length,"User modified the structure.");E(b),m("AI analysis complete!")}catch(a){console.error("AI Analysis error:",a),m("Error during AI analysis.")}finally{G(!1)}},ad=(0,ab.useRouter)(),ae=async()=>{if(!z&&w){A(!0);try{let b=D?Math.floor((D.efficacy+D.safety)/2):50;await U.UserService.addXP(w.uid,2*b),await U.UserService.updateQuestProgress(w.uid,"build_molecule",1);let c=v(a,f),d=await ac.TrialService.saveSubmission(w.uid,{moleculeName:B.moleculeTemplate.name+" (Modified)",missionId:B.level,missionTitle:B.title,atomCount:a.length,stats:{efficacy:D?.efficacy||t.efficacy,safety:D?.safety||("Low"===t.toxicity?80:40),stability:t.stability},chemicalStats:{formula:c.formula||"Unknown",molecularWeight:c.molecularWeight||0,functionalGroups:c.functionalGroups||[],bonds:{single:f.filter(a=>1===a.order).length,double:f.filter(a=>2===a.order).length,triple:f.filter(a=>3===a.order).length,aromatic:c.rings?.filter(a=>a.isAromatic).length||0},warnings:c.warnings||[]},aiAnalysis:D?.analysis,imageUrl:r.AiService.generateMoleculeImageUrl(B.moleculeTemplate.name)});m("Generating molecule visualization...");let e=await ah.generateMoleculeImage(B.moleculeTemplate.name,d.id,D?.efficacy||t.efficacy,D?.safety||50,D?.visualPrompt);e&&await ac.TrialService.updateSubmission(d.id,{generatedImageUrl:e.url}),localStorage.setItem("active_trial_id",d.id),a.length>=5&&await U.UserService.unlockAchievement(w.uid,{id:"first_complex",title:"Molecular Architect",description:"Built a molecule with 5+ atoms",icon:"ðŸ§¬"}),await x(),m("SUCCESS: Design Submitted! Redirecting to Clinical Trials..."),setTimeout(()=>{ad.push("/dashboard/clinical-trials")},1500)}catch(a){console.error(a),m("Error submitting design")}finally{A(!1)}}},af=()=>{if(!L.trim())return void V("Please enter a SMILES string");let a=Q(L.trim());a.success?(c(a.atoms),g(a.bonds),V(null),O(!1),M(""),E(null),$(a.atoms,a.bonds),m(`Loaded molecule from SMILES: ${L.trim()}`)):V(a.error||"Failed to parse SMILES")};return(0,b.jsxs)("div",{className:S.default.container,children:[(0,b.jsxs)("div",{className:S.default.sidebar,children:[y&&(0,b.jsx)(W,{userLevel:y.level||1,currentMissionId:B.level,onSelectMission:Z}),(0,b.jsxs)("div",{className:S.default.header,children:[(0,b.jsxs)("h2",{children:[(0,b.jsx)("span",{style:{color:"#60a5fa"},children:"LABORATORY:"})," ",B.title]}),(0,b.jsx)("p",{style:{fontSize:"0.8rem",color:"#9ca3af",marginTop:"4px"},children:B.description})]}),(0,b.jsxs)("div",{className:S.default.elementList,children:[(0,b.jsx)("h3",{children:"Elements"}),(0,b.jsx)("div",{className:S.default.elementsGrid,children:["C","O","N","H","S","P","F","Cl","Br"].map(a=>{let c=n[a];if(!c)return null;let d=h===a&&"build"===j,e="#"+c.color.toString(16).padStart(6,"0");return(0,b.jsxs)("div",{className:`${S.default.elementCard} ${d?S.default.selected:""}`,onClick:()=>{i(a),k("build"),s(null)},style:{borderColor:d?e:void 0,boxShadow:d?`0 0 12px ${e}40`:void 0},children:[(0,b.jsx)("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:e,marginBottom:"4px",boxShadow:`inset 0 -3px 6px rgba(0,0,0,0.3), 0 0 8px ${e}50`}}),(0,b.jsx)("b",{style:{fontSize:"0.9rem"},children:a}),(0,b.jsx)("small",{children:c.name})]},a)})})]}),(0,b.jsxs)("div",{className:S.default.controls,children:[(0,b.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,b.jsx)("button",{className:`${S.default.btn} ${"delete"===j?S.default.active:""}`,onClick:()=>{k("delete"===j?"build":"delete"),s(null)},style:{flex:1},children:"ðŸ—‘ï¸ Eraser"}),(0,b.jsx)("button",{className:`${S.default.btn} ${"bond"===j?S.default.active:""}`,onClick:()=>{k("bond"===j?"build":"bond"),s(null)},style:{flex:1,background:"bond"===j?"#7c3aed":void 0},children:"ðŸ”— Bond"})]}),(0,b.jsx)("button",{className:S.default.btn,onClick:()=>{Z(B),m("Template reset to initial state.")},children:"â†º Reset Template"}),(0,b.jsx)("button",{className:`${S.default.btn} ${N?S.default.active:""}`,onClick:()=>O(!N),style:{background:N?"#0ea5e9":void 0},children:"ðŸ“ SMILES Input"}),N&&(0,b.jsxs)("div",{style:{background:"rgba(15, 23, 42, 0.9)",border:"1px solid rgba(14, 165, 233, 0.4)",borderRadius:"10px",padding:"12px",marginTop:"4px"},children:[(0,b.jsx)("div",{style:{marginBottom:"8px",fontSize:"0.75rem",color:"#94a3b8"},children:"Enter SMILES notation:"}),(0,b.jsx)("input",{type:"text",value:L,onChange:a=>{M(a.target.value),V(null)},placeholder:"e.g., CCO (ethanol)",style:{width:"100%",padding:"10px 12px",background:"rgba(30, 41, 59, 0.8)",border:P?"1px solid #ef4444":"1px solid rgba(148, 163, 184, 0.3)",borderRadius:"8px",color:"#e2e8f0",fontSize:"0.9rem",fontFamily:"monospace",marginBottom:"8px"},onKeyDown:a=>"Enter"===a.key&&af()}),P&&(0,b.jsxs)("div",{style:{color:"#ef4444",fontSize:"0.75rem",marginBottom:"8px"},children:["âš ï¸ ",P]}),(0,b.jsx)("button",{className:`${S.default.btn}`,onClick:af,style:{width:"100%",marginBottom:"8px",background:"#0ea5e9"},children:"ðŸ§¬ Generate Structure"}),(0,b.jsx)("div",{style:{fontSize:"0.7rem",color:"#64748b",marginBottom:"6px"},children:"Quick Examples:"}),(0,b.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px"},children:R.slice(0,8).map(a=>(0,b.jsx)("button",{onClick:()=>{var b,d;let e;return b=a.smiles,d=a.name,void((e=Q(b)).success?(c(e.atoms),g(e.bonds),V(null),O(!1),E(null),$(e.atoms,e.bonds),m(`Loaded ${d} from SMILES`)):V(e.error||"Failed to parse example"))},style:{padding:"4px 8px",fontSize:"0.65rem",background:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"4px",color:"#60a5fa",cursor:"pointer"},title:a.smiles,children:a.name},a.name))})]}),(0,b.jsx)("button",{className:`${S.default.btn} ${S.default.btnPrimary}`,onClick:_,disabled:F,children:F?"ðŸ¤– Analyzing...":"ðŸ§  AI Analysis"}),(0,b.jsx)("button",{className:S.default.btn,onClick:()=>Y(!0),style:{background:"rgba(139, 92, 246, 0.3)",borderColor:"#8b5cf6"},children:"ðŸ“š Chemistry Reference"})]}),D&&(0,b.jsxs)("div",{className:S.default.aiFeedback,children:[(0,b.jsx)("h4",{children:"AI Analysis Report"}),(0,b.jsx)("p",{children:D.analysis}),(0,b.jsxs)("div",{className:S.default.feedbackStats,children:[(0,b.jsxs)("div",{children:["Eff: ",Math.round(D.efficacy),"%"]}),(0,b.jsxs)("div",{children:["Saf: ",Math.round(D.safety),"%"]})]})]}),(0,b.jsx)("button",{className:`${S.default.btn} ${S.default.btnSuccess}`,onClick:ae,disabled:z||!D,style:{marginTop:"auto"},children:z?"Submitting...":"ðŸš€ Submit for Trials"})]}),(0,b.jsxs)("div",{className:S.default.canvasArea,children:[(0,b.jsxs)("div",{className:S.default.canvasHeader,children:[(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",flexWrap:"wrap"},children:[(0,b.jsx)("div",{className:S.default.statusMsg,children:l}),H&&(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"4px 10px",borderRadius:"6px",fontSize:"0.75rem",fontWeight:600,background:H.valid?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)",border:`1px solid ${H.valid?"#10b981":"#ef4444"}`,color:H.valid?"#10b981":"#ef4444"},children:[H.valid?"âœ“ Valid":"âœ— Invalid",H.name&&(0,b.jsxs)("span",{style:{color:"#60a5fa",marginLeft:"4px"},children:["â€¢ ",H.name]})]}),H?.formula&&(0,b.jsxs)("div",{style:{padding:"4px 10px",borderRadius:"6px",fontSize:"0.75rem",fontWeight:600,background:"rgba(96, 165, 250, 0.15)",border:"1px solid rgba(96, 165, 250, 0.4)",color:"#60a5fa"},children:[H.formula," â€¢ ",H.molecularWeight," g/mol"]})]}),(0,b.jsxs)("div",{className:S.default.propTags,children:[H?.properties?.complexity!==void 0&&(0,b.jsxs)("span",{className:S.default.tag,style:{color:"#a78bfa"},children:["Complexity: ",H.properties.complexity,"%"]}),(0,b.jsxs)("span",{className:S.default.tag,children:["Stab: ",Math.round(t.stability),"%"]}),(0,b.jsxs)("span",{className:S.default.tag,children:["Eff: ",Math.round(t.efficacy),"%"]}),(0,b.jsxs)("span",{className:S.default.tag,style:{color:"Low"===t.toxicity?"#10b981":"#ef4444"},children:["Tox: ",t.toxicity]})]})]}),H?.functionalGroups&&H.functionalGroups.length>0&&(0,b.jsxs)("div",{style:{position:"absolute",top:"60px",right:"16px",background:"rgba(30, 41, 59, 0.95)",border:"1px solid rgba(148, 163, 184, 0.2)",borderRadius:"10px",padding:"12px",zIndex:10,maxWidth:"220px",fontSize:"0.75rem",backdropFilter:"blur(8px)"},children:[(0,b.jsx)("div",{style:{fontWeight:700,marginBottom:"8px",color:"#94a3b8",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Functional Groups"}),H.functionalGroups.map((a,c)=>(0,b.jsx)("div",{style:{marginBottom:"4px",color:"#e2e8f0"},children:a},c))]}),H&&(H.errors.length>0||H.warnings.length>0)&&(0,b.jsxs)("div",{style:{position:"absolute",bottom:"16px",left:"16px",background:H.valid?"rgba(30, 58, 95, 0.95)":"rgba(127, 29, 29, 0.9)",border:`1px solid ${H.valid?"rgba(96, 165, 250, 0.4)":"rgba(239, 68, 68, 0.4)"}`,borderRadius:"10px",padding:"12px",zIndex:10,maxWidth:"380px",fontSize:"0.75rem",backdropFilter:"blur(8px)"},children:[!H.valid&&H.errors.length>0&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{style:{fontWeight:700,marginBottom:"6px",color:"#ef4444"},children:"âš ï¸ Valence Issues:"}),H.errors.slice(0,3).map((a,c)=>(0,b.jsxs)("div",{style:{marginBottom:"2px",color:"#fca5a5"},children:["â€¢ ",a]},`err-${c}`)),H.errors.length>3&&(0,b.jsxs)("div",{style:{color:"#9ca3af",marginTop:"4px"},children:["...and ",H.errors.length-3," more"]})]}),H.warnings.length>0&&(0,b.jsx)("div",{style:{marginTop:H.errors.length>0?"10px":"0"},children:H.warnings.slice(0,4).map((a,c)=>(0,b.jsx)("div",{style:{marginBottom:"4px",color:a.startsWith("âœ…")?"#86efac":a.startsWith("âš ï¸")?"#fcd34d":a.startsWith("ðŸ’Š")?"#c4b5fd":a.startsWith("ðŸ”µ")?"#93c5fd":"#e2e8f0"},children:a},`warn-${c}`))})]}),(0,b.jsx)(p,{atoms:a,bonds:f,selectedElement:"build"===j?h:null,onEmptyClick:b=>{if("build"===j){let d={id:Date.now(),element:h,x:b.x,y:b.y,z:b.z},i=[],j=Date.now();a.forEach(a=>{2>new e.Vector3(a.x,a.y,a.z).distanceTo(b)&&i.push({id:j++,sourceId:a.id,targetId:d.id,order:1})});let k=[...a,d],l=[...f,...i];c(k),g(l),$(k,l),m(`Added ${n[h].name}`)}},onAtomClick:b=>{if("delete"===j){let d=a.filter(a=>a.id!==b),e=f.filter(a=>a.sourceId!==b&&a.targetId!==b);c(d),g(e),$(d,e),m("Atom deleted")}else if("bond"===j)if(null===o)s(b),m(`Bonding: Selected first atom (ID: ${b}). Click another atom to connect.`);else if(o!==b){if(f.some(a=>a.sourceId===o&&a.targetId===b||a.sourceId===b&&a.targetId===o))m("Bond already exists between these atoms.");else{let c=[...f,{id:Date.now(),sourceId:o,targetId:b,order:1}];g(c),$(a,c),m("Bond created between atoms!")}s(null)}else s(null),m("Bonding cancelled.");else{let c=a.find(a=>a.id===b);if(c){let a=n[c.element];m(`${a?.name||c.element} atom selected`)}}}})]}),(0,b.jsx)(aa,{isOpen:X,onClose:()=>Y(!1)})]})}function aj(){return(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,b.jsx)(c.default,{title:"Molecular Builder",subtitle:"Design complex molecular chains with real-time stability simulation."}),(0,b.jsx)("div",{style:{flex:1,padding:"0 40px 40px"},children:(0,b.jsx)(ai,{})})]})}a.s(["default",()=>aj],74199)}];

//# sourceMappingURL=_9c3d947f._.js.map