{"version":3,"sources":["turbopack:///[project]/src/components/layout/TopHeader.module.css [app-ssr] (css module)","../../../../src/components/layout/TopHeader.tsx","../../../../src/lib/trialService.ts","../../../../src/lib/quizData.ts"],"sourcesContent":["__turbopack_context__.v({\n  \"actions\": \"TopHeader-module__TNE3sW__actions\",\n  \"header\": \"TopHeader-module__TNE3sW__header\",\n  \"iconBtn\": \"TopHeader-module__TNE3sW__iconBtn\",\n  \"primaryBtn\": \"TopHeader-module__TNE3sW__primaryBtn\",\n  \"subtitle\": \"TopHeader-module__TNE3sW__subtitle\",\n  \"title\": \"TopHeader-module__TNE3sW__title\",\n  \"titleSection\": \"TopHeader-module__TNE3sW__titleSection\",\n});\n","\n'use client';\n\nimport styles from './TopHeader.module.css';\n\ninterface TopHeaderProps {\n    title?: string;\n    subtitle?: string;\n}\n\nexport default function TopHeader({ title = \"Research Lab Dashboard\", subtitle = \"Welcome back, researcher. Your next breakthrough awaits.\" }: TopHeaderProps) {\n    return (\n        <header className={styles.header}>\n            <div className={styles.titleSection}>\n                <h1 className={styles.title}>{title}</h1>\n                <p className={styles.subtitle}>{subtitle}</p>\n            </div>\n\n            <div className={styles.actions}>\n                <button className={styles.iconBtn}>\n                    ðŸ””\n                </button>\n                <button className={styles.primaryBtn}>\n                    <span>+</span> New Simulation\n                </button>\n            </div>\n        </header>\n    );\n}\n","/**\n * Trial Service - Manages clinical trial submissions in Firebase\n * Stores trial data including AI-generated roadmaps persistently\n */\n\nimport { db } from './firebase';\nimport { doc, getDoc, setDoc, updateDoc, collection, query, where, getDocs, deleteDoc } from 'firebase/firestore';\n\nexport interface TrialPhaseData {\n    name: string;\n    duration: string;\n    description: string;\n    keyActivities: string[];\n    risks: string;\n}\n\nexport interface RoadmapData {\n    summary: string;\n    phases: TrialPhaseData[];\n    successProbability: number;\n    generatedAt: number;\n}\n\n// Exported types for shared usage across components\nexport interface CachedTrialEvent {\n    phaseIndex?: number;\n    title: string;\n    description: string;\n    choices: Array<{\n        text: string;\n        budgetEffect: number;\n        efficacyEffect: number;\n        safetyEffect: number;\n        outcomeText: string;\n    }>;\n    isPhaseComplete?: boolean;\n}\n\nexport interface SimulationState {\n    currentPhaseIndex: number;\n    eventIndex: number;\n    budget: number;\n    efficacy: number;\n    safety: number;\n    logs: string[];\n    previousEvents: string[];\n    cachedEvents?: CachedTrialEvent[];\n}\n\nexport interface TrialSubmission {\n    id: string;\n    userId: string;\n    moleculeName: string;\n    missionId: number;\n    missionTitle: string;\n    atomCount: number;\n    stats: {\n        efficacy: number;\n        safety: number;\n        stability: number;\n    };\n    chemicalStats?: {\n        formula: string;\n        molecularWeight: number;\n        functionalGroups: string[];\n        bonds?: { single: number; double: number; triple: number; aromatic: number };\n        warnings: string[];\n    };\n    aiAnalysis?: string;\n    imageUrl?: string;\n    generatedImageUrl?: string;\n    roadmap?: RoadmapData;\n    submittedAt: number;\n    status: 'pending' | 'in_progress' | 'completed' | 'failed';\n    simulationState?: SimulationState;\n}\n\nexport const TrialService = {\n    /**\n     * Get all trial submissions for a user from Firebase\n     */\n    async getSubmissions(userId: string): Promise<TrialSubmission[]> {\n        try {\n            const q = query(\n                collection(db, 'trials'),\n                where('userId', '==', userId)\n            );\n            const querySnapshot = await getDocs(q);\n            const submissions = querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() } as TrialSubmission));\n            return submissions.sort((a, b) => (b.submittedAt || 0) - (a.submittedAt || 0));\n        } catch (e) {\n            console.error('Failed to load trial submissions:', e);\n            return [];\n        }\n    },\n\n    /**\n     * Save a new trial submission to Firebase\n     */\n    async saveSubmission(\n        userId: string,\n        submission: Omit<TrialSubmission, 'id' | 'userId' | 'submittedAt' | 'status'>\n    ): Promise<TrialSubmission> {\n        const id = `trial_${Date.now()}_${Math.random().toString(36).slice(2, 8)}`;\n\n        const newSubmission: TrialSubmission = {\n            ...submission,\n            id,\n            userId: userId,\n            submittedAt: Date.now(),\n            status: 'pending'\n        };\n\n        await setDoc(doc(db, 'trials', id), newSubmission);\n        return newSubmission;\n    },\n\n    /**\n     * Update an existing submission (including roadmap)\n     */\n    async updateSubmission(id: string, updates: Partial<TrialSubmission>): Promise<TrialSubmission | null> {\n        try {\n            const docRef = doc(db, 'trials', id);\n            await updateDoc(docRef, updates);\n\n            const docSnap = await getDoc(docRef);\n            if (docSnap.exists()) {\n                return { id: docSnap.id, ...docSnap.data() } as TrialSubmission;\n            }\n            return null;\n        } catch (e) {\n            console.error('Failed to update trial:', e);\n            return null;\n        }\n    },\n\n    /**\n     * Get a single submission by ID\n     */\n    async getSubmission(id: string): Promise<TrialSubmission | null> {\n        try {\n            const docRef = doc(db, 'trials', id);\n            const docSnap = await getDoc(docRef);\n            if (docSnap.exists()) {\n                return { id: docSnap.id, ...docSnap.data() } as TrialSubmission;\n            }\n            return null;\n        } catch (e) {\n            console.error('Failed to get trial:', e);\n            return null;\n        }\n    },\n\n    /**\n     * Delete a submission\n     */\n    async deleteSubmission(id: string): Promise<boolean> {\n        try {\n            await deleteDoc(doc(db, 'trials', id));\n            return true;\n        } catch (e) {\n            console.error('Failed to delete trial:', e);\n            return false;\n        }\n    },\n\n    /**\n     * Save roadmap to a trial\n     */\n    async saveRoadmap(trialId: string, roadmap: Omit<RoadmapData, 'generatedAt'>): Promise<boolean> {\n        try {\n            await updateDoc(doc(db, 'trials', trialId), {\n                roadmap: {\n                    ...roadmap,\n                    generatedAt: Date.now()\n                }\n            });\n            return true;\n        } catch (e) {\n            console.error('Failed to save roadmap:', e);\n            return false;\n        }\n    },\n\n    /**\n     * Update simulation state\n     */\n    async updateSimulationState(\n        trialId: string,\n        state: SimulationState\n    ): Promise<boolean> {\n        try {\n            await updateDoc(doc(db, 'trials', trialId), {\n                simulationState: state,\n                status: 'in_progress'\n            });\n            return true;\n        } catch (e) {\n            console.error('Failed to update simulation state:', e);\n            return false;\n        }\n    }\n};\n","\nexport type QuizTopic = 'kinetics' | 'regulatory' | 'pharmacology' | 'chemistry';\n\nexport interface Question {\n    id: string;\n    topic: QuizTopic;\n    difficulty: 1 | 2 | 3 | 4 | 5;\n    level?: number; // Target Semester Level\n    text: string;\n    options: string[];\n    correctIndex: number;\n    explanation: string;\n}\n\nexport const QUESTION_BANK: Question[] = [\n    // --- LEVEL 1: Pharm Analysis ---\n    {\n        id: 'L1_1',\n        topic: 'chemistry',\n        difficulty: 1,\n        level: 1,\n        text: 'What is the primary purpose of titration in pharmaceutical analysis?',\n        options: ['To synthesize drugs', 'To determine concentration', 'To measure temperature', 'To break bonds'],\n        correctIndex: 1,\n        explanation: 'Titration is a quantitative technique used to determine the concentration of an analyte.'\n    },\n    {\n        id: 'L1_2',\n        topic: 'chemistry',\n        difficulty: 2,\n        level: 1,\n        text: 'Which indicator is commonly used in acid-base titrations involving strong acid and strong base?',\n        options: ['Starch', 'Phenolphthalein', 'Eriochrome Black T', 'Ferroin'],\n        correctIndex: 1,\n        explanation: 'Phenolphthalein is standard for strong acid-base titrations, changing color around pH 8-10.'\n    },\n\n    // --- LEVEL 2: Organic Chem I ---\n    {\n        id: 'L2_1',\n        topic: 'chemistry',\n        difficulty: 2,\n        level: 2,\n        text: 'What is the product of the reaction between Salicylic acid and Acetic anhydride?',\n        options: ['Paracetamol', 'Ibuprofen', 'Aspirin', 'Benzoic Acid'],\n        correctIndex: 2,\n        explanation: 'Aspirin (Acetylsalicylic acid) is formed by acetylation of Salicylic acid.'\n    },\n\n    // --- LEVEL 3: Organic Chem II ---\n    {\n        id: 'L3_1',\n        topic: 'chemistry',\n        difficulty: 3,\n        level: 3,\n        text: 'Why is Benzene more stable than expected for a cyclic triene?',\n        options: ['High Reactivity', 'Resonance Energy', 'Weak Bonds', 'Octet Rule violation'],\n        correctIndex: 1,\n        explanation: 'Delocalization of pi-electrons (Resonance) confers extra stability to the aromatic ring.'\n    },\n\n    // --- LEVEL 4: Med Chem I ---\n    {\n        id: 'L4_1',\n        topic: 'pharmacology',\n        difficulty: 3,\n        level: 4,\n        text: 'Which term describes the relationship between chemical structure and biological activity?',\n        options: ['SAR', 'NMR', 'HPLC', 'TLC'],\n        correctIndex: 0,\n        explanation: 'Structure-Activity Relationship (SAR) studies how structural changes affect potency and efficacy.'\n    },\n\n    // --- LEVEL 5: Pharmacology ---\n    {\n        id: 'L5_1',\n        topic: 'pharmacology',\n        difficulty: 4,\n        level: 5,\n        text: 'Beta-lactam antibiotics (like Penicillin) work by inhibiting:',\n        options: ['Protein synthesis', 'Cell wall synthesis', 'DNA replication', 'Folic acid synthesis'],\n        correctIndex: 1,\n        explanation: 'They inhibit penicillin-binding proteins (PBPs), preventing bacterial cell wall cross-linking.'\n    },\n\n    // --- LEVEL 6: Herbal Tech ---\n    {\n        id: 'L6_1',\n        topic: 'kinetics',\n        difficulty: 3,\n        level: 6,\n        text: 'Which extraction method is best for heat-sensitive volatile oils?',\n        options: ['Soxhlet', 'Steam Distillation', 'Maceration', 'Cold Expression'],\n        correctIndex: 3,\n        explanation: 'Cold expression is used for citrus oils to avoid thermal degradation.'\n    },\n\n    // --- LEVEL 7: NDDS ---\n    {\n        id: 'L7_1',\n        topic: 'kinetics',\n        difficulty: 4,\n        level: 7,\n        text: 'Liposomes are primarily chemically composed of:',\n        options: ['Proteins', 'Phospholipids', 'Carbohydrates', 'Metals'],\n        correctIndex: 1,\n        explanation: 'Liposomes are spherical vesicles formed by a lipid bilayer of phospholipids.'\n    },\n\n    // --- LEVEL 8: Clinical Research ---\n    {\n        id: 'L8_1', // Previous R1_easy\n        topic: 'regulatory',\n        difficulty: 1,\n        level: 8,\n        text: 'Which agency is responsible for drug approval in the USA?',\n        options: ['EMA', 'WHO', 'FDA', 'CDC'],\n        correctIndex: 2,\n        explanation: 'The FDA (Food and Drug Administration) regulates drug approval in the US.'\n    },\n    {\n        id: 'L8_2', // Previous R2_med\n        topic: 'regulatory',\n        difficulty: 3,\n        level: 8,\n        text: 'What application is submitted to start clinical trials in humans?',\n        options: ['NDA', 'IND', 'ANDA', 'BLA'],\n        correctIndex: 1,\n        explanation: 'An IND (Investigational New Drug) application is required before Phase I trials.'\n    },\n    {\n        id: 'L8_3',\n        topic: 'regulatory',\n        difficulty: 5,\n        level: 8,\n        text: 'Phase IV clinical trials are also known as:',\n        options: ['Dose ranging', 'Therapeutic confirmation', 'Post-marketing surveillance', 'Safety screening'],\n        correctIndex: 2,\n        explanation: 'Phase IV occurs after approval to monitor long-term safety in the general population.'\n    }\n];\n\nexport const getQuestionsForLevel = (level: number, count = 5): Question[] => {\n    // Filter by level (strict)\n    let pool = QUESTION_BANK.filter(q => q.level === level);\n\n    // If not enough level-specific questions, fallback to same topic\n    if (pool.length < count) {\n        // Find topic for this level (hacky lookup, ideally store map)\n        const sample = pool[0];\n        if (sample) {\n            const more = QUESTION_BANK.filter(q => q.topic === sample.topic && !q.level);\n            pool = [...pool, ...more];\n        }\n    }\n\n    // Shuffle and slice\n    return pool.sort(() => 0.5 - Math.random()).slice(0, count);\n};\n"],"names":[],"mappings":"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"}