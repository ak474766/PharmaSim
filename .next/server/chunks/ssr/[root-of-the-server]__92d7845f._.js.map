{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../src/lib/userService.ts","../../../../src/context/AuthContext.tsx","../../../../src/context/UltraContextProvider.tsx","../../../../node_modules/ultracontext/dist/index.js","../../../../src/lib/ultraContextService.ts"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","\nimport { db } from './firebase';\nimport { doc, getDoc, setDoc, updateDoc, collection, query, orderBy, limit, getDocs } from 'firebase/firestore';\n\nexport interface Quest {\n    id: string;\n    title: string;\n    description: string;\n    progress: number;\n    total: number;\n    completed: boolean;\n    type: 'build_molecule' | 'earn_xp';\n}\n\nexport interface Achievement {\n    id: string;\n    title: string;\n    description: string;\n    icon: string;\n    unlockedAt: number; // Timestamp\n}\n\nexport interface UserProfile {\n    uid: string;\n    displayName: string;\n    email: string;\n    xp: number;\n    level: number;\n    reputation: number;\n    moleculesDiscovered: number;\n    dailyQuests?: Quest[];\n    lastLogin?: number;\n    achievements?: Achievement[];\n    topicMastery?: Record<string, number>;\n}\n\nconst QUEST_TEMPLATES: Omit<Quest, 'progress' | 'completed'>[] = [\n    { id: 'q1', title: 'Synthesis Master', description: 'Build 3 Molecules', total: 3, type: 'build_molecule' },\n    { id: 'q2', title: 'Lab Rat', description: 'Earn 500 XP', total: 500, type: 'earn_xp' },\n    { id: 'q3', title: 'Daily Discovery', description: 'Build 1 Complex Molecule', total: 1, type: 'build_molecule' }\n];\n\nexport const UserService = {\n    // Get user profile or create if not exists\n    async getProfile(uid: string, email: string, displayName: string): Promise<UserProfile> {\n        const docRef = doc(db, 'users', uid);\n        const docSnap = await getDoc(docRef);\n\n        if (docSnap.exists()) {\n            const data = docSnap.data() as UserProfile;\n            // Check for daily quest reset\n            const now = Date.now();\n            const oneDay = 24 * 60 * 60 * 1000;\n            if (!data.lastLogin || (now - data.lastLogin) > oneDay || !data.dailyQuests) {\n                // Reset quests\n                const newQuests = QUEST_TEMPLATES.slice(0, 2).map(q => ({ ...q, progress: 0, completed: false })); // Pick first 2 for now\n                await updateDoc(docRef, { dailyQuests: newQuests, lastLogin: now });\n                data.dailyQuests = newQuests;\n            }\n            return data;\n        } else {\n            // Create new profile\n            const newQuests = QUEST_TEMPLATES.slice(0, 2).map(q => ({ ...q, progress: 0, completed: false }));\n            const newProfile: UserProfile = {\n                uid,\n                email,\n                displayName: displayName || 'Researcher ' + uid.slice(0, 4),\n                xp: 0,\n                level: 1,\n                reputation: 100,\n                moleculesDiscovered: 0,\n                dailyQuests: newQuests,\n                lastLogin: Date.now(),\n                achievements: [],\n                topicMastery: { kinetics: 1, regulatory: 1, pharmacology: 1, chemistry: 1 }\n            };\n            await setDoc(docRef, newProfile);\n            return newProfile;\n        }\n    },\n\n    async updateDisplayName(uid: string, displayName: string) {\n        const name = displayName.trim();\n        if (!name) throw new Error('Display name cannot be empty');\n        const docRef = doc(db, 'users', uid);\n        await updateDoc(docRef, { displayName: name });\n        return name;\n    },\n\n    // Update Quest Progress\n    async updateQuestProgress(uid: string, type: string, amount: number) {\n        const docRef = doc(db, 'users', uid);\n        const docSnap = await getDoc(docRef);\n\n        if (docSnap.exists()) {\n            const data = docSnap.data() as UserProfile;\n            let questsUpdated = false;\n\n            const newQuests = (data.dailyQuests || []).map(q => {\n                if (q.type === type && !q.completed) {\n                    const newProgress = Math.min(q.progress + amount, q.total);\n                    questsUpdated = true;\n                    return {\n                        ...q,\n                        progress: newProgress,\n                        completed: newProgress >= q.total\n                    };\n                }\n                return q;\n            });\n\n            if (questsUpdated) {\n                await updateDoc(docRef, { dailyQuests: newQuests });\n            }\n        }\n    },\n\n    // Unlock Achievement\n    async unlockAchievement(uid: string, achievement: Omit<Achievement, 'unlockedAt'>) {\n        const docRef = doc(db, 'users', uid);\n        const docSnap = await getDoc(docRef);\n\n        if (docSnap.exists()) {\n            const data = docSnap.data() as UserProfile;\n            const existing = (data.achievements || []).find(a => a.id === achievement.id);\n            if (!existing) {\n                const newAchievement = { ...achievement, unlockedAt: Date.now() };\n                await updateDoc(docRef, {\n                    achievements: [...(data.achievements || []), newAchievement]\n                });\n                return newAchievement;\n            }\n        }\n        return null;\n    },\n\n    // Add XP and check for level up\n    async addXP(uid: string, amount: number) {\n        const docRef = doc(db, 'users', uid);\n        const docSnap = await getDoc(docRef);\n\n        if (docSnap.exists()) {\n            const data = docSnap.data() as UserProfile;\n            const newXP = data.xp + amount;\n            const newLevel = Math.floor(newXP / 1000) + 1; // Simple level formula: 1000 XP per level\n\n            await updateDoc(docRef, {\n                xp: newXP,\n                level: newLevel,\n                moleculesDiscovered: data.moleculesDiscovered + 1 // Assuming 1 molecule per XP grant for now\n            });\n            return { newXP, newLevel };\n        }\n        return null;\n    },\n\n    // Get Leaderboard (Top 50 by XP)\n    async getLeaderboard(): Promise<UserProfile[]> {\n        const q = query(collection(db, 'users'), orderBy('xp', 'desc'), limit(50));\n        const querySnapshot = await getDocs(q);\n        return querySnapshot.docs.map(doc => doc.data() as UserProfile);\n    },\n\n    // Get User Rank (Client-side calculation for demo)\n    async getUserRank(uid: string): Promise<number> {\n        // Fetch specific number of top users to determine rank\n        // Note: In production you'd use a cloud function or dedicated rank field\n        const q = query(collection(db, 'users'), orderBy('xp', 'desc'), limit(100));\n        const querySnapshot = await getDocs(q);\n        const users = querySnapshot.docs.map(doc => doc.id);\n        const rank = users.indexOf(uid);\n        return rank !== -1 ? rank + 1 : 1000; // Return >100 if not in top 100\n    },\n\n    // Update Topic Mastery\n    async updateTopicMastery(uid: string, topic: string, change: number) {\n        const docRef = doc(db, 'users', uid);\n        const docSnap = await getDoc(docRef);\n\n        if (docSnap.exists()) {\n            const data = docSnap.data() as UserProfile;\n            const currentMastery = data.topicMastery?.[topic] || 1;\n            const newMastery = Math.max(1, Math.min(5, currentMastery + change)); // Clamp between 1 and 5\n\n            await updateDoc(docRef, {\n                [`topicMastery.${topic}`]: newMastery\n            });\n            return newMastery;\n        }\n        return 1;\n    }\n};\n","'use client';\n\n\nimport { createContext, useContext, useEffect, useState } from 'react';\nimport { onAuthStateChanged, User } from 'firebase/auth';\nimport { auth } from '@/lib/firebase';\nimport { UserService, UserProfile } from '@/lib/userService';\n\ninterface AuthContextType {\n    user: User | null;\n    profile: UserProfile | null;\n    loading: boolean;\n    refreshProfile: () => Promise<void>;\n}\n\nconst AuthContext = createContext<AuthContextType>({ user: null, profile: null, loading: true, refreshProfile: async () => { } });\n\nexport const AuthProvider = ({ children }: { children: React.ReactNode }) => {\n    const [user, setUser] = useState<User | null>(null);\n    const [profile, setProfile] = useState<UserProfile | null>(null);\n    const [loading, setLoading] = useState(true);\n\n    const fetchProfile = async (currentUser: User) => {\n        try {\n            const userProfile = await UserService.getProfile(\n                currentUser.uid,\n                currentUser.email || '',\n                currentUser.displayName || ''\n            );\n            setProfile(userProfile);\n        } catch (error) {\n            console.error(\"Error fetching profile:\", error);\n        }\n    };\n\n    useEffect(() => {\n        const unsubscribe = onAuthStateChanged(auth, async (currentUser) => {\n            setUser(currentUser);\n            if (currentUser) {\n                await fetchProfile(currentUser);\n            } else {\n                setProfile(null);\n            }\n            setLoading(false);\n        });\n\n        return () => unsubscribe();\n    }, []);\n\n    const refreshProfile = async () => {\n        if (user) {\n            await fetchProfile(user);\n        }\n    };\n\n    return (\n        <AuthContext.Provider value={{ user, profile, loading, refreshProfile }}>\n            {children}\n        </AuthContext.Provider>\n    );\n};\n\nexport const useAuth = () => useContext(AuthContext);\n","'use client';\n\n/**\n * UltraContext Provider\n * \n * React context provider for app-wide UltraContext access.\n * Manages session-based context creation and provides hooks for components.\n */\n\nimport { createContext, useContext, useState, useCallback, ReactNode } from 'react';\nimport { useAuth } from './AuthContext';\nimport {\n    UltraContextService,\n    UCContext,\n    UCMessage,\n    UCGetResponse\n} from '@/lib/ultraContextService';\n\n// =============================================================================\n// Types\n// =============================================================================\n\ninterface UltraContextState {\n    /** Current active context ID */\n    activeContextId: string | null;\n    /** Loading state */\n    isLoading: boolean;\n    /** Error state */\n    error: string | null;\n}\n\ninterface UltraContextValue extends UltraContextState {\n    /** Create a new general context */\n    createContext: (metadata?: Record<string, unknown>) => Promise<UCContext | null>;\n    /** Create a molecule analysis context */\n    createMoleculeContext: (moleculeName: string) => Promise<UCContext | null>;\n    /** Create a quiz context */\n    createQuizContext: (topic: string) => Promise<UCContext | null>;\n    /** Create a clinical trial context */\n    createTrialContext: (trialId: string) => Promise<UCContext | null>;\n    /** Set the active context by ID */\n    setActiveContext: (contextId: string) => void;\n    /** Get messages from the active context */\n    getMessages: () => Promise<UCMessage[]>;\n    /** Append a message to the active context */\n    appendMessage: (message: UCMessage) => Promise<void>;\n    /** Save a conversation exchange (user + assistant) */\n    saveExchange: (userMessage: string, assistantMessage: string) => Promise<void>;\n    /** Get context with history (for time-travel) */\n    getHistory: () => Promise<UCGetResponse | null>;\n    /** Clear error state */\n    clearError: () => void;\n}\n\n// =============================================================================\n// Context\n// =============================================================================\n\nconst UltraContextContext = createContext<UltraContextValue | null>(null);\n\n// =============================================================================\n// Provider Component\n// =============================================================================\n\nexport function UltraContextProvider({ children }: { children: ReactNode }) {\n    const { user } = useAuth();\n\n    const [state, setState] = useState<UltraContextState>({\n        activeContextId: null,\n        isLoading: false,\n        error: null,\n    });\n\n    // Helper to set loading state\n    const setLoading = (isLoading: boolean) => {\n        setState(prev => ({ ...prev, isLoading }));\n    };\n\n    // Helper to set error state\n    const setError = (error: string | null) => {\n        setState(prev => ({ ...prev, error, isLoading: false }));\n    };\n\n    // Clear error\n    const clearError = useCallback(() => {\n        setState(prev => ({ ...prev, error: null }));\n    }, []);\n\n    // Set active context\n    const setActiveContext = useCallback((contextId: string) => {\n        setState(prev => ({ ...prev, activeContextId: contextId }));\n    }, []);\n\n    // Create a new general context\n    const createContext = useCallback(async (metadata?: Record<string, unknown>) => {\n        setLoading(true);\n        try {\n            const ctx = await UltraContextService.createContext({\n                userId: user?.uid,\n                ...metadata\n            });\n            setState(prev => ({\n                ...prev,\n                activeContextId: ctx.id,\n                isLoading: false,\n                error: null\n            }));\n            return ctx;\n        } catch (err) {\n            setError(err instanceof Error ? err.message : 'Failed to create context');\n            return null;\n        }\n    }, [user?.uid]);\n\n    // Create molecule analysis context\n    const createMoleculeContext = useCallback(async (moleculeName: string) => {\n        if (!user?.uid) {\n            setError('User not authenticated');\n            return null;\n        }\n        setLoading(true);\n        try {\n            const ctx = await UltraContextService.createMoleculeAnalysisContext(\n                user.uid,\n                moleculeName\n            );\n            setState(prev => ({\n                ...prev,\n                activeContextId: ctx.id,\n                isLoading: false,\n                error: null\n            }));\n            return ctx;\n        } catch (err) {\n            setError(err instanceof Error ? err.message : 'Failed to create molecule context');\n            return null;\n        }\n    }, [user?.uid]);\n\n    // Create quiz context\n    const createQuizContext = useCallback(async (topic: string) => {\n        if (!user?.uid) {\n            setError('User not authenticated');\n            return null;\n        }\n        setLoading(true);\n        try {\n            const ctx = await UltraContextService.createQuizContext(user.uid, topic);\n            setState(prev => ({\n                ...prev,\n                activeContextId: ctx.id,\n                isLoading: false,\n                error: null\n            }));\n            return ctx;\n        } catch (err) {\n            setError(err instanceof Error ? err.message : 'Failed to create quiz context');\n            return null;\n        }\n    }, [user?.uid]);\n\n    // Create clinical trial context\n    const createTrialContext = useCallback(async (trialId: string) => {\n        if (!user?.uid) {\n            setError('User not authenticated');\n            return null;\n        }\n        setLoading(true);\n        try {\n            const ctx = await UltraContextService.createTrialContext(user.uid, trialId);\n            setState(prev => ({\n                ...prev,\n                activeContextId: ctx.id,\n                isLoading: false,\n                error: null\n            }));\n            return ctx;\n        } catch (err) {\n            setError(err instanceof Error ? err.message : 'Failed to create trial context');\n            return null;\n        }\n    }, [user?.uid]);\n\n    // Get messages from active context\n    const getMessages = useCallback(async (): Promise<UCMessage[]> => {\n        if (!state.activeContextId) {\n            console.warn('[UltraContext] No active context');\n            return [];\n        }\n        try {\n            const result = await UltraContextService.getContext(state.activeContextId);\n            return result.data || [];\n        } catch (err) {\n            console.error('[UltraContext] Failed to get messages:', err);\n            return [];\n        }\n    }, [state.activeContextId]);\n\n    // Append message to active context\n    const appendMessage = useCallback(async (message: UCMessage) => {\n        if (!state.activeContextId) {\n            setError('No active context');\n            return;\n        }\n        try {\n            await UltraContextService.appendMessage(state.activeContextId, message);\n        } catch (err) {\n            setError(err instanceof Error ? err.message : 'Failed to append message');\n        }\n    }, [state.activeContextId]);\n\n    // Save a conversation exchange\n    const saveExchange = useCallback(async (userMessage: string, assistantMessage: string) => {\n        if (!state.activeContextId) {\n            setError('No active context');\n            return;\n        }\n        try {\n            await UltraContextService.saveConversationExchange(\n                state.activeContextId,\n                userMessage,\n                assistantMessage\n            );\n        } catch (err) {\n            setError(err instanceof Error ? err.message : 'Failed to save exchange');\n        }\n    }, [state.activeContextId]);\n\n    // Get context with history\n    const getHistory = useCallback(async (): Promise<UCGetResponse | null> => {\n        if (!state.activeContextId) {\n            console.warn('[UltraContext] No active context');\n            return null;\n        }\n        try {\n            return await UltraContextService.getContextWithHistory(state.activeContextId);\n        } catch (err) {\n            console.error('[UltraContext] Failed to get history:', err);\n            return null;\n        }\n    }, [state.activeContextId]);\n\n    const value: UltraContextValue = {\n        ...state,\n        createContext,\n        createMoleculeContext,\n        createQuizContext,\n        createTrialContext,\n        setActiveContext,\n        getMessages,\n        appendMessage,\n        saveExchange,\n        getHistory,\n        clearError,\n    };\n\n    return (\n        <UltraContextContext.Provider value={value}>\n            {children}\n        </UltraContextContext.Provider>\n    );\n}\n\n// =============================================================================\n// Hook\n// =============================================================================\n\n/**\n * Hook to access UltraContext functionality\n * Must be used within an UltraContextProvider\n */\nexport function useUltraContext(): UltraContextValue {\n    const context = useContext(UltraContextContext);\n    if (!context) {\n        throw new Error('useUltraContext must be used within an UltraContextProvider');\n    }\n    return context;\n}\n\nexport default UltraContextProvider;\n","export class UltraContextHttpError extends Error {\n    constructor(args) {\n        super(`UltraContext request failed: ${args.status} ${args.url}`);\n        this.name = 'UltraContextHttpError';\n        this.status = args.status;\n        this.url = args.url;\n        this.bodyText = args.bodyText;\n    }\n}\nexport class UltraContext {\n    constructor(cfg) {\n        this.baseUrl = (cfg.baseUrl ?? 'https://api.ultracontext.ai').replace(/\\/+$/, '');\n        this.apiKey = cfg.apiKey;\n        this.fetchFn = cfg.fetch ?? fetch;\n        this.headers = cfg.headers;\n        this.timeoutMs = cfg.timeoutMs;\n    }\n    async create(input = {}) {\n        return this.request('/contexts', {\n            method: 'POST',\n            body: input,\n        });\n    }\n    async append(contextId, input) {\n        return this.request(`/contexts/${encodeURIComponent(contextId)}`, {\n            method: 'POST',\n            body: input,\n        });\n    }\n    async get(idOrOptions, options) {\n        if (!idOrOptions || typeof idOrOptions === 'object') {\n            const params = new URLSearchParams();\n            if (typeof idOrOptions === 'object' && idOrOptions.limit)\n                params.set('limit', String(idOrOptions.limit));\n            const query = params.toString();\n            return this.request(`/contexts${query ? `?${query}` : ''}`, { method: 'GET' });\n        }\n        const params = new URLSearchParams();\n        if (options?.version !== undefined)\n            params.set('version', String(options.version));\n        if (options?.at !== undefined)\n            params.set('at', String(options.at));\n        if (options?.before)\n            params.set('before', options.before);\n        if (options?.history)\n            params.set('history', 'true');\n        const query = params.toString();\n        return this.request(`/contexts/${encodeURIComponent(idOrOptions)}${query ? `?${query}` : ''}`, { method: 'GET' });\n    }\n    async update(contextId, input, options) {\n        const body = options?.metadata\n            ? { updates: Array.isArray(input) ? input : [input], metadata: options.metadata }\n            : input;\n        return this.request(`/contexts/${encodeURIComponent(contextId)}`, {\n            method: 'PATCH',\n            body,\n        });\n    }\n    async delete(contextId, ids, options) {\n        return this.request(`/contexts/${encodeURIComponent(contextId)}`, {\n            method: 'DELETE',\n            body: { ids, metadata: options?.metadata },\n        });\n    }\n    async request(path, init) {\n        const url = `${this.baseUrl}${path.startsWith('/') ? '' : '/'}${path}`;\n        const headers = {\n            Authorization: `Bearer ${this.apiKey}`,\n            ...(this.headers ?? {}),\n            ...(init.headers ?? {}),\n        };\n        let body;\n        if (init.body !== undefined) {\n            headers['Content-Type'] = headers['Content-Type'] ?? 'application/json';\n            body = JSON.stringify(init.body);\n        }\n        const ac = this.timeoutMs ? new AbortController() : undefined;\n        const timeout = this.timeoutMs ? setTimeout(() => ac?.abort(), this.timeoutMs) : undefined;\n        try {\n            const res = await this.fetchFn(url, {\n                method: init.method,\n                headers,\n                body,\n                signal: ac?.signal,\n            });\n            if (!res.ok) {\n                const bodyText = await safeReadText(res);\n                throw new UltraContextHttpError({ status: res.status, url, bodyText });\n            }\n            if (res.status === 204)\n                return undefined;\n            const contentType = res.headers.get('content-type') ?? '';\n            if (contentType.includes('application/json'))\n                return (await res.json());\n            return (await res.text());\n        }\n        finally {\n            if (timeout)\n                clearTimeout(timeout);\n        }\n    }\n}\nasync function safeReadText(res) {\n    try {\n        return await res.text();\n    }\n    catch {\n        return undefined;\n    }\n}\n","/**\n * UltraContext Service\n * \n * This service provides a wrapper around the UltraContext API for managing\n * AI agent conversation contexts with automatic versioning, time-travel,\n * and persistent storage.\n * \n * @see https://ultracontext.ai/docs\n */\n\nimport { UltraContext } from 'ultracontext';\n\n// =============================================================================\n// Types & Interfaces\n// =============================================================================\n\n/** Standard message format for LLM conversations */\nexport interface UCMessage {\n    role: 'system' | 'user' | 'assistant' | 'tool';\n    content: string;\n    [key: string]: unknown; // Schema-free: allows any additional fields\n}\n\n/** Context metadata for tracking */\nexport interface UCContextMetadata {\n    userId?: string;\n    sessionId?: string;\n    feature?: 'molecule-analysis' | 'quiz' | 'clinical-trial' | 'general';\n    createdAt?: string;\n    [key: string]: unknown;\n}\n\n/** Context object returned from UltraContext */\nexport interface UCContext {\n    id: string;\n    metadata?: UCContextMetadata;\n}\n\n/** Version history entry */\nexport interface UCVersion {\n    version: number;\n    operation: 'create' | 'append' | 'update' | 'delete';\n    affected: string[] | null;\n    timestamp?: string;\n}\n\n/** Get context response */\nexport interface UCGetResponse {\n    data: UCMessage[];\n    version?: number;\n    versions?: UCVersion[];\n}\n\n// =============================================================================\n// UltraContext Client Initialization\n// =============================================================================\n\nconst API_KEY = process.env.NEXT_PUBLIC_ULTRACONTEXT_API_KEY || '';\n\n// Initialize UltraContext client\nlet ucClient: UltraContext | null = null;\n\n/**\n * Get or create the UltraContext client instance\n */\nfunction getClient(): UltraContext {\n    if (!ucClient) {\n        if (!API_KEY) {\n            console.warn('[UltraContext] API key not found. Set NEXT_PUBLIC_ULTRACONTEXT_API_KEY in .env.local');\n        }\n        ucClient = new UltraContext({ apiKey: API_KEY });\n    }\n    return ucClient;\n}\n\n// =============================================================================\n// UltraContext Service\n// =============================================================================\n\nexport const UltraContextService = {\n    /**\n     * Create a new context\n     * @param metadata - Optional metadata to attach to the context\n     * @returns The created context object with ID\n     */\n    async createContext(metadata?: UCContextMetadata): Promise<UCContext> {\n        try {\n            const uc = getClient();\n            const ctx = await uc.create({ metadata });\n            console.log('[UltraContext] Created context:', ctx.id);\n            return ctx as UCContext;\n        } catch (error) {\n            console.error('[UltraContext] Failed to create context:', error);\n            throw error;\n        }\n    },\n\n    /**\n     * Fork a context from an existing one\n     * @param fromContextId - The context ID to fork from\n     * @param version - Optional version to fork from (defaults to latest)\n     * @returns The new forked context\n     */\n    async forkContext(fromContextId: string, version?: number): Promise<UCContext> {\n        try {\n            const uc = getClient();\n            const ctx = await uc.create({\n                from: fromContextId,\n                ...(version !== undefined && { version })\n            });\n            console.log('[UltraContext] Forked context:', ctx.id, 'from:', fromContextId);\n            return ctx as UCContext;\n        } catch (error) {\n            console.error('[UltraContext] Failed to fork context:', error);\n            throw error;\n        }\n    },\n\n    /**\n     * Get a context with its messages\n     * @param contextId - The context ID to retrieve\n     * @param options - Optional parameters for retrieval\n     * @returns The context data with messages\n     */\n    async getContext(\n        contextId: string,\n        options?: {\n            version?: number;\n            at?: number;\n            before?: string;\n            history?: boolean;\n        }\n    ): Promise<UCGetResponse> {\n        try {\n            const uc = getClient();\n            const result = await uc.get(contextId, options);\n            return result as unknown as UCGetResponse;\n        } catch (error) {\n            console.error('[UltraContext] Failed to get context:', error);\n            throw error;\n        }\n    },\n\n    /**\n     * List all contexts\n     * @returns Array of all contexts\n     */\n    async listContexts(): Promise<UCContext[]> {\n        try {\n            const uc = getClient();\n            const result = await uc.get();\n            return (result.data || []) as UCContext[];\n        } catch (error) {\n            console.error('[UltraContext] Failed to list contexts:', error);\n            throw error;\n        }\n    },\n\n    /**\n     * Append one or more messages to a context\n     * @param contextId - The context ID to append to\n     * @param messages - Single message or array of messages\n     */\n    async appendMessage(\n        contextId: string,\n        messages: UCMessage | UCMessage[]\n    ): Promise<void> {\n        try {\n            const uc = getClient();\n            await uc.append(contextId, messages);\n            console.log('[UltraContext] Appended message(s) to:', contextId);\n        } catch (error) {\n            console.error('[UltraContext] Failed to append message:', error);\n            throw error;\n        }\n    },\n\n    /**\n     * Update a message by index or ID\n     * Creates a new version automatically\n     * @param contextId - The context ID\n     * @param update - The update object with index/id and new content\n     */\n    async updateMessage(\n        contextId: string,\n        update: { index: number; content: string } | { id: string; content: string } | Array<{ index: number; content: string } | { id: string; content: string }>\n    ): Promise<void> {\n        try {\n            const uc = getClient();\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            await uc.update(contextId, update as any);\n            console.log('[UltraContext] Updated message in:', contextId);\n        } catch (error) {\n            console.error('[UltraContext] Failed to update message:', error);\n            throw error;\n        }\n    },\n\n    /**\n     * Delete a message by index or ID\n     * Creates a new version automatically\n     * @param contextId - The context ID\n     * @param target - Message index (number) or ID (string), use -1 for last message\n     */\n    async deleteMessage(\n        contextId: string,\n        target: number | string\n    ): Promise<void> {\n        try {\n            const uc = getClient();\n            await uc.delete(contextId, target);\n            console.log('[UltraContext] Deleted message from:', contextId);\n        } catch (error) {\n            console.error('[UltraContext] Failed to delete message:', error);\n            throw error;\n        }\n    },\n\n    /**\n     * Get context at a specific version (time-travel)\n     * @param contextId - The context ID\n     * @param version - The version number to retrieve\n     * @returns The context data at that version\n     */\n    async getContextAtVersion(contextId: string, version: number): Promise<UCGetResponse> {\n        return this.getContext(contextId, { version });\n    },\n\n    /**\n     * Get context with full version history\n     * @param contextId - The context ID\n     * @returns The context data with version history\n     */\n    async getContextWithHistory(contextId: string): Promise<UCGetResponse> {\n        return this.getContext(contextId, { history: true });\n    },\n\n    // =========================================================================\n    // Convenience Methods for PharmaSim Features\n    // =========================================================================\n\n    /**\n     * Create a context for molecule analysis conversations\n     * @param userId - The user's ID\n     * @param moleculeName - Name of the molecule being analyzed\n     */\n    async createMoleculeAnalysisContext(userId: string, moleculeName: string): Promise<UCContext> {\n        return this.createContext({\n            userId,\n            feature: 'molecule-analysis',\n            createdAt: new Date().toISOString(),\n            moleculeName\n        });\n    },\n\n    /**\n     * Create a context for quiz sessions\n     * @param userId - The user's ID\n     * @param topic - The quiz topic\n     */\n    async createQuizContext(userId: string, topic: string): Promise<UCContext> {\n        return this.createContext({\n            userId,\n            feature: 'quiz',\n            createdAt: new Date().toISOString(),\n            topic\n        });\n    },\n\n    /**\n     * Create a context for clinical trial simulations\n     * @param userId - The user's ID\n     * @param trialId - The trial ID\n     */\n    async createTrialContext(userId: string, trialId: string): Promise<UCContext> {\n        return this.createContext({\n            userId,\n            feature: 'clinical-trial',\n            createdAt: new Date().toISOString(),\n            trialId\n        });\n    },\n\n    /**\n     * Save a conversation exchange (user prompt + AI response)\n     * @param contextId - The context ID\n     * @param userMessage - The user's message\n     * @param assistantMessage - The AI's response\n     */\n    async saveConversationExchange(\n        contextId: string,\n        userMessage: string,\n        assistantMessage: string\n    ): Promise<void> {\n        await this.appendMessage(contextId, [\n            { role: 'user', content: userMessage },\n            { role: 'assistant', content: assistantMessage }\n        ]);\n    }\n};\n\nexport default UltraContextService;\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","vendored","ReactJsxRuntime","React"],"mappings":"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","ignoreList":[0,1,2,6]}